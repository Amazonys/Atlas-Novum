#Amyzonis' IR overhaul of formables

country_decisions = {

# Post-Discovery Formables	 

# 	Spain	 
	ir_spain_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_spain_flag }
			NOT = { tag = IBE }
			NOT = { tag = SPA }
			NOT = { tag = POR }
			NOT = { tag = LUS }
			NOT = { tag = ADU }
			NOT = { tag = GRA }
			NOT = { tag = KNI }
			capital_scope = { region = iberia_region }
			IBE = { exists = no }
			SPA = { exists = no }
			is_nomad = no
			NOT = { religion_group = muslim }			#Muslims go for Andalusia
			OR = {
				primary_culture = castillian	
				primary_culture = aragonese
				primary_culture = catalan
				primary_culture = leonese
				primary_culture = galician
			}
		}
		provinces_to_highlight = {
			OR = {
				AND = {
				region = iberia_region
				}
				#area = castille_area
				#area = toledo_area
				#area = aragon_area
				#area = valencia_area
				#area = murcia_area
				#area = catalonia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			NOT = {
					#portugal
					area = guadiana_area
					area = sado_area
					area = tagus_area
					area = porto_area
					area = beieras_area
					area = galicia_area #Galicia historically not Spain, only by incident
					#macaronesia
					area = canaries_area
					area = madeira_area
					area = macaronesia_area #Azores
					}
		}
		allow = {
			NOT = { current_age = age_of_discovery }
			is_at_war = no
		#	total_development = 300			
			aragon_area 	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			catalonia_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			valencia_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			lower_andalucia_area = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			upper_andalucia_area = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			castille_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			toledo_area 	 = { type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			asturias_area 	 = { type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			leon_area 		 = { type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			alentejo_area 	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			basque_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			baleares_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			extremadura_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			murcia_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			zamora_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			burgos_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			rioja_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			cuenca_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			cordoba_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			granada_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			sevilla_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			cadiz_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			malaga_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			madrid_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			vizcaya_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			urgell_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			castellon_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			tarragona_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			pyrennes_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			teruel_area	 = { 	type = all 	country_or_non_sovereign_subject_holds = ROOT	}
			if = { 	limit = { ARA = { junior_union_with = ROOT } } 
				ARA = { NOT = { num_of_cities = 32 } } 	}
			if = { 	limit = { VAL = { junior_union_with = ROOT } } 
				VAL = { NOT = { num_of_cities = 32 } } 	}
			if = { 	limit = { CAT = { junior_union_with = ROOT } } 
				CAT = { NOT = { num_of_cities = 32 } } 	}
			if = { 	limit = { CAS = { junior_union_with = ROOT } } 
				CAS = { NOT = { num_of_cities = 40 } } 	}
			if = { 	limit = { NAV = { junior_union_with = ROOT } } 
				NAV = { NOT = { num_of_cities = 10 } } 	}
			if = { 	limit = { LON = { junior_union_with = ROOT } } 
				LON = { NOT = { num_of_cities = 20 } } 	}
		}
		effect = {
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { ARA = { junior_union_with = ROOT NOT = { num_of_cities = 32 } } }
				inherit = ARA
			}
			if = {
				limit = { CAS = { junior_union_with = ROOT NOT = { num_of_cities = 40 } } }
				inherit = CAS
			}
			if = {
				limit = { NAV = { junior_union_with = ROOT NOT = { num_of_cities = 10 } } }
				inherit = NAV
			}
			if = {
				limit = { LON = { junior_union_with = ROOT NOT = { num_of_cities = 20 } } }
				inherit = LON
			}
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = SPA
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = SPA_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_spain_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}
	
	
# 	lusitania	 
	ir_lusitania_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_lusitania_flag }
			NOT = { tag = IBE }
			NOT = { tag = SPA }
			NOT = { tag = CAS }
			NOT = { tag = ARA }
			NOT = { tag = LSA }
			NOT = { tag = ADU }
			NOT = { tag = GRA }
			NOT = { tag = KNI }
			capital_scope = { region = iberia_region }
			IBE = { exists = no }
			LSA = { exists = no }
			is_nomad = no
			NOT = { religion_group = muslim }			#Muslims go for Andalusia
			primary_culture = portugese	
		}
		provinces_to_highlight = {
			lsa_core_provinces = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			tier_2_formable_trigger = {
				PROVINCES=lsa_core_provinces
			}
			if = {
				limit = { POR = { junior_union_with = ROOT } }
				POR = { NOT = { num_of_cities = 30 } } 
			}
			if = {
				limit = { GAL = { junior_union_with = ROOT } }
				GAL = { NOT = { num_of_cities = 5 } } 
			}
			if = {
				limit = { LON = { junior_union_with = ROOT } }
				LON = { NOT = { num_of_cities = 15 } } 
			}
			if = {
				limit = { BGC = { junior_union_with = ROOT } }
				BGC = { NOT = { num_of_cities = 2 } } 
			}
			if = {
				limit = { COI = { junior_union_with = ROOT } }
				COI = { NOT = { num_of_cities = 2 } } 
			}
			if = {
				limit = { VSU = { junior_union_with = ROOT } }
				VSU = { NOT = { num_of_cities = 2 } } 
			}
			if = {
				limit = { BJ1 = { junior_union_with = ROOT } }
				BJ1 = { NOT = { num_of_cities = 2 } } 
			}
			NOT = { current_age = age_of_discovery }
			is_at_war = no		
		}
		effect = {
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { POR = { junior_union_with = ROOT NOT = { num_of_cities = 20 } } }
				inherit = POR
			}
			if = {
				limit = { GAL = { junior_union_with = ROOT NOT = { num_of_cities = 5 } } }
				inherit = GAL
			}
			if = {
				limit = { LON = { junior_union_with = ROOT NOT = { num_of_cities = 15 } } }
				inherit = LON
			}
			if = {
				limit = { BGC = { junior_union_with = ROOT NOT = { num_of_cities = 2 } } }
				inherit = BGC
			}
			if = {
				limit = { COI = { junior_union_with = ROOT NOT = { num_of_cities = 2 } } }
				inherit = COI
			}
			if = {
				limit = { VSU = { junior_union_with = ROOT NOT = { num_of_cities = 2 } } }
				inherit = VSU
			}
			if = {
				limit = { BJ1 = { junior_union_with = ROOT NOT = { num_of_cities = 2 } } }
				inherit = BJ1
			}
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = LSA
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_lusitania_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

# 	Andalusia	 
	ir_andalusia_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_andalusia_flag }
			NOT = { tag = IBE }
			NOT = { tag = SPA }
			NOT = { tag = CAS }
			NOT = { tag = ARA }
			NOT = { tag = LSA }
			NOT = { tag = ADU }
			NOT = { tag = LON }
			NOT = { tag = GAL }
			NOT = { tag = NAV }
			NOT = { tag = ADU }
			NOT = { tag = KNI }
			capital_scope = { region = iberia_region }
			IBE = { exists = no }
			ADU = { exists = no }
			is_nomad = no
			religion_group = muslim 			#Muslims go for Andalusia
			OR = {
				primary_culture = andalusi_culture	
				primary_culture = andalucian
				AND = {
					culture_group = maghrebi
					any_owned_province = { region = iberia_region }
				}
				AND = {
					culture_group = turko_semitic
					any_owned_province = { region = iberia_region }
				}
			}
		}
		provinces_to_highlight = {
			OR = {
				area = upper_andalucia_area
				area = lower_andalucia_area
				area = murcia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			upper_andalucia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			lower_andalucia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			murcia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			NOT = { current_age = age_of_discovery }
			is_at_war = no
		#	total_development = 300			
		}
		effect = {
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = ADU
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_andalusia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}
	
	
# 	England	 
	ir_england_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_england_flag }
			NOT = { tag = ENG }
			NOT = { tag = SCO }
			NOT = { tag = GBR }
			NOT = { tag = AGV }
			NOT = { tag = UNK }
			#NOT = { tag = AFU } #not sure what this is, doesnt exist anymore
			NOT = { capital_scope = { region = ireland_area } }
			capital_scope = { region = british_isles_region }
			ENG = { exists = no }
			GBR = { exists = no }
			AGV = { exists = no }
			UNK = { exists = no }
			#AFU = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = english	
				primary_culture = scottish
				primary_culture = northumbrian
				primary_culture = anglo_irish
			}
		}
		provinces_to_highlight = {
			OR = {
				area = home_counties_area
				area = wessex_area
				area = east_midlands_area
				area = west_midlands_area
				area = east_anglia_area
				area = yorkshire_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			home_counties_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			wessex_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			east_midlands_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			west_midlands_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			east_anglia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			yorkshire_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			is_at_war = no
		#	total_development = 300			
		}
		effect = {
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { SCO = { junior_union_with = ROOT NOT = { num_of_cities = 24 } } }
				inherit = SCO
			}
			if = {
				limit = { ENG = { junior_union_with = ROOT NOT = { num_of_cities = 5 } } }
				inherit = ENG
			}
			if = {
				limit = { WLS = { junior_union_with = ROOT NOT = { num_of_cities = 15 } } }
				inherit = WLS
			}
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = GBR
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = ENG_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_england_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}
	

# Great Britain  
	
	ir_britain_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_great_britain_flag }
			NOT = { tag = GBR }
			NOT = { tag = AGV }
			NOT = { tag = UNK }
			#NOT = { tag = AFU }
			NOT = { capital_scope = { region = ireland_area } }
			capital_scope = { region = british_isles_region }
			GBR = { exists = no }
			AGV = { exists = no }
			UNK = { exists = no }
			#AFU = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = english	
				primary_culture = scottish
				primary_culture = northumbrian
				primary_culture = anglo_irish
			}
		}
		provinces_to_highlight = {
			OR = {
				region = british_isles_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			british_isles_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}		
			if = {
				limit = { SCO = { junior_union_with = ROOT } }
				SCO = { NOT = { num_of_cities = 24 } } 
			}
			if = {
				limit = { ENG = { junior_union_with = ROOT } }
				ENG = { NOT = { num_of_cities = 5 } } 
			}
			if = {
				limit = { WLS = { junior_union_with = ROOT } }
				WLS = { NOT = { num_of_cities = 10 } } 
			}
			if = {
				limit = { WMC = { junior_union_with = ROOT } }
				WMC = { NOT = { num_of_cities = 10 } } 
			}
			if = {
				limit = { CRN = { junior_union_with = ROOT } }
				CRN = { NOT = { num_of_cities = 5 } } 
			}
			if = {
				limit = { NOL = { junior_union_with = ROOT } }
				NOL = { NOT = { num_of_cities = 8 } } 
			}
			if = {
				limit = { DUR = { junior_union_with = ROOT } }
				DUR = { NOT = { num_of_cities = 5 } } 
			}
			NOT = { current_age = age_of_discovery }
			is_at_war = no
		#	total_development = 300	
		}
		effect = {
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { SCO = { junior_union_with = ROOT NOT = { num_of_cities = 24 } } }
				inherit = SCO
			}
			if = {
				limit = { ENG = { junior_union_with = ROOT NOT = { num_of_cities = 5 } } }
				inherit = ENG
			}
			if = {
				limit = { WLS = { junior_union_with = ROOT NOT = { num_of_cities = 10 } } }
				inherit = WLS
			}
			if = {
				limit = { WMC = { junior_union_with = ROOT NOT = { num_of_cities = 10 } } }
				inherit = WMC
			}
			if = {
				limit = { CRN = { junior_union_with = ROOT NOT = { num_of_cities = 5 } } }
				inherit = CRN
			}
			if = {
				limit = { NOL = { junior_union_with = ROOT NOT = { num_of_cities = 8 } } }
				inherit = NOL
			}
			if = {
				limit = { DUR = { junior_union_with = ROOT NOT = { num_of_cities = 5 } } }
				inherit = DUR
			}
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = GBR
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = GBR_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_great_britain_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}
	
# Ireland	# NEEDS AMY EDIT - FROM BT 
	ir_irish_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_ireland_flag }
			NOT = { tag = IRE }
			NOT = { tag = SCO }
			NOT = { tag = TNA }
			IRE = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = irish
				AND = {
					culture_group = gaelic
					any_owned_province = { region = ireland_area }
				}
			}
			OR = {
				tag = LEI
				tag = ULS
				tag = MNS
				tag = CNN
			}
			NOT = { has_reform = irish_clann_legacy }			#Clans and Lordships need to create provincial kingdom
			NOT = { has_reform = norman_lordship_legacy }			#Clans and Lordships need to create provincial kingdom
			#NOT = { has_reform = principality_legacy } #rework this some time later
		}
		provinces_to_highlight = {
			region = ireland_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			ireland_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			NOT = { current_age = age_of_discovery }
			is_at_war = no
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = IRE
			set_legacy_government = high_kingship_legacy
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			hidden_effect = { country_event = { id = BeyondTypusCelticFlavour.1 days = 1 } }			#Fires new BT Tanistry succession
			custom_tooltip = tooltip_bt_starts_tanistry_succession
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			if = {
				limit = {
					exists = ENG
					NOT = { historical_friend_with = ENG }
					NOT = { historical_rival_with = ENG }
					NOT = { has_opinion = { who = ENG value = 0 } }
				}
				add_historical_rival = ENG
			}			#Add England as a historical rival if relations are negative (and not already rivals or friends)
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			#I decided to remove the development bonus from forming altogether. With the ability to build up provinces already there, this isn't really needed and can get out of hand quickly. Plus capital should move to Dublin anyway.
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = irish_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_ireland_flag
		}
		ai_will_do = {
			factor = 1
		}
	}

# Connacht  
	
	ir_connacht_nation = {
		major = yes
		potential = {
			NOT = { tag = CNN }
			NOT = { tag = MNS }
			NOT = { tag = LEI }
			NOT = { tag = ULS }
			CNN = { exists = no }
			IRE = { exists = no }
			NOT = { has_country_flag = formed_connacht_flag }
			capital_scope = { region = ireland_area }
			OR = {
				primary_culture = irish
				AND = {
					culture_group = gaelic
					any_owned_province = { region = ireland_area }
				}
			}
			OR = {
				has_reform = irish_clann_legacy
				has_reform = norman_lordship_legacy
			}
			any_owned_province = { area = connacht_area }
		}
		provinces_to_highlight = {
			area = connacht_area
			
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			connacht_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			NOT = { current_age = age_of_discovery }
			is_at_war = no
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = CNN
			set_legacy_government = provincial_kingdom_legacy
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25	
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_connacht_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}
	
	
# Ulster  
	
	ir_ulster_nation = {
		major = yes
		potential = {
			NOT = { tag = CNN }
			NOT = { tag = MNS }
			NOT = { tag = LEI }
			NOT = { tag = ULS }
			ULS = { exists = no }
			IRE = { exists = no }
			NOT = { has_country_flag = formed_ulster_flag }
			capital_scope = { region = ireland_area }
			OR = {
				primary_culture = irish
				AND = {
					culture_group = gaelic
					any_owned_province = { region = ireland_area }
				}
			}
			OR = {
				has_reform = irish_clann_legacy
				has_reform = norman_lordship_legacy
			}
			any_owned_province = { area = ulster_area }
		}
		provinces_to_highlight = {
			area = ulster_area
			
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			ulster_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			NOT = { current_age = age_of_discovery }
			is_at_war = no
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = ULS
			set_legacy_government = provincial_kingdom_legacy
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25	
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_ulster_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}



# Leinster  
	
	ir_leinster_nation = {
		major = yes
		potential = {
			NOT = { tag = CNN }
			NOT = { tag = MNS }
			NOT = { tag = LEI }
			NOT = { tag = ULS }
			LEI = { exists = no }
			IRE = { exists = no }
			NOT = { has_country_flag = formed_leinster_flag }
			capital_scope = { region = ireland_area }
			OR = {
				primary_culture = irish
				AND = {
					culture_group = gaelic
					any_owned_province = { region = ireland_area }
				}
			}
			OR = {
				has_reform = irish_clann_legacy
				has_reform = norman_lordship_legacy
			}
			any_owned_province = { area = leinster_area }
		}
		provinces_to_highlight = {
			area = leinster_area
			
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			leinster_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			NOT = { current_age = age_of_discovery }
			is_at_war = no
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = LEI
			set_legacy_government = provincial_kingdom_legacy
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25	
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_leinster_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

# Munster  
	
	ir_munster_nation = {
		major = yes
		potential = {
			NOT = { tag = CNN }
			NOT = { tag = MNS }
			NOT = { tag = LEI }
			NOT = { tag = ULS }
			MNS = { exists = no }
			IRE = { exists = no }
			NOT = { has_country_flag = formed_munsterire_flag }
			capital_scope = { region = ireland_area }
			OR = {
				primary_culture = irish
				AND = {
					culture_group = gaelic
					any_owned_province = { region = ireland_area }
				}
			}
			OR = {
				has_reform = irish_clann_legacy
				has_reform = norman_lordship_legacy
			}
			any_owned_province = { area = munster_area }
		}
		provinces_to_highlight = {
			area = munster_area
			
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			munster_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			NOT = { current_age = age_of_discovery }
			is_at_war = no
		}
		effect = {
			change_tag = MNS
			set_legacy_government = provincial_kingdom_legacy
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25	
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_munsterire_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}


# Angevinia  
	
	ir_angevinia_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_angevinia_flag }
			#NOT = { tag = GBR }
			NOT = { tag = AGV }
			NOT = { tag = UNK }
			#NOT = { tag = AFU }
			NOT = { capital_scope = { region = ireland_area } }
			capital_scope = { region = british_isles_region }
			#GBR = { exists = no }
			AGV = { exists = no }
			UNK = { exists = no }
			#AFU = { exists = no }
			is_nomad = no
			primary_culture = english	
		}
		provinces_to_highlight = {
			OR = {
				area = home_counties_area
				area = wessex_area
				area = east_midlands_area
				area = west_midlands_area
				area = east_anglia_area
				area = yorkshire_area
				area = ile_de_france_area
				area = poitou_area	
				area = normandy_area
				area = pyrenees_area
				area = brittany_area
				area = guyenne_area
				area = loire_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			home_counties_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			wessex_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			east_midlands_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			west_midlands_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			east_anglia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			yorkshire_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			ile_de_france_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			poitou_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			pyrenees_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			normandy_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			brittany_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			guyenne_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			loire_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			if = {
				limit = { FRA = { junior_union_with = ROOT } }
				FRA = { NOT = { num_of_cities = 50 } } 
			}
			if = {
				limit = { SCO = { junior_union_with = ROOT } }
				SCO = { NOT = { num_of_cities = 24 } } 
			}
			
			NOT = { current_age = age_of_discovery }
			is_at_war = no
		#	total_development = 300			
		}
		effect = {
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { FRA = { junior_union_with = ROOT NOT = { num_of_cities = 50 } } }
				hidden_effect = {
					every_subject_country = {
						limit = { has_reform = french_principality is_subject_of_type = fief NOT = { num_of_cities = 9 } }
						every_owned_province = {
							add_core = FRA
							cede_province = FRA
						}
					}
				}
				inherit = FRA
			}
			if = {
				limit = { SCO = { junior_union_with = ROOT NOT = { num_of_cities = 24 } } }
				inherit = SCO
			}
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = AGV
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_angevinia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

	
	

# 	France	 
	ir_france_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_france_flag }
			NOT = { tag = FRA }
			NOT = { tag = AGV }
			#NOT = { tag = AFU }
			NOT = { tag = ENG }
			NOT = { tag = GBR }
			NOT = { tag = CEL }
			NOT = { tag = SPA }
			capital_scope = { region = france_region }
			FRA = { exists = no }
			AGV = { exists = no }
			#AFU = { exists = no }
			is_nomad = no
			OR = {
				culture_group = french
				primary_culture = breton
			}
		}
		provinces_to_highlight = {
			OR = {
				area = ile_de_france_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			ile_de_france_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			is_at_war = no
		#	total_development = 300			
		}
		effect = {
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = FRA
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = FRA_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_france_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

# 	Netherlands			
	ir_netherlands_nation = {
		major = yes
		potential = {
		 	NOT = { has_country_flag = formed_netherlands_flag }
			capital_scope = { region = low_countries_region }
			NOT = { tag = PAP }
			NOT = { tag = HLR }
			NOT = { tag = BEL }
			NOT = { tag = NED }
			NED = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = dutch
				primary_culture = wallonian
				primary_culture = flemish
				primary_culture = frisian
				#primary_culture = meuse_rhenish #kleves, limburg and gelre culture, not sure if they all should form the Netherlands
				tag = GEL 
				AND = {
					tag = BUR
					ai = no	
				}
			}
		}
		provinces_to_highlight = {
			OR = {
				area = netherlands_area
				province_id = 100
			
			#AND = {
			#		area = guelders_area
			#		ROOT = { NOT = { brabant_area = {
			#						type = all
			#						country_or_non_sovereign_subject_holds = ROOT }
			#						country_or_non_sovereign_subject_holds = 90
			#						country_or_non_sovereign_subject_holds = 1865 } }
			#   }
            #AND = {
			#		area = brabant_area
			#		province_id = 90
			#		province_id = 1865
			#       ROOT = { NOT = { guelders_area = {
			#						type = all
			#						country_or_non_sovereign_subject_holds = ROOT } } }
			#	}
			#temp fix below, need some help with the above
				area = guelders_area
				area = brabant_area
				province_id = 90
				province_id = 1865
			#AND = { province_id = 41 
				#ROOT = { NOT = { owns_core_province = 75 } }
                #}
				#AND = {	area = brabant_area
				#	ROOT = { NOT = { owns_core_province = 99 } }
				#	}
				#AND = {
				#	area = guelders_area
                #	ROOT = { NOT = { if = {
				#	brabant_area = {
				#	limit = { owned_by = ROOT } }
				#	}	}	}
                #}
				#AND = {
                #    area = brabant_area
				#	ROOT = { NOT = { if = {
				#	guelders_area = {
				#	limit = { owned_by = ROOT } }
				#	}	}	}
                #}
				#AND = {
                #   province_id = 90
				#	#province_id = 1865
				#	ROOT = { NOT = { if = {
				#	guelders_area = {
				#	limit = { owned_by = ROOT } }
				#	}	}	}
                #}
			}
			
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			}
		
		allow = {
			netherlands_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT	
			}
			100 = { country_or_non_sovereign_subject_holds = ROOT } #Friesland
			OR = {
				guelders_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT	
				}
				AND = { 
				90 = { country_or_non_sovereign_subject_holds = ROOT } #Brugge
				1865 = { country_or_non_sovereign_subject_holds = ROOT } #Brugge
				brabant_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT	
				}
				}
				
			}
			is_at_war = no
			NOT = { current_age = age_of_discovery } 	
			#total_development = 150
			#prestige = 25		
		}
		effect = {
			#special burgundy leaving for now, though Burgundy doesn't have the option ^^
			if = {
	  			limit = { tag = BUR }
	  			change_primary_culture = dutch
			}
			if = {
				limit = {
					tag = BUR
					exists = FRA
				}
	  			france_region = {
					limit = { owned_by = BUR }
	  				remove_core = BUR
	  				add_core = FRA
	  				cede_province = FRA
	  			}
	  		}
			if = {
				limit = {
					tag = BUR
					exists = FRA
					BUR = { any_subject_country = { france_region = { owned_by = PREV } } }
				}
				every_subject_country = {
					limit = { france_region = { owned_by = PREV } }
					france_region = {
						limit = { owned_by = PREV }
						remove_core = BUR
						remove_core = PREV
						add_core = FRA
						cede_province = FRA
					}
				}
	  		}
			change_tag = NED
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
	  		# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = NED_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_netherlands_flag
		}
		ai_will_do = {
			factor = 1	
		}
		ai_importance = 400 #
	}
	
# 	Westphalia	 
	ir_westphalia_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_westphalia_flag }
			NOT = { tag = WES }
			NOT = { tag = GER }
			NOT = { tag = NGC }
			NOT = { tag = SGC }
			NOT = { tag = PRU }
			NOT = { tag = DNC }
			NOT = { tag = DPU }
			NOT = { tag = HSA }
			NOT = { tag = SWB }
			NOT = { tag = FNC }
			NOT = { tag = RHN }
			NOT = { tag = HAN }
			NOT = { tag = SWI }
			NOT = { tag = POM }
			NOT = { tag = HAB }
			WES = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = hannoverian #Westphalian
			}
		}
		provinces_to_highlight = {
			OR = {
				area = westphalia_area
				area = muenster_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			westphalia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			muenster_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = WES
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = WES_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_westphalia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}
	
	# 	Hannover	 
	ir_hannover_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_hannover_flag }
			NOT = { tag = WES }
			NOT = { tag = GER }
			NOT = { tag = NGC }
			NOT = { tag = SGC }
			NOT = { tag = PRU }
			NOT = { tag = DNC }
			NOT = { tag = DPU }
			NOT = { tag = HSA }
			NOT = { tag = SWB }
			NOT = { tag = FNC }
			NOT = { tag = RHN }
			NOT = { tag = HAN }
			NOT = { tag = SWI }
			NOT = { tag = POM }
			NOT = { tag = HAB }
			HAN = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = hannoverian #Westphalian
			}
		}
		provinces_to_highlight = {
			OR = {
				area = lower_saxony_area
				area = weser_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			lower_saxony_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			weser_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = HAN
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = HAN_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_hannover_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}
	
# 	Pomerania	 
	ir_pomerania_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_pommerania_flag }
			NOT = { tag = WES }
			NOT = { tag = GER }
			NOT = { tag = NGC }
			NOT = { tag = SGC }
			NOT = { tag = PRU }
			NOT = { tag = DNC }
			NOT = { tag = DPU }
			NOT = { tag = HSA }
			NOT = { tag = SWB }
			NOT = { tag = FNC }
			NOT = { tag = RHN }
			NOT = { tag = HAN }
			NOT = { tag = SWI }
			NOT = { tag = POM }
			NOT = { tag = HAB }
			POM = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = pommeranian
			}
		}
		provinces_to_highlight = {
			OR = {
				area = hinter_pommern_area
				area = vorpommern_area
				area = mecklenburg_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			hinter_pommern_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			vorpommern_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			mecklenburg_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = POM
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = POM_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_pommerania_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

# 	Rheinland	 
	ir_rheinland_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_rheinland_flag }
			NOT = { tag = WES }
			NOT = { tag = GER }
			NOT = { tag = NGC }
			NOT = { tag = SGC }
			NOT = { tag = PRU }
			NOT = { tag = DNC }
			NOT = { tag = DPU }
			NOT = { tag = HSA }
			NOT = { tag = SWB }
			NOT = { tag = FNC }
			NOT = { tag = RHN }
			NOT = { tag = HAN }
			NOT = { tag = SWI }
			NOT = { tag = POM }
			NOT = { tag = HAB }
			RHN = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = hessian
			}
		}
		provinces_to_highlight = {
			OR = {
				area = lower_rhineland_area
				area = hesse_area
				area = north_rhine_area
				area = palatinate_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			lower_rhineland_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			hesse_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			north_rhine_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			palatinate_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = RHN
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = RHN_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_rheinland_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

# 	Franconia	 
	ir_franconia_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_franconia_flag }
			NOT = { tag = WES }
			NOT = { tag = GER }
			NOT = { tag = NGC }
			NOT = { tag = SGC }
			NOT = { tag = PRU }
			NOT = { tag = DNC }
			NOT = { tag = DPU }
			NOT = { tag = HSA }
			NOT = { tag = SWB }
			NOT = { tag = FNC }
			NOT = { tag = RHN }
			NOT = { tag = HAN }
			NOT = { tag = SWI }
			NOT = { tag = POM }
			NOT = { tag = HAB }
			FNC = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = franconian
			}
		}
		provinces_to_highlight = {
			OR = {
				province_id = 71
				area = franconia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			71 = { country_or_non_sovereign_subject_holds = ROOT }
			franconia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = FNC
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = FNC_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_franconia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}
	
 #	swabia	 
	ir_swabia_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_swabia_flag }
			NOT = { tag = WES }
			NOT = { tag = GER }
			NOT = { tag = NGC }
			NOT = { tag = SGC }
			NOT = { tag = PRU }
			NOT = { tag = DNC }
			NOT = { tag = DPU }
			NOT = { tag = HSA }
			NOT = { tag = SWB }
			NOT = { tag = FNC }
			NOT = { tag = RHN }
			NOT = { tag = HAN }
			NOT = { tag = SWI }
			NOT = { tag = POM }
			NOT = { tag = SWB }
			SWB = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = swabian
			}
		}
		provinces_to_highlight = {
			OR = {
				area = lower_swabia_area
				area = upper_swabia_area
				province_id = 72
				province_id = 74
				province_id = 70
				province_id = 1872
				province_id = 3204
				province_id = 3206
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			72 = { country_or_non_sovereign_subject_holds = ROOT }
			74 = { country_or_non_sovereign_subject_holds = ROOT }
			70 = { country_or_non_sovereign_subject_holds = ROOT }
			1872 = { country_or_non_sovereign_subject_holds = ROOT }
			3204 = { country_or_non_sovereign_subject_holds = ROOT }
			3206 = { country_or_non_sovereign_subject_holds = ROOT }
			lower_swabia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			upper_swabia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = SWB
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = SWB_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_swabia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}	
	
# 	Prussia - Brandenburg inherit of Ducal Prussia
	ir_prussia_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_prussia_flag }
			tag = BRA
			PRU = { exists = no }
			NGC = { exists = no }
			GER = { exists = no }
			is_nomad = no
		}
		provinces_to_highlight = {
			OR = {
				area = mittelmark_area
				area = hinter_pommern_area
				area = east_prussia_area
				province_id = 50
				province_id = 2969
				province_id = 49
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			
		}
		allow = {
			mittelmark_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			hinter_pommern_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			east_prussia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			50 = { country_or_non_sovereign_subject_holds = ROOT }
			2969 = { country_or_non_sovereign_subject_holds = ROOT }
			49 = { country_or_non_sovereign_subject_holds = ROOT }
			if = {
				limit = { DPU = { junior_union_with = ROOT } }
				DPU = { NOT = { num_of_cities = 10 } } 
			}
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			if = {
				limit = { DPU = { junior_union_with = ROOT NOT = { num_of_cities = 10 } } }
				inherit = DPU
			}
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = PRU
			if = {
				limit = { has_dlc = "Rights of Man" }
				set_legacy_government = prussian_monarchy_legacy
			}
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			#special culture change
			change_primary_culture = prussian
			PRU = {
				every_owned_province = {
					limit = { 
						OR = {
							culture = saxon
							culture = pommeranian
						}
					} 
					change_culture = prussian
				}
			}	
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = PRU_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_prussia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

# 	Duchy of Prussia - Teutonic reform
	ir_duchy_prussia_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_duchyprussia_flag }
			tag = TEU
			PRU = { exists = no }
			DPU = { exists = no }
			NGC = { exists = no }
			GER = { exists = no }
			is_nomad = no
		}
		provinces_to_highlight = {
			OR = {
				area = east_prussia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			
		}
		allow = {
			east_prussia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = DPU
			if = {
				limit = { has_dlc = "Rights of Man" }
				set_legacy_government = prussian_monarchy_legacy
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			#prussia duchy improve relations
			every_neighbor_country = {
				limit = { government = monarchy }
				add_opinion = { who = ROOT modifier = secularized_monastic_order }
			}	
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = PRU_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_prussia_flag
		}
		ai_will_do = {
			factor = 1
			modifier = { 
				factor = 0
				NOT = { is_year = 1525 }
			}
		}
		ai_importance = 400 #
	}
	
	
#	serenissima	 
	ir_serenissima_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_serenissima_flag }
			NOT = { tag = SNS }
			NOT = { tag = ITA }
			NOT = { tag = LMB }
			NOT = { tag = TUS }
			NOT = { tag = HAB }
			NOT = { tag = LGA }
			NOT = { tag = PAP }
			NOT = { tag = EMR }
			NOT = { tag = PIE }
			NOT = { tag = SPI }
			NOT = { tag = TSI }
			NOT = { tag = HUN }
			NOT = { tag = SWI }
			SNS = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = venetian
			}
		}
		provinces_to_highlight = {
			OR = {
				area = venetia_area
				area = lombardy_area
				area = emilia_romagna_area
				area = carinthia_area
				area = emilia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			venetia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			lombardy_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			emilia_romagna_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			carinthia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			emilia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = SNS
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = SNS_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_serenissima_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}
	
#	lombardy	 
	ir_lombardy_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_lombardy_flag }
			NOT = { tag = SNS }
			NOT = { tag = ITA }
			NOT = { tag = LMB }
			NOT = { tag = TUS }
			NOT = { tag = HAB }
			NOT = { tag = LGA }
			NOT = { tag = PAP }
			NOT = { tag = EMR }
			NOT = { tag = PIE }
			NOT = { tag = SPI }
			NOT = { tag = TSI }
			NOT = { tag = HUN }
			NOT = { tag = SWI }
			LMB = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = lombard
			}
		}
		provinces_to_highlight = {
			OR = {
				area = lombardy_area
				area = emilia_romagna_area
				area = emilia_area
				province_id = 2979
				province_id = 2981
				province_id = 3041
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			lombardy_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			emilia_romagna_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			emilia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			2979 = { country_or_non_sovereign_subject_holds = ROOT }
			2981 = { country_or_non_sovereign_subject_holds = ROOT }
			3041 = { country_or_non_sovereign_subject_holds = ROOT }
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = LMB
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = LMB_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_lombardy_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

#	tuscany	 
	ir_tuscany_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_tuscany_flag }
			NOT = { tag = SNS }
			NOT = { tag = ITA }
			NOT = { tag = LMB }
			NOT = { tag = TUS }
			NOT = { tag = HAB }
			NOT = { tag = LGA }
			NOT = { tag = PAP }
			NOT = { tag = EMR }
			NOT = { tag = PIE }
			NOT = { tag = SPI }
			NOT = { tag = TSI }
			NOT = { tag = HUN }
			NOT = { tag = SWI }
			TUS = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = tuscan
			}
		}
		provinces_to_highlight = {
			OR = {
				area = tuscany_area
				province_id = 3042
				province_id = 3041
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			tuscany_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			3042 = { country_or_non_sovereign_subject_holds = ROOT }
			3041 = { country_or_non_sovereign_subject_holds = ROOT }
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = TUS
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = TUS_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_serenissima_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}	
	
#	liguria	 
	ir_liguria_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_liguria_flag }
			NOT = { tag = SNS }
			NOT = { tag = ITA }
			NOT = { tag = LMB }
			NOT = { tag = TUS }
			NOT = { tag = HAB }
			NOT = { tag = LGA }
			NOT = { tag = PAP }
			NOT = { tag = EMR }
			NOT = { tag = PIE }
			NOT = { tag = SPI }
			NOT = { tag = TSI }
			NOT = { tag = HUN }
			NOT = { tag = SWI }
			LGA = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = ligurian
			}
		}
		provinces_to_highlight = {
			OR = {
				area = liguria_area
				area = corsica_sardinia_area
				province_id = 1875
				province_id = 2981
				province_id = 3043
				province_id = 105
				province_id = 2980
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			liguria_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			corsica_sardinia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			1875 = { country_or_non_sovereign_subject_holds = ROOT }
			2981 = { country_or_non_sovereign_subject_holds = ROOT }
			3043 = { country_or_non_sovereign_subject_holds = ROOT }
			105 = { country_or_non_sovereign_subject_holds = ROOT }
			2980 = { country_or_non_sovereign_subject_holds = ROOT }
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = LGA
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = LGA_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_liguria_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}	
	
#	Emilia	 
	ir_emilia_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_emilia_flag }
			NOT = { tag = SNS }
			NOT = { tag = ITA }
			NOT = { tag = LMB }
			NOT = { tag = TUS }
			NOT = { tag = HAB }
			NOT = { tag = LGA }
			NOT = { tag = PAP }
			NOT = { tag = EMR }
			NOT = { tag = PIE }
			NOT = { tag = SPI }
			NOT = { tag = TSI }
			NOT = { tag = HUN }
			NOT = { tag = SWI }
			EMR = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = romagnan
			}
		}
		provinces_to_highlight = {
			OR = {
				area = emilia_romagna_area
				area = emilia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			emilia_romagna_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			emilia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = EMR
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = EMR_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_emilia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}	
	
#	Piedmont	 
	ir_piedmont_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_sardinia_piedmont_flag }
			NOT = { tag = SNS }
			NOT = { tag = ITA }
			NOT = { tag = LMB }
			NOT = { tag = TUS }
			NOT = { tag = HAB }
			NOT = { tag = LGA }
			NOT = { tag = PAP }
			NOT = { tag = EMR }
			NOT = { tag = PIE }
			NOT = { tag = SPI }
			NOT = { tag = TSI }
			NOT = { tag = HUN }
			NOT = { tag = SWI }
			PIE = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = piedmontese
			}
		}
		provinces_to_highlight = {
			OR = {
				area = piedmont_area
				province_id = 101
				province_id = 102
				province_id = 2992
				province_id = 3043
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			piedmont_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			3043 = { country_or_non_sovereign_subject_holds = ROOT }
			101 = { country_or_non_sovereign_subject_holds = ROOT }
			102 = { country_or_non_sovereign_subject_holds = ROOT }
			2992 = { country_or_non_sovereign_subject_holds = ROOT }
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = PIE
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = PIE_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_piedmont_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}	
	
	# sardinia-	Piedmont	 
	ir_sardinia_piedmont_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_sardinia_piedmont_flag }
			NOT = { tag = SNS }
			NOT = { tag = ITA }
			NOT = { tag = LMB }
			NOT = { tag = TUS }
			NOT = { tag = HAB }
			NOT = { tag = LGA }
			NOT = { tag = PAP }
			NOT = { tag = EMR }
			NOT = { tag = PIE }
			NOT = { tag = SPI }
			NOT = { tag = TSI }
			NOT = { tag = HUN }
			NOT = { tag = SWI }
			SPI = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = piedmontese
				primary_culture = sardinian
			}
		}
		provinces_to_highlight = {
			OR = {
				area = piedmont_area
				area = sardinia_area
				province_id = 3043
				province_id = 101
				province_id = 102
				province_id = 2992
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			piedmont_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			sardinia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			3043 = { country_or_non_sovereign_subject_holds = ROOT }
			101 = { country_or_non_sovereign_subject_holds = ROOT }
			102 = { country_or_non_sovereign_subject_holds = ROOT }
			2992 = { country_or_non_sovereign_subject_holds = ROOT }
			is_at_war = no
			OR = {
				NOT = { current_age = age_of_discovery }
				NOT = { current_age = age_of_reformation }
			}
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = SPI
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = SPI_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_sardinia_piedmont_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}	
	
# two sicilies
	ir_twosicilies_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_twosicilies_flag }
			NOT = { tag = SNS }
			NOT = { tag = ITA }
			NOT = { tag = LMB }
			NOT = { tag = TUS }
			NOT = { tag = HAB }
			NOT = { tag = LGA }
			NOT = { tag = PAP }
			NOT = { tag = EMR }
			NOT = { tag = PIE }
			NOT = { tag = SPI }
			NOT = { tag = TSI }
			NOT = { tag = HUN }
			NOT = { tag = SWI }
			TSI = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = neapolitan
				primary_culture = sicilian
			}
		}
		provinces_to_highlight = {
			OR = {
				area = naples_area
				area = apulia_area
				area = calabria_area
				area = sicily_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			naples_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			apulia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			calabria_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			sicily_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			is_at_war = no
			NOT = { current_age = age_of_discovery }
		}
		effect = {
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = TSI
			if = {
				limit = { NOT = { government_rank = 2 } is_part_of_hre = no }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = TSI_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_twosicilies_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}	
	
# lotharingia (burgundy formable)
# potential reworking possibility for nations such as Savoy, Provence and Brabant nations, cultures: Arpitan, Walloon, Lorrainian/Burgundian
	
	ir_lotharingia_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_lotharingia_flag }
			NOT = { tag = LTH }
			NOT = { tag = FRA }
			NOT = { tag = HAB }
			NOT = { tag = NED }
			LTH = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = burgundian
				primary_culture = wallonian #new
				primary_culture = arpitan #new
				tag = BUR
				tag = BRB
			}
			NOT = { religion_group = muslim } #Frankish fought off Muslims			
		}
		provinces_to_highlight = {
			OR = {
				#area = lorraine_area area = romandie_area 	area = upper_rhineland_area area = lower_rhineland_area area = luxemburg_liege_area
				#area = brabant_area area = guelders_area #	area = netherlands_area #area = frisia_area
				#province_id = 1761 #Pfalz	province_id = 2975 #Kleves	province_id = 85 #Koln	province_id = 84 #Berg	#province_id = 3199	#province_id = 3046 #Genevois province_id = 205 #Savoie province_id = 1878 #Aachen
				#Reworking areas for the new areas I added
				area = lorraine_area
				area = lower_rhineland_area #trier
				area = luxemburg_liege_area #liege
				area = brabant_area
				area = guelders_area
				area = netherlands_area #holland
				area = frisia_area
				area = wallonia_area
				area = limburg_area
				area = koln_area
				area = luxembourg_area
				area = alsace_area
				area = verdun_area
				province_id = 84 #berg
				province_id = 2975 #cleves
				province_id = 3198 #saarbrucken
				#wallonia_area	flanders_area 	brabant_area	netherlands_area	frisia_area		luxemburg_liege_area	guelders_area 	limburg_area	luxembourg_area		artesia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			lorraine_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			lower_rhineland_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			luxemburg_liege_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			brabant_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			guelders_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			netherlands_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			frisia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			wallonia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			limburg_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			koln_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			luxembourg_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			alsace_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			verdun_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			2975 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			84 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			3198 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			if = {
				limit = { BRB = { junior_union_with = ROOT } }
				BRB = { NOT = { num_of_cities = 7 } } 
			}
			if = {
				limit = { HOL = { junior_union_with = ROOT } }
				HOL = { NOT = { num_of_cities = 7 } } 
			}
			if = {
				limit = { FLA = { junior_union_with = ROOT } }
				FLA = { NOT = { num_of_cities = 7 } } 
			}
			NOT = { current_age = age_of_discovery }
			is_at_war = no	
		}
		effect = {
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { BRB = { junior_union_with = ROOT NOT = { num_of_cities = 7 } } }
				inherit = BRB
			}
			if = {
				limit = { HOL = { junior_union_with = ROOT NOT = { num_of_cities = 7 } } }
				inherit = HOL
			}
			if = {
				limit = { FLA = { junior_union_with = ROOT NOT = { num_of_cities = 7 } } }
				inherit = FLA
			}
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = LTH
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = LOT_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_lotharingia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}
	
#poland reformable
	ir_poland_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_poland_flag }
			NOT = { tag = PLC }
			NOT = { tag = POL }
			NOT = { tag = LIT }
			NOT = { tag = TEU }
			NOT = { tag = DPR }
			NOT = { tag = PRU }
			NOT = { tag = MOS }
			NOT = { tag = RUS }
			capital_scope = { region = poland_region }
			PLC = { exists = no }
			POL = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = polish
				primary_culture = schlesian
				tag = DNZ
			}
		}
		provinces_to_highlight = {
			OR = {
				area = malopolska_area
				area = sandomierz_area
				area = kalisz_area
				area = wielkopolska_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			malopolska_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			sandomierz_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			kalisz_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			wielkopolska_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			is_at_war = no		
		}
		effect = {
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = POL
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = POL_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_poland_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}
	
# PLC
	ir_plc_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_plc_flag }
			NOT = { tag = PLC }
			NOT = { tag = TEU }
			NOT = { tag = DPR }
			NOT = { tag = PRU }
			NOT = { tag = MOS }
			NOT = { tag = RUS }
			capital_scope = { region = poland_region }
			PLC = { exists = no }
			is_nomad = no
			OR = {
				primary_culture = polish
				primary_culture = lithuanian
				primary_culture = schlesian
			}
		}
		provinces_to_highlight = {
			OR = {
				area = malopolska_area
				area = sandomierz_area
				area = kalisz_area
				area = wielkopolska_area
				area = mazovia_area
				area = samogitia_area
				area = lithuania_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			malopolska_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			sandomierz_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			kalisz_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			wielkopolska_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			mazovia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			samogitia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			lithuania_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			if = {
				limit = { LIT = { junior_union_with = ROOT } }
				LIT = { 
					NOT = { num_of_cities = 70 } 
					has_opinion = {
						who = ROOT
						value = 200
					}
				} 
			}
			if = {
				limit = { POL = { junior_union_with = ROOT } }
				POL = { 
					NOT = { num_of_cities = 40 } 
					has_opinion = {
						who = ROOT
						value = 200
					}
				} 
			}
			NOT = { current_age = age_of_discovery }
			is_at_war = no
		}
		effect = {
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { LIT = { junior_union_with = ROOT NOT = { num_of_cities = 70 } } }
				inherit = LIT
			}
			if = {
				limit = { POL = { junior_union_with = ROOT NOT = { num_of_cities = 40 } } }
				inherit = POL
			}
			# integrate fiefs
			custom_tooltip = integrate_fiefs.tooltip
			hidden_effect = {
				every_subject_country = {
					limit = { is_subject_of = ROOT is_subject_of_type = fief NOT = { num_of_cities = 9 } }
					every_owned_province = {
						add_core = ROOT
						cede_province = ROOT
					}
				}
			}
			change_tag = PLC
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = PLC_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			hidden_effect = {
				272 = {
					add_province_modifier = {
						name = "pol_sejm"
						duration = -1
					}
				}
				1936 = {
					add_province_modifier = {
						name = "pol_sejm"
						duration = -1
					}
				}
			}
			if = {
				limit = { BLV = { exists = yes is_subject_of = LIT } }
				create_subject = {
					subject_type = dominion
					subject = BLV
				}
			}
			if = {
				limit = { OKA = { exists = yes is_subject_of = LIT } }
				create_subject = {
					subject_type = dominion
					subject = OKA
				}
			}
			if = {
				limit = { MSL = { exists = yes is_subject_of = LIT } }
				create_subject = {
					subject_type = dominion
					subject = MSL
				}
			}
			if = {
				limit = { VTN = { exists = yes is_subject_of = LIT } }
				create_subject = {
					subject_type = dominion
					subject = VTN
				}
			}
			set_country_flag = formed_plc_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}
	
#### amyzonis end rework

# 	Algeria	 
	algiers_nation = {
		major = yes
		potential = {
			 
			NOT = { has_country_flag = formed_algiers_flag }
			NOT = { tag = MOR }
			NOT = { tag = TUN }
			NOT = { tag = TLC }
			NOT = { tag = ALG }
			NOT = { tag = TRP }
			NOT = { tag = OTN }
			OR = {
				primary_culture = tunisian
				AND = {
					OR = {
						culture_group = turko_semitic
						culture_group = berber_group
					}
					OR = {
						capital_scope = { area = algiers_area }
						capital_scope = { area = hautes_plaines_area }
						capital_scope = { area = ouled_nail_area }
						capital_scope = { area = kabylia_area }
						capital_scope = { area = north_saharan_area }
						capital_scope = { area = west_aures_area }
						capital_scope = { area = constantine_area }
						capital_scope = { area = barbary_coast_area }
					}
				}
			}
			any_owned_province = {
				OR = {
					area = algiers_area
					area = hautes_plaines_area
					area = ouled_nail_area
					area = kabylia_area
					area = north_saharan_area
					area = west_aures_area
					area = constantine_area
					area = barbary_coast_area
				}
			}
		}
		provinces_to_highlight = {
			OR = {
				area = algiers_area
				area = hautes_plaines_area
				area = ouled_nail_area
				area = kabylia_area
				area = north_saharan_area
				area = west_aures_area
				area = constantine_area
				area = barbary_coast_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = ALG }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 338			# Algiers
			calc_true_if = {
				all_owned_province = {
					is_core = ROOT
					OR = {
						area = algiers_area
						area = hautes_plaines_area
						area = ouled_nail_area
						area = kabylia_area
						area = north_saharan_area
						area = west_aures_area
						area = constantine_area
						area = barbary_coast_area
					}
				}
				amount = 19			#At least 2/3 of Algeria's 28 provinces
			}
			total_development = 150			#Normal requirement for rank 2 is 300 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = ALG
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			algiers_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = ALG
			}
			north_saharan_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = ALG
			}
			hautes_plaines_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = ALG
			}
			ouled_nail_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = ALG
			}
			kabylia_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = ALG
			}
			west_aures_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = ALG
			}
			constantine_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = ALG
			}
			barbary_coast_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = ALG
			}
			if = {
				limit = {
					OR = {
						has_reform = tribal_kingdom
						has_reform = tribal_despotism
						has_reform = tribal_federation
						has_reform = tribal_democracy_legacy
					}
				}
				set_legacy_government = despotic_monarchy #Desert tribes settling down, theocracies become monarchies.
			}
			add_prestige = 25
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_algiers_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	
# 	Arabia	 
	arab_nation = {
		major = yes
		potential = {
			 
			NOT = { has_country_flag = formed_arabia_flag }
			NOT = { tag = ARB }
			culture_group = turko_semitic
			any_owned_province = { region = arabia_region }
		}
		provinces_to_highlight = {
			region = arabia_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = ARB }
			is_free_or_tributary_trigger = yes
			is_at_war = no
			owns_core_province = 384			#Medina
			owns_core_province = 385			#Mecca
			calc_true_if = {
				all_owned_province = {
					is_core = ROOT
					region = arabia_region
				}
				amount = 50			#At least 2/3 of Arabia's 74 provinces
			}
			total_development = 150			#Normal requirement for rank 2 is 300 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = ARB
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			arabia_region = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ARB
			}
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = arabian_ideas }
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_arabia_flag
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { capital_scope = { region = arabia_region } }			#Capital not in Iberia
			}
		}
		ai_importance = 400 #
	}

# 	Greece	 
	greek_nation = {
		major = yes
		potential = {
			 
			NOT = { has_country_flag = formed_greece_flag }
			NOT = { tag = GRE }
			NOT = { tag = BYZ }
			NOT = { tag = TUR }
			primary_culture = greek
		}
		provinces_to_highlight = {
			OR = {
				province_id = 144
				province_id = 145
				province_id = 146
				province_id = 164
				province_id = 1773
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = GRE }
			is_nomad = no
			is_free_or_tributary_trigger = yes
			is_at_war = no
			owns_core_province = 144
			owns_core_province = 145
			owns_core_province = 146
			owns_core_province = 164
			owns_core_province = 1773
			total_development = 150			#Normal requirement for rank 2 is 300 dev, so this is 50 percent discounted.
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = GRE
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					NOT = {
						capital_scope = { area = morea_area }
						capital_scope = { area = northern_greece_area }
						capital_scope = { area = macedonia_area }
					}
				}
				set_capital = 146
			}
			western_aegean_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { province_id = 143 }
				}
				add_permanent_claim = GRE
			}
			northern_greece_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { province_id = 143 }
				}
				add_permanent_claim = GRE
			}
			morea_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { province_id = 143 }
				}
				add_permanent_claim = GRE
			}
			macedonia_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { province_id = 143 }
				}
				add_permanent_claim = GRE
			}
			if = {
				limit = {
					NOT = { has_idea_group = greek_ideas } 
					is_playing_custom_nation = no
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_greece_flag
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				government = republic
			}
		}
		ai_importance = 400 #
	}

# 	Italy	 
	italian_nation = {
		major = yes
		potential = {
			NOT = { has_country_flag = formed_italy_flag }
			NOT = { tag = ITL }
			NOT = { tag = ITA }
			culture_group = latin
		}
		provinces_to_highlight = {
			region = italy_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = ITL }
			hidden_trigger  = { NOT = { exists = ITA } }
			is_nomad = no
			is_free_or_tributary_trigger = yes
			is_at_war = no
			owns_core_province = 101	# Genoa
			owns_core_province = 104	# Milan
			owns_core_province = 112	# Venice
			owns_core_province = 116	# Florence
			calc_true_if = {
				all_owned_province = {
					is_core = ROOT
					region = italy_region
				}
				amount = 35			#At least 90 percent of N Italy's 38 provinces (Italy total has another 22 in Naples and the islands, so 35 is about 60 percent of total)
			}
			total_development = 150			#Normal requirement for rank 2 is 300 dev, so this is 50 percent discounted.
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = ITL
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			italy_region = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { owned_by = PAP }
					NOT = { area = naples_area }
					NOT = { area = calabria_area }
					NOT = { area = apulia_area }
					NOT = { area = sicily_area }
				}
				add_permanent_claim = ITL
			}
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_italy_flag
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				government = republic
			}
		}
		ai_importance = 400 #
	}

# 	Tripolitania	 
	tripoli_nation = {
		major = yes
		potential = {
			 
			NOT = { has_country_flag = formed_tripoli_flag }
			NOT = { tag = MOR }
			NOT = { tag = TUN }
			NOT = { tag = TLC }
			NOT = { tag = ALG }
			NOT = { tag = TRP }
			NOT = { tag = OTN }
			OR = {
				primary_culture = tunisian
				AND = {
					OR = {
						culture_group = turko_semitic
						culture_group = berber_group
					}
					OR = {
						capital_scope = { area = tripolitania_area }
						capital_scope = { area = fezzan_area }
						capital_scope = { area = cyrenaica_area }
						capital_scope = { area = nafusa_mountains_area }
					}
				}
			}
			any_owned_province = {
				OR = {
					area = tripolitania_area
					area = fezzan_area
					area = cyrenaica_area
					area = nafusa_mountains_area
				}
			}
		}
		provinces_to_highlight = {
			OR = {
				area = tripolitania_area
				area = fezzan_area
				area = cyrenaica_area
				area = nafusa_mountains_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = TRP }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 354 #Tripoli
			calc_true_if = {
				all_owned_province = {
					is_core = ROOT
					OR = {
						area = tripolitania_area
						area = fezzan_area
						area = cyrenaica_area
						area = nafusa_mountains_area
					}
				}
				amount = 13			#At least 2/3 of Libya's 19 provinces
			}
			total_development = 150			#Normal requirement for rank 2 is 300 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = TRP
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			tripolitania_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = TRP
			}
			fezzan_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = TRP
			}
			cyrenaica_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = TRP
			}
			nafusa_mountains_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = TRP
			}
			if = {
				limit = {
					OR = {
						has_reform = tribal_kingdom
						has_reform = tribal_despotism
						has_reform = tribal_federation
						has_reform = tribal_democracy_legacy
					}
				}
				set_legacy_government = despotic_monarchy #Desert tribes settling down, theocracies become monarchies.
			}
			add_prestige = 25
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_tripoli_flag
		}
		ai_will_do = {
			factor = 1
		}
		#ai_importance = 400
	}

# 	Tunisia	 
	tunisian_nation = {
		major = yes
		potential = {
			 
			NOT = { has_country_flag = formed_tunisia_flag }
			NOT = { tag = MOR }
			NOT = { tag = TUN }
			NOT = { tag = TLC }
			NOT = { tag = ALG }
			NOT = { tag = TRP }
			NOT = { tag = OTN }
			AND = {
				primary_culture = tunisian
				any_owned_province = {
					OR = {
						area = tunisia_area
						area = djerba_area
						area = djerid_area
						area = east_aures_area
					}
				}
			}
		}
		provinces_to_highlight = {
			OR = {
				area = tunisia_area
				area = djerba_area
				area = east_aures_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = OTN }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 341 #Tunis
			calc_true_if = {
				all_owned_province = {
					is_core = ROOT
					OR = {
						area = tunisia_area
						area = djerba_area
						area = east_aures_area
					}
				}
				amount = 10			#At least 2/3 of Tunisia's 15 provinces
			}
			total_development = 150			#Normal requirement for rank 2 is 300 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = OTN
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			tunisia_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = OTN
			}
			djerba_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = OTN
			}
			east_aures_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = OTN
			}
			if = {
				limit = {
					OR = {
						has_reform = tribal_kingdom
						has_reform = tribal_despotism
						has_reform = tribal_federation
						has_reform = tribal_democracy
					}
				}
				set_legacy_government = despotic_monarchy #Desert tribes settling down, theocracies become monarchies.
			}
			add_prestige = 25
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_tunisia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}
}