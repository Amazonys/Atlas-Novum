smm_update_value_mod = { #value
	if = {
		limit = {
			check_variable = { which = smm_tv value = $value$ }
		}
		if = {
			limit = {
				NOT = {
					has_province_modifier = smm_tv_$value$
				}
			}
			add_permanent_province_modifier = {
				name = smm_tv_$value$
				duration = -1
				hidden = yes
			}
		}
		subtract_variable = { which = smm_tv value = $value$ }
	}
	else_if = {
		limit = {
			has_province_modifier = smm_tv_$value$
		}
		remove_province_modifier = smm_tv_$value$
	}
}
smm_update_tg_mod = { #type
	if = {
		limit = {
			check_variable = { which = smm_$type$_prod value = 0.01 }
		}
		if = {
			limit = {
				NOT = {
					has_province_modifier = smm_$type$
				}
			}
			add_permanent_province_modifier = {
				name = smm_$type$
				duration = -1
			}
			subtract_variable = { which = smm_$type$_prod value = 0.01 }
			subtract_variable = { which = smm_tv value = 0.01 }
		}
		change_variable = { which = smm_tv which = smm_$type$_prod }
	}
	else = {
		set_variable = { which = smm_$type$_prod value = 0 }
		if = {
			limit = {
				has_province_modifier = smm_$type$
			}
			remove_province_modifier = smm_$type$
		}
	}
}
#smm_prod_calc = { #type
#}
smm_price_init = { #type
	set_variable = { which = smm_$type$_price which = PREV }
}
smm_price_factor = { #type
	set_variable = { which = smm_$type$_prod which = smm_prod_goods }
	set_variable = { which = smm_$type$_prod_disp which = smm_prod_goods }
	set_variable = { which = smm_$type$_prod_disp2 which = smm_prod_goods }
	multiply_variable = { which = smm_$type$_prod_disp which = smm_$type$_price }
	subtract_variable = { which = smm_$type$_price value = 1 }
	multiply_variable = { which = smm_$type$_prod which = smm_$type$_price }
}
