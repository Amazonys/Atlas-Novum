#
# remember to add graphics for relevant ones when you add to this
#
# if a modifier is scaled, its multiplied with development in the province.


# any_friendly_coast_border_province is a special scope made for institution spread.
# It checks for adjacent provinces or provinces one seazone away.
# Friendly is defined as at positive relations or owned by the same country that owns the province.

#Beyond Typus Addon Note - 
#Please note that if adding any new tech groups, they will require entries in each institution's embracement speed header, I'd recommend searching 'BT South American Tech Spreads' and adding new entries to the bottom of the list.
#In general, changes are to speed up spread where there have been many new provinces, slow spread in areas that are getting way too much tech in the new system, and use force potential more often, to clean things up for countries who can never obtain the various region specific bonuses
#Note BT adds many new provinces to overhauled areas, but also lowers the average development of those provinces (Tags have the same total dev spread over more provinces). As institutions spread from province to province scaled to dev, this means without changes, institution spread will be markedly slower 
#than in vanilla. This is the justification for speeding up spreads.

#One of the largest and most drastic changes here is halving the AI factor for embracement, making the AI wait until the price is lower (i.e. institution has spread to more provinces) before embracing. The logic follows.
#Vanilla system (at least with BT dev, not sure about vanilla) has countries embracing new institutions immediately once one, two, or rarely three provinces embrace the institution, even for large-ish countries like Spain, England, and Austria. This will hopefully encourage countries to wait until it has spread 
#a bit more. Ideally, I'd like to see countries embrace when between 1/4 and 1/2 of their provinces already accept the institution, not every single province, and not just their one richest city, but a moderate portion of the nation.

#Tech group list for reference below. As/if I add new groups I'll try to add them here as well.
#####High Tech#####
#western	-	original no penalty	-	now no penalty
#high_american	-	original no penalty - now no penalty
#####Medium-High Tech#####
#eastern	-	original penalty was 20 percent more than western, or 83.333 percent of 100 compared to western			-			now generally 95 percent of western (-5 percent)
#ottoman	-	original penalty was 25 percent more than western, or 80 percent of 100 compared to western				-			now generally 90 percent of western (-10 percent)
#muslim	-	original penalty was 40 percent more than western, or 71.429 percent of 100 compared to western			-			now generally 80 percent of western (-20 percent)
#####Medium-Low Tech#####
#indian	-	original penalty was 50 percent more than western, or 66.667 percent of 100 compared to western			-			now generally 75 percent of western (-25 percent)
#east_african	-	original penalty was 50 percent more than western, or 66.667 percent of 100 compared to western	-			now generally 75 percent of western (-25 percent)
#chinese	-	original penalty was 60 percent more than western, or 62.5 percent of 100 compared to western				-			now generally 70 percent of western (-30 percent)
#sub_saharan	-	original penalty was 60 percent more than western, or 62.5 percent of 100 compared to western		-			now generally 70 percent of western (-30 percent)
#central_african	-	original penalty was 65 percent more than western, or 60.606 percent of 100 compared to western	-		now generally 70 percent of western (-30 percent)
#nomad_group	-	original penalty was 75 percent more than western, or 57.143 percent of 100 compared to western	-		now generally 65 percent of western (-35 percent)
#####Low Tech#####
#mesoamerican	-	original penalty was 150 percent more than western, or 40 percent of 100 compared to western		-		now generally 50 percent of western (-50 percent)
#andean	-	original penalty was 150 percent more than western, or 40 percent of 100 compared to western					-		now generally 50 percent of western (-50 percent)
#north_american	-	original penalty was 250 percent more than western, or 28.571 percent of 100 compared to western	-	now generally 40 percent of western (-60 percent)
#south_american	-	original penalty was 250 percent more than western, or 28.571 percent of 100 compared to western	-	now generally 40 percent of western (-60 percent)

#######################################
# Feudalism.  
# 
# Most in the old world start with it.
#######################################

feudalism = {
	penalty = 0.5
	bonus = {
		diplomatic_upkeep = 1			#BTAddOn new. An idea from PereTercer to clean up the New World alliance mess without interferring with European powers
		free_leader_pool = 1
	}


	history = {
		is_year = 1000
		OR = {
			AND = { #If this is changed costs for Nation Designer may also need to be changed.
				OR = {
					continent = new_world
					continent = north_america
					continent = south_america
					continent = oceania
				}
				owner = {
					is_playing_custom_nation = yes
					OR = {
						technology_group = western
						technology_group = eastern
						technology_group = ottoman
						technology_group = muslim
						technology_group = indian
						technology_group = chinese
						#technology_group = high_american #Is listed below as High Americans get it regardless of if Nation Designer is used.
					}
				}
			}
			culture = persian
			culture = azerbaijani
			culture = kurdish
			culture = armenian
			culture = mazandarani
			culture = turkish
			culture = omani_culture
			culture = yemeni_culture
			culture = swahili
			culture = manchu
			culture = hejazi_arabic
			culture = khaliji_arabic
			culture_group = byzantine
			culture_group = dravidian
			culture_group = east_asian
			culture_group = east_slavic
			culture_group = eastern_aryan
			culture_group = japanese_g
			culture_group = korean_g
			culture_group = scandinavian
			culture_group = west_slavic
			culture_group = western_aryan
			province_id = 383
			province_id = 412
			province_id = 2327
			province_id = 2329
			province_id = 2331
			province_id = 2999
			AND = {
				region = horn_of_africa_region
				owner = { NOT = { has_reform = tribal_federation } }
			}
			AND = {
				culture = al_misr_arabic
				NOT = { area = libyan_desert_area }
				NOT = { area = cyrenaica_area }
			}
			AND = {
				culture_group = hindusthani
				NOT = { owner = { has_reform = tribal_kingdom } } #Ladakh
			}
			owner = { technology_group = high_american }
			owner = {
				NOT = {
					government = tribal
					government = native
					primary_culture = bedouin_arabic
					primary_culture = uyghur
					technology_group = andean
					technology_group = mesoamerican
					technology_group = north_american
					technology_group = south_american
					technology_group = sub_saharan
				}
			}
			AND = {
				is_year = 1600
				owner = {
					NOT = { has_reform = siberian_tribe }
					NOT = { has_reform = steppe_horde }
				}
			}
			is_year = 1700
		}
	}
	
	# no need for events, as its there from the start.
	#can_start = {	is_year = 1000	}
	#start_chance = 100
	#on_start = institution_events.1

	can_embrace = {
		always = yes
	}

	embracement_speed = {
		#modifier = {
		#	factor = 0.6
		#	scale = yes
		#	custom_trigger_tooltip = {
		#		tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
		#		any_friendly_coast_border_province = {
		#			feudalism = 100
		#		}
		#	}
		#}
		#modifier = {
		#	factor = 0.1
		#	scale = yes
		#	potential = {
		#		NOT = {
		#			any_friendly_coast_border_province = {
		#				feudalism = 100
		#			}
		#		}
		#	}
		#	custom_trigger_tooltip = {
		#		tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
		#		any_neighbor_province = {
		#			NOT = { owned_by = ROOT }
		#			feudalism = 100
		#		}
		#	}
		#}
		#########################################################################
		###Start of BT Tech group specific spread modifiers - feudalism
		#########################################################################
		#########################################################################
		###BT Western Tech Spreads - Vanilla speed x 1.67. More provinces means slower spread, speeding up to compensate.
		#########################################################################
		modifier = {
			factor = 1.0
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = western } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.25			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = western }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT Eastern Tech Spreads - Vanilla speed x 1.67, more provinces means slower spread, speeding up to compensate. Then x 0.95 based on original tech group's 20 percent penalty (i.e. 83 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.95
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = eastern } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.24			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = eastern }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT Ottoman Tech Spreads - Vanilla speed x 1.67, more provinces means slower spread, speeding up to compensate. Then x 0.90 based on original tech group's 25 percent penalty (i.e. 80 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.9
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = ottoman } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.24			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = ottoman }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT Muslim Tech Spreads - Vanilla speed x 1.67, more provinces means slower spread, speeding up to compensate. Then x 0.80 based on original tech group's 40 percent penalty (i.e. 71 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.8
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = muslim } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.2			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = muslim }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT Indian Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.45
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = indian } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.11			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = indian }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT East African Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.45
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = east_african } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.11			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = east_african }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT Chinese Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.42
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = chinese } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.10			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = chinese }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT Sub Saharan Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.42
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = sub_saharan } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.10			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = sub_saharan }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT Central African Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 65 percent penalty (i.e. 61 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.42
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = central_african } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.10			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = central_african }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT Nomad Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.65 based on original tech group's 75 percent penalty (i.e. 57 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.39
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = nomad_group } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.09			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = nomad_group }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT High American Tech Spreads - Vanilla speed x 1.67. More provinces means slower spread, speeding up to compensate. Not all regions have new provinces yet, but this tech group was never meant to be 'balanced' anyway
		#########################################################################
		modifier = {
			factor = 1.0
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = high_american } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.25			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = high_american }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT Central American Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.30
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = mesoamerican } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.07			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = mesoamerican }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT Andean Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.30
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = andean } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.07			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = andean }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT North American Tech Spreads - Vanilla speed x 1.33. Only half overhauled, so only half the bonus. Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.32
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = north_american } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.08			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = north_american }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#########################################################################
		###BT South American Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.24
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = south_american } }
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = { feudalism = 100 }
			}
		}
		modifier = {
			factor = 0.06			#Feudalism penalty, was 1/6 normal in vanilla, making it only 1/4, instead of 1/2 common for other tiers
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = south_american }
				NOT = { any_friendly_coast_border_province = { feudalism = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = NEIGHBOR_NOT_OWNED_IS_FEUDAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					feudalism = 100
				}
			}
		}
		#######################################################################
		###End of BT Tech group specific spread modifiers - feudalism
		#######################################################################
		modifier = {
			factor = 0.15
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_estate = estate_nobles }
			}
			custom_trigger_tooltip = {
				tooltip = FEUDALISM_AND_NOBLES
				any_neighbor_province = {
					feudalism = 100
				}
				owner = {
					has_estate = estate_nobles
					estate_loyalty = {
						estate = estate_nobles
						loyalty = 40
					}
				}
				has_estate = estate_nobles
			}
		}
		modifier = {
			factor = 1.0			#Reduced by 80 percent from original 5.0, tech spread slowly on the wild frontier, and it was contributing to overly fast tech spread in native tags
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = PORT_OR_CAPITAL_IN_COLONY_FEUDAL
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = feudalism }
				}
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { is_colonial_nation = no }
			}
			custom_trigger_tooltip = {
				tooltip = CAPITAL_IN_OLD_WORLD_FEUDAL
			
				is_capital = yes
				NOT = { continent = north_america }
				NOT = { continent = south_america }
				NOT = { continent = new_world }
				owner = {
					NOT = { government = tribal }
					NOT = { government = native }
				}
			}
		}
		modifier = {
			factor = 1			#Reduced by 50 percent from original 2.0, once embraced the tag doesn't care, and this will slow tech growth to fringes.
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = feudalism }
				is_in_capital_area = yes			#New, this will prevent institutions from spreading like mad to any country a coloniser gets a border with. Also has the side effect of slowing institution growth on islands... oh well, that isn't actually so bad. The Azores, Shetland, Iceland.... none of them were really know for their great wealth and advancement
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_feudalism_embraced
				owner = { has_institution = feudalism }
				is_in_capital_area = yes
			}
		}
		#New slower spread bonus for owned provinces not connected to the capital by land
		modifier = {
			factor = 0.2
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = feudalism }
				is_in_capital_area = no
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_feudalism_embraced
				owner = { has_institution = feudalism }
				is_in_capital_area = no
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 12			#BTAddOn changed from 24. Logic in notes at the top of the file.
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 4 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 8 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 16 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 32 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.4
		}
		modifier = {
			factor = 2.0
			overseas_provinces_percentage = 0.5
		}			#BTAddOn new. This modifer is for a highly unusual (and unprecedented historically) thassalocracy. In this rare case, the lower factor above may cause a micro state in a rich area but with many colonies in poor areas to never reach the threshold for embracing.
		modifier = {
			factor = 2.0
			OR = {
				tag = GEN
				tag = VEN
			}
		}			#BTAddOn new. These tags both have the disadvantage of having distant colonies, contrasted with the reality of both being some of the most cutting edge countries in the world at the time. Increasing this here for historical balance.
		modifier = {
			factor = 1.5
			years_of_income = 10.0
		}			#BTAddOn new. If a country is swimming in gold, they can fork out some extra. This will likely keep a few small rich states like Venice slightly ahead in tech and/or with a few extra MP for dev building, but this isn't such a bad thing
		modifier = {
			factor = 0.25
			has_any_disaster = yes
		}			#BTAddOn new. Same logic as vanilla's is at war check
		modifier = {
			factor = 1.5
			is_great_power = yes
		}			#BTAddOn new. Great Powers want to stay great powers, and can probably better afford it anyway. Note this may reintroduce my issue with some countries embracing with only one province, but at least here there is a reason =p
	}
}

#######################################
# Renaissance
# 
# Flows from italy
#######################################

renaissance = {
	penalty = 0.5

	bonus = {
		technology_cost = -0.05			#BTAddOn changed from development cost, which is now moved to manufacturing, because I say so =p I like the early tech boost to Europe here and also think tech fits better historically/logically than dev, which should be more an industrialisation thing.
		build_cost = -0.05
	}


	historical_start_date = 1450.1.1
	historical_start_province = 116 # Florence

	history = {
		OR = {
			AND = {
				is_year = 1450
				OR = {
					area = venetia_area
					area = lombardy_area
					area = piedmont_area
					area = tuscany_area
					area = liguria_area
					area = emilia_romagna_area
					area = emilia_area
				}	#BTMiscAddonChange - Slows spread slightly for later start dates
			}
			
			AND = {
				is_year = 1455
				OR = {
					region = italy_region
					region = low_countries_region
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1460
				OR = {
					region = south_german_region
					region = north_german_region
					region = france_region
					region = iberia_region
					region = british_isles_region
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1465
				OR = {
					region = scandinavia_region
					region = ireland_area
					region = baltic_region
					region = poland_region
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1470
				OR = {
					region = balkan_region
					region = carpathia_region
					region = ruthenia_region
					region = russia_region
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1475
				continent = europe
				NOT = { owner = { technology_group = nomad_group } }
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1500
				OR = {
					owner = { technology_group = western }
					owner = { technology_group = high_american }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1525
				OR = {
					owner = { technology_group = eastern }
					owner = { technology_group = ottoman }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1550
				OR = {
					owner = { technology_group = muslim }
					owner = { technology_group = east_african }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1575
				OR = {
					owner = { technology_group = indian }
					owner = { technology_group = chinese }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1600
				OR = {
					owner = { technology_group = central_african }
					owner = { technology_group = sub_saharan }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1660
				owner = {
					technology_group = nomad_group
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1720
				OR = {
					owner = { technology_group = mesoamerican }
					owner = { technology_group = andean }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates

			is_year = 1780
		}
	}
	
	can_start = {
		is_year = 1450
		custom_trigger_tooltip = {
			tooltip = tooltip_bt_add_new_instituiton_details_a
			OR = {
				area = venetia_area
				area = lombardy_area
				area = piedmont_area
				area = tuscany_area
				area = liguria_area
				area = emilia_romagna_area
				area = emilia_area
			}	#BTMiscAddonChange - Limits possibilities somewhat from #region = italy_region and #NOT = { province_id = 126 } and #is_island = no
		}
		#is_state = yes			#BTMiscAddonRemoved - So a province can't accomplish anything or have any good ideas if the owner doesn't consider it 'a state' =p.
		OR = {
			development = 24	#BTMiscAddonChange - Limits possibilities somewhat, new BT tags was causing it to hit in odd places sometimes
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_aj
				OR = {
					province_has_center_of_trade_of_level = 3
					province_has_center_of_trade_of_level = 2
				}
			}			#BTMiscAddonNote - this is needed to prevent a flat or random province start (I'm not even sure if that option does anything...) from not being able to spawn renaissance and kind of breaking the game.
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_b
				is_capital = yes
				development = 16
			}	#BTMiscAddonChange - Limits possibilities somewhat, new BT tags was causing it to hit in odd places sometimes
			normal_or_historical_nations = no
		}
	}
	start_chance = 10		#in 100 for when a province can_start			#BTAddOn changed from 5 - just improving the chances for the institution to hit promptly. If for whatever reason only a couple are eligible, it can be 20 years before it hits.
	#BTMiscAddonNote - All else being equal and without player interference, likely possiblities to start Renaissance with the new limitations above are - Genoa, Milan, Parma, Verona, Venice, Bologna, Lucca, Romagna, Florence, or Siena.
	#BTMiscAddonNote - Piedmont, Cremona, Treviso, Mantua, or Ferrara also possible with a minimal dev increase from 1444 start.
	
	on_start = institution_events.2
	
	
	

	
	
	can_embrace = {
		owner = { has_institution = feudalism }
	}


	
	embracement_speed = {
		#modifier = {
		#	scale = yes
		#	factor = 0.6
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
		#		any_friendly_coast_border_province = {
		#			renaissance = 100
		#		}
		#	}
		#}
		#modifier = {
		#	factor = 0.3
		#	scale = yes
		#	potential = {
		#		NOT = {
		#			any_friendly_coast_border_province = {
		#				renaissance = 100
		#			}
		#		}
		#	}
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_any_neighbor_has_embraced_renaissance
		#		any_neighbor_province = {
		#			NOT = { owned_by = ROOT }
		#			renaissance = 100
		#		}
		#	}
		#}
		#########################################################################
		###Start of BT Tech group specific spread modifiers - renaissance
		#########################################################################
		#########################################################################
		###BT Western Tech Spreads - Vanilla speed x 1.67. More provinces means slower spread, speeding up to compensate.
		#########################################################################
		modifier = {
			factor = 1.0
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = western } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = western }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT Eastern Tech Spreads - Vanilla speed x 1.67, more provinces means slower spread, speeding up to compensate. Then x 0.95 based on original tech group's 20 percent penalty (i.e. 83 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.95
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = eastern } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.48
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = eastern }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT Ottoman Tech Spreads - Vanilla speed x 1.67, more provinces means slower spread, speeding up to compensate. Then x 0.90 based on original tech group's 25 percent penalty (i.e. 80 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.9
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = ottoman } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.45
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = ottoman }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT Muslim Tech Spreads - Vanilla speed x 1.67, more provinces means slower spread, speeding up to compensate. Then x 0.80 based on original tech group's 40 percent penalty (i.e. 71 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.8
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = muslim } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.4
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = muslim }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT Indian Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.45
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = indian } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.22
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = indian }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT East African Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.45
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = east_african } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.22
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = east_african }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT Chinese Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.42
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = chinese } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.21
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = chinese }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT Sub Saharan Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.42
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = sub_saharan } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.21
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = sub_saharan }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT Central African Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 65 percent penalty (i.e. 61 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.42
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = central_african } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.21
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = central_african }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT Nomad Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.65 based on original tech group's 75 percent penalty (i.e. 57 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.39
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = nomad_group } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.19
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = nomad_group }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT High American Tech Spreads - Vanilla speed x 1.67. More provinces means slower spread, speeding up to compensate. Not all regions have new provinces yet, but this tech group was never meant to be 'balanced' anyway
		#########################################################################
		modifier = {
			factor = 1.0
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = high_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = high_american }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT Central American Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.30
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = mesoamerican } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.15
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = mesoamerican }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT Andean Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.30
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = andean } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.15
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = andean }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT North American Tech Spreads - Vanilla speed x 1.33. Only half overhauled, so only half the bonus. Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.32
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = north_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.16
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = north_american }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#########################################################################
		###BT South American Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.24
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = south_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_renaissance
				any_friendly_coast_border_province = { renaissance = 100 }
			}
		}
		modifier = {
			factor = 0.12
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = south_american }
				NOT = { any_friendly_coast_border_province = { renaissance = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_renaissance
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					renaissance = 100
				}
			}
		}
		#######################################################################
		###End of BT Tech group specific spread modifiers - renaissance
		#######################################################################
		#modifier = {
		#	factor = 1
		#	potential = {
		#		region = italy_region
		#	}
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_italian_capital
		#		is_capital = yes
		#		region = italy_region
		#		culture_group = latin
		#	}
		#}			#BT changes this spread is superseeded by the new regional spreads below, search 'BT New Misc Modifiers - Regional Spreads - renaissance'
		modifier = {
			factor = 0.1			#BT changed from original 0.05 because generally much lower average dev in provinces in BT, so far fewer provinces getting this and less scaling causing it to go even slower
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = western }
				continent = europe
			}			#BTAddOn Change, now only western tech get the full bonus, whereas previously is was all of Europe which was boosting Nomadic groups too much. Note this could slow spread in a game with no western tech countries
			custom_trigger_tooltip = {
				tooltip = tooltip_development_10
				owner = { technology_group = western }
				development = 10
			}
		}
		modifier = {
			factor = 0.1			#BT changed from original 0.05 because generally much lower average dev in provinces in BT, so far fewer provinces getting this and less scaling causing it to go even slower
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = western }
				continent = europe
			}			#BTAddOn Change, now only western tech get the full bonus, whereas previously is was all of Europe which was boosting Nomadic groups too much. Note this could slow spread in a game with no western tech countries
			custom_trigger_tooltip = {
				tooltip = tooltip_development_20
				owner = { technology_group = western }
				development = 20
			}
		}
		#######################################################################
		###BT New Misc Modifiers
		#######################################################################
		#Weaker eastern tech bonus, same as western tech but half strength. Between the two they cover all of the previous continent equals europe except the far western end of the Steppes, the Balkans, and Granada.... perfect, except perhaps need to add a spread bonus to Granada's NI
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = eastern }
				continent = europe
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_development_10
				owner = { technology_group = eastern }
				development = 10
			}
		}
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = eastern }
				continent = europe
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_development_20
				owner = { technology_group = eastern }
				development = 20
			}
		}
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = eastern } }
			custom_trigger_tooltip = {
				tooltip = tooltip_development_5_post_1550
				owner = { technology_group = eastern }
				is_year = 1550
				development = 5
			}
		}
		#Half strength later start very high dev only for Asia, after all, who says Asia never had a renaissance? =p Seriously though, this is mainly for gameplay. We want Asia well behind Europe, but not TOO far behind. If Asia can get the renaissance, then it can stay competitive-ish even if no European colonisers
		#establish treaty ports, and will also boost the rich inland areas like Dehli and more remote areas like Kyoto and Peking. Asia will still be missing the printing press until Europeans spread it, but all other institutions can be obtained organically, albeit with slightly more effort than in Europe and perhaps a 
		#moderate delay for manufacturing. Depending on tests, might even have to add a post-1650 dev based printing press growth in Asia. Africa gets left out mainly because they will often get colonial borders very early, but also because its much lower population density and development limited growth potential.
		modifier = {
			factor = 0.02
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				OR = {
					owner = { technology_group = indian }
					owner = { technology_group = chinese }
				}
				continent = asia
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_ab
				OR = {
					owner = { technology_group = indian }
					owner = { technology_group = chinese }
				}
				is_year = 1600			#50 year greater delay introduced in 1.22, based on China being massively and unrealistically OPed in 1.20 and 1.21
				development = 30
			}
		}
		#######################################################################
		###End of BT New Misc Modifiers
		#######################################################################
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = western } }			#BT changed from original continent = europe, note this could slow spread in a game with no western tech countries
			custom_trigger_tooltip = {
				tooltip = tooltip_development_5_post_1500
				owner = { technology_group = western }
				is_year = 1500
				development = 5
			}
		}
		modifier = {
			factor = 1.0			#BTMiscAddonChange from 0.5. This was the centre of the Renaissance, should be much faster. Also note the pan Italy bonus hits too, bringing regional bonus to 2.0, plus another 1.0 at least from dev, then scaled. By around 1460, pretty much all of Italy should have the renaissance
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				OR = {
					area = venetia_area
					area = lombardy_area
					area = piedmont_area
					area = tuscany_area
					area = liguria_area
					area = emilia_romagna_area
					area = emilia_area
				}	#BTMiscAddonChange - Tuscany and Venetia only changed to all of Northern Italy. Piedmont, Lombardy, Liguria etc. were not backwaters
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_flanders_tuscany_venetia
				OR = {
					area = venetia_area
					area = lombardy_area
					area = piedmont_area
					area = tuscany_area
					area = liguria_area
					area = emilia_romagna_area
					area = emilia_area
				}	#BTMiscAddonChange - Tuscany and Venetia only changed to all of Northern Italy. Piedmont, Lombardy, Liguria etc. were not backwaters
			}
		}
		#######################################################################
		###BT New Misc Modifiers - Regional Spreads - renaissance. Splitting and expanding the vanilla flanders, tuscany, venetia spread bonus, and also including and superseeding the italian capital bonus above.
		#######################################################################
		modifier = {
			factor = 1.0			#Formerly only affected capitals, now hits all of Italy. Will speed up spread greatly in the region.
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				region = italy_region
				NOT = {
					OR = {
						area = sicily_area
						area = corsica_sardinia_area
						area = sardinia_area
					}
				}			#BTMiscAddOn note, blocking Sicily and Sardinia/Corsica to prevent spread to North Africa and Aragon too quickly. Also not horrible, neither was poor, but outside of perhaps Palermo, niether was as advanced as the rest of Italy at this point, either. Stronger Sicily and Sardinia came later, I believe
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_all_italian_renaissance
				region = italy_region
				NOT = {
					OR = {
						area = sicily_area
						area = corsica_sardinia_area
						area = sardinia_area
					}
				}
			}
		}
		modifier = {
			factor = 0.5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { area = flanders_area }
			custom_trigger_tooltip = {
				tooltip = tooltip_flanders_renaissance
				area = flanders_area
			}
		}
		#######################################################################
		###End of BT New Misc Modifiers
		#######################################################################
		modifier = {
			factor = 1.0			#Reduced by 80 percent from original 5.0, renaissance ideals meant very little on the wild frontier, and it was contributing to overly fast tech spread in native tags
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_renaissance
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = renaissance }
				}
			}
		}
		modifier = {
			factor = 1			#Reduced by 50 percent from original 2.0, once embraced the tag doesn't care, and this will slow tech growth to fringes.
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = renaissance }
				is_in_capital_area = yes			#New, this will prevent institutions from spreading like mad to any country a coloniser gets a border with. Also has the side effect of slowing institution growth on islands... oh well, that isn't actually so bad. The Azores, Shetland, Iceland.... none of them were really know for their great wealth and advancement
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_renaissance_embraced
				owner = { has_institution = renaissance }
				is_in_capital_area = yes
			}
		}
		#New slower spread bonus for owned provinces not connected to the capital by land
		modifier = {
			factor = 0.2
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = renaissance }
				is_in_capital_area = no
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_renaissance_embraced
				owner = { has_institution = renaissance }
				is_in_capital_area = no
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 12			#BTAddOn changed from 24. Logic in notes at the top of the file.
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 4 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 8 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 16 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 32 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.4
		}
		modifier = {
			factor = 2.0
			overseas_provinces_percentage = 0.5
		}			#BTAddOn new. This modifer is for a highly unusual (and unprecedented historically) thassalocracy. In this rare case, the lower factor above may cause a micro state in a rich area but with many colonies in poor areas to never reach the threshold for embracing.
		modifier = {
			factor = 2.0
			OR = {
				tag = GEN
				tag = VEN
			}
		}			#BTAddOn new. These tags both have the disadvantage of having distant colonies, contrasted with the reality of both being some of the most cutting edge countries in the world at the time. Increasing this here for historical balance.
		modifier = {
			factor = 1.5
			years_of_income = 10.0
		}			#BTAddOn new. If a country is swimming in gold, they can fork out some extra. This will likely keep a few small rich states like Venice slightly ahead in tech and/or with a few extra MP for dev building, but this isn't such a bad thing
		modifier = {
			factor = 0.25
			has_any_disaster = yes
		}			#BTAddOn new. Same logic as vanilla's is at war check
		modifier = {
			factor = 1.5
			is_great_power = yes
		}			#BTAddOn new. Great Powers want to stay great powers, and can probably better afford it anyway. Note this may reintroduce my issue with some countries embracing with only one province, but at least here there is a reason =p
	}
}


#######################################
# New World
# 
# Colonising is good.. mkay.-.
#######################################
new_world_i = {
	penalty = 0.5

	bonus = {
		trade_steering = 0.1		#BTAddOn changed from provincial trade power bonus (0.1), For no real reason in particular, other than I didn't really like the former boost and fewer variables to provincial trade power helps me theorise AI triggers better.
		global_colonial_growth = 10			#BTAddOn new, just a fun little bonus because the UI can fit 2 bonuses per institution... also with all the new provinces we can use some more colonial growth
	}


	historical_start_date = 1500.1.1
	historical_start_province = 224 #Sevilla

	history = {
		OR = {
		
			AND = {
				is_year = 1500
				OR = {
					owner = { technology_group = high_american }
					owner = { colony = 1 }
					AND = {
						owner = { has_idea = quest_for_the_new_world }
						OR = {
							province_trade_power = 15
							development = 15
						}
					}
				}	#BTMiscAddonChange - Slows spread slightly for later start dates
			}
			
			AND = {
				is_year = 1505
				OR = {
					AND = {
						owner = { has_idea = quest_for_the_new_world }
						OR = {
							province_trade_power = 10
							development = 10
						}
					}
					AND = {
						owner = { is_colonial_nation = yes }
						owner = { technology_group = western }
					}
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1510
				OR = {
					region = iberia_region
					region = france_region
					region = british_isles_region
					AND = {
						owner = { has_idea = quest_for_the_new_world }
						OR = {
							province_trade_power = 5
							development = 5
						}
					}
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1515
				OR = {
					region = italy_region
					region = low_countries_region
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1520
				OR = {
					region = russia_region
					region = scandinavia_region
					region = south_german_region
					region = north_german_region
					region = baltic_region
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1525
				OR = {
					region = ireland_area
					region = poland_region
					region = ruthenia_region
					region = carpathia_region
					region = balkan_region
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates

			AND = {
				is_year = 1550
				owner = { technology_group = western }	#Note this includes colonies and overseas
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1575
				owner = { technology_group = eastern }	#Note this includes colonies, overseas and Siberian holdings
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1600
				OR = {
					AND = {
						continent = europe
						NOT = { technology_group = nomad_group }
					}
					owner = { technology_group = ottoman }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates

			AND = {
				is_year = 1650
				OR = {
					owner = { technology_group = muslim }
					owner = { technology_group = east_african }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1675
				OR = {
					owner = { technology_group = indian }
					owner = { technology_group = chinese }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1700
				OR = {
					owner = { technology_group = central_african }
					owner = { technology_group = sub_saharan }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1730
				owner = {
					technology_group = nomad_group
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1760
				OR = {
					owner = { technology_group = mesoamerican }
					owner = { technology_group = andean }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			is_year = 1790
		}
	}
	
	can_start = {
		is_year = 1500
		custom_trigger_tooltip = {
			tooltip = tooltip_bt_add_new_instituiton_details_c			#BTcleaner UI
			OR = {
				continent = europe
				continent = asia
				continent = africa
			}
		}
		OR = {
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_d			#BTcleaner UI
				has_port = yes
				OR = {
					province_has_center_of_trade_of_level = 3			#This enables Dublin, Lothian, Bergen, London, Antwerp, Lisbon, and Sevilla as possibilities (or Tangiers, Valencia, or Barcelona, with plausible conquests in the first 60y). Note overlap with dev possibilities
					province_has_center_of_trade_of_level = 3			#just to be thorough
					development = 16			#BTAddOn change from 12. Want to limit it to actually plausible provinces. Most likely candidates London, Bordeaux, Porto, Sevilla (or Lisbon with one dev increase). Main provinces cut by this increase include Nantes, or potentially Picardie, Norfolk, Dublin, Minho, Granada, Ypres, Bruges, Gent, Breda, Rouen, Evreux, Caen, Kent, Lothian, Rennes, Navarra, Vizacaya, La Coruna, or Coimbra (with minor development or plausible conquest)
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_ak			#BTcleaner UI
				AND = {
					is_capital = yes
					has_port = yes
				}
			}
		}			#Moved requirements around a bit. Now candidate must -either- a rich port or capital. This opens up Paris and Toledo/Madrid/Castilla, as well as a plethora of alt history possibilities. The logic here being an administration didn't neccessary have to have a castle with a beach view in order to order the discovery and colonisation of the new world....
		#is_island = no			#BTAddOn removed. Moot point, as there are no candidates who fit this. Should someone build up the Azores to 16 dev or move their cap there, then why not allow it. Institution will still spread across one sea province.
		#is_state = yes			#BTAddOn removed. A silly requirement. If it is a major colonial port, but the government for whatever reason hasn't made it a state, it is still a major colonial port.
		custom_trigger_tooltip = {
			tooltip = tooltip_bt_add_new_instituiton_details_al			#BTcleaner UI
			is_in_capital_area = yes			#BTAddOn note. Don't like this because it blocks a few good alt history options, but leaving it because it also blocks some bad ones
		}
		owner = {
			has_idea = quest_for_the_new_world
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_e			#BTcleaner UI
				OR = {
					north_america = { has_discovered = PREV }
					south_america = { has_discovered = PREV }
					new_world = { has_discovered = PREV }
				}
			}
		}
		#Ill fated idea I was toying around with, disabling for now, too many things could go wrong.
		#owner = {
		#	OR = {
		#		any_owned_province = {
		#			is_core = PREV
		#			OR = {
		#				continent = north_america
		#				continent = south_america
		#				continent = new_world
		#			}
		#		}
		#		colony = 1
		#		AND = {
		#			is_year = 1510 		#Catch all, so if no one manages to colonise by 1510 anyone owning the history early colonial centres can get it. Note I'm also adding events to encourage (slightly, hopefully no railroading) historical colonisation dates and patterns, so hopefully this will not be neccessary.
		#			OR = {
		#				owns = 224			#Sevilla
		#				owns = 227			#Lisbon
		#				owns = 239			#Bristol
		#				owns = 367			#Azores
		#				owns = 5096			#West Canaries
		#			}
		#		}
		#		AND = {
		#			is_year = 1520			#If for some bizare reason, partly compatible 3rd party mod conflict, absurd conquest, or other unforseeable event, making it hit in 1520 regardless of other details, so long as there is an eligible province.
		#		}
		#	}
		#}
	}
	start_chance = 25		#in 100 for when a province can_start			#BTAddOn changed from 5 - just improving the chances for the institution to hit promptly. If for whatever reason only a couple are eligible, it can be 20 years before it hits.
	
	#BTAddOn Notes
	#With all changes considered, most likely candidates are Sevilla, Lisbon, Porto, whatever is the Spanish capital, London, Dublin, Bordeaux, Porto, Lothian, Paris, Bergen, or Antwerp when owned by a country with at least one provinces in the New World (making the first 3 Iberian options the most likely)
	#I wouldn't go so far as to say this is 'ideal' but it seems okay for now.
	
	on_start = institution_events.3
	
	
	

	
	
	can_embrace = {
		owner = { has_institution = feudalism }			#BTAddOn new - this makes it so a province must have feudalism before it can embrace anything else. I'm hoping this improves the 1650-no institutions-10 levels behind-to-1675-all institutions-1 level behind problem introduced in the new institution system.
	}


	
	embracement_speed = {
	#	modifier = {
	#		factor = 1.2
	#		scale = yes
	#		custom_trigger_tooltip = {
	#			tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
	#			any_friendly_coast_border_province = {
	#				new_world_i = 100
	#			}
	#		}
	#		
	#	}
	#	modifier = {
	#		factor = 0.5
	#		scale = yes
	#		potential = {
	#			has_port = yes
	#			NOT = {
	#				any_friendly_coast_border_province = {
	#					new_world_i = 100
	#				}
	#			}
	#		}
	#		custom_trigger_tooltip = {
	#			tooltip = tooltip_neighbor_port_province_new_world
	#			has_port = yes
	#			any_neighbor_province = {
	#				new_world_i = 100
	#			}
	#		}
	#	}
		#########################################################################
		###Start of BT Tech group specific spread modifiers - new_world_i   I can't really say I understand what is with the secondary modifer... so it just hits if there is a port, but doesn't slow down if the owner isn't the same, yeah... I'm just reverting to the same system as all the other institutions. Different owner half speed but it hits all provinces, not just ports. There is even a vanilla tooltip for it this already, unused, as far as I can tell.
		#########################################################################
		#########################################################################
		###BT Western Tech Spreads - Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers), the x 1.67 to compensate for more provinces.
		#########################################################################
		modifier = {
			factor = 1.5			#testing change from 1.0 to 1.5 for western. Was moving too slowly now that most outside Iberia don't pick exploration as 2nd idea
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = western } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.75			#testing change from 0.5 to .75 for western. Was moving too slowly now that most outside Iberia don't pick exploration as 2nd idea
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = western }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT Eastern Tech Spreads - Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers), the x 1.67 to compensate for more provinces. Then x 0.95 based on original tech group's 20 percent penalty (i.e. 83 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.95
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = eastern } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.48
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = eastern }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT Ottoman Tech Spreads - Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers), the x 1.67 to compensate for more provinces. Then x 0.90 based on original tech group's 25 percent penalty (i.e. 80 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.90
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = ottoman } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.45
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = ottoman }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT Muslim Tech Spreads - Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers), the x 1.67 to compensate for more provinces. Then x 0.80 based on original tech group's 40 percent penalty (i.e. 71 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.8
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = muslim } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.4
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = muslim }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT Indian Tech Spreads - Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers). Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.45
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = indian } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.22
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = indian }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT East African Tech Spreads - Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers). Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.45
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = east_african } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.22
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = east_african }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT Chinese Tech Spreads - Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers). Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.42
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = chinese } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.21
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = chinese }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT Sub Saharan Tech Spreads - Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers). Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.42
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = sub_saharan } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.21
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = sub_saharan }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT Central African Tech Spreads - Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers). Then x 0.70 based on original tech group's 65 percent penalty (i.e. 61 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.39
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = central_african } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.19
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = central_african }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT Nomad Tech Spreads - Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers). Then x 0.65 based on original tech group's 75 percent penalty (i.e. 57 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.36
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = nomad_group } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.18
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = nomad_group }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT High American Tech Spreads - Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers), then x 1.67 to compensate for more provinces. Not all regions have new provinces yet, but this tech group was never meant to be 'balanced' anyway
		#########################################################################
		modifier = {
			factor = 1.0
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = high_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = high_american }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT Central American Tech Spreads -  Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers). Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.3
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = mesoamerican } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.15
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = mesoamerican }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT Andean Tech Spreads -  Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers). Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.3
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = andean } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.15
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = andean }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT North American Tech Spreads - Vanilla speed was spreading too quickly, so reducing by half (to the same spread speed as the other tiers), then x 1.33 (half overhauled, half bonus). Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.32
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = north_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.16
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = north_american }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#########################################################################
		###BT South American Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.24
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = south_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_colonialism
				any_friendly_coast_border_province = { new_world_i = 100 }
			}
		}
		modifier = {
			factor = 0.12
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = south_american }
				NOT = { any_friendly_coast_border_province = { new_world_i = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_colonialism
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					new_world_i = 100
				}
			}
		}
		#######################################################################
		###End of BT Tech group specific spread modifiers - new_world_i
		#######################################################################
		#######################################################################
		###BT New Misc Modifiers - splitting the formerly unscaled colonialism spread modifiers into 3 different parts. Note it is possible for the first 2 to be mixed, resulting in very high spread
		#######################################################################
		#The capital modifer
		modifier = {
			factor = 5			#BTAddOn changed, halved because I added scaling
			scale = yes			#BTAddOn new
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				is_capital = yes
				owner = { is_colonial_nation = no }
			}			#BTAddOn removed a bunch of uneccessary capital scope parameters here, if capital is in a colonial region the tag cannot form colonial nations
			custom_trigger_tooltip = {
				tooltip = tooltip_has_colonial_subject_in_new_world_bt_addon_a
				is_capital = yes
				owner = {
					colony = 1
					#BTAddOn removed a bunch of uneccessary detail here, the one line above accomplishes it all.
				}
			}
		}
		#The port modifier
		modifier = {
			factor = 5			#BTAddOn changed, halved because I added scaling
			scale = yes			#BTAddOn new
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				has_port = yes
				owner = { is_colonial_nation = no }
				province_trade_power = 10
			}			#BTAddOn removed a bunch of uneccessary capital scope parameters here, if capital is in a colonial region the tag cannot form colonial nations
			custom_trigger_tooltip = {
				tooltip = tooltip_has_colonial_subject_in_new_world_bt_addon_b
				has_port = yes
				province_trade_power = 10
				owner = {
					colony = 1
					#BTAddOn removed a bunch of uneccessary detail here, the one line above accomplishes it all.
				}
			}
		}
		#The (new) other modifier for everyone else
		modifier = {
			factor = 1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { is_colonial_nation = no }
				is_capital = no
				NOT = {
					AND = {
						province_trade_power = 10
						has_port = yes
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_has_colonial_subject_in_new_world_bt_addon_c
				is_capital = no
				OR = {
					has_port = no
					NOT = { province_trade_power = 10 }
				}
				is_core = ROOT
				is_in_capital_area = yes
				owner = { colony = 1 }
			}
		}
		#Unique bonus to colonial nations. Capital gets an even bigger boost below
		modifier = {
			factor = 2
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { is_colonial_nation = yes }
				is_capital = no
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_new_world_i
				is_capital = no
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = new_world_i }
				}
			}
		}
		#A small bonus because not everyone will be able to establish a timely colony. Idea changes really slow spread of this institution but event given explorers should at least give a chance to discover the New World for Christian Europe. Hidden (and replaced by x5 power version) when nation gains a colony.
		modifier = {
			factor = 1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					is_colonial_nation = no
					NOT = { colony = 1 }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonialism_exploration_small_bonus_bt_addon_a
				owner = {
					is_colonial_nation = no
					NOT = { colony = 1 }
					OR = {
						north_america = { has_discovered = PREV }
						south_america = { has_discovered = PREV }
						new_world = { has_discovered = PREV }
					}
				}
				province_trade_power = 10
				has_port = yes
			}
		}
		#######################################################################
		###End of BT New Misc Modifiers
		#######################################################################
		#Port provinces in countries with colonial subjects
		#modifier = {
		#	factor = 10
		#	potential = {
		#		OR = {
		#			has_port = yes
		#			is_capital = yes
		#		}
		#		owner = {
		#			capital_scope = {
		#				NOT = { continent = north_america }
		#				NOT = { continent = south_america }
		#				NOT = { continent = new_world }
		#			}
		#		}
		#	}
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_has_colonial_subject_in_new_world
		#		OR = {
		#			has_port = yes
		#			is_capital = yes
		#		}
		#		owner = {
		#			colony = 1
		#			any_subject_country = {
		#				is_colonial_nation = yes
		#				OR = {
		#					capital_scope = { continent = north_america }
		#					capital_scope = { continent = south_america }
		#					capital_scope = { continent = new_world }
		#				}
		#			}
		#		}
		#	}
		#}		#Superseeded by above new modifiers
		modifier = {
			factor = 5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { is_colonial_nation = yes }
				is_capital = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_new_world_i_bt_addon_a
				is_capital = yes
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = new_world_i }
				}
			}
		}			#BTAddOn change, few alterations here to make it cleaner & capital only. Adding a slower non capital modifier above.
		modifier = {
			factor = 1			#BTAddOn change. As elsewhere, slowing speed of spread for already embraced institutions.
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = new_world_i }
				is_in_capital_area = yes			#New, this will prevent institutions from spreading like mad to any country a coloniser gets a border with. Also has the side effect of slowing institution growth on islands... oh well, that isn't actually so bad.
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_new_world_i_embraced
				owner = { has_institution = new_world_i }
				is_in_capital_area = yes			#New, this will prevent institutions from spreading like mad to any country a coloniser gets a border with. Also has the side effect of slowing institution growth on islands... oh well, that isn't actually so bad.
			}
		}
		#New slower spread bonus for owned provinces not connected to the capital by land
		modifier = {
			factor = 2.0			#x10 spread of colonialism in overseas colonies and (somewhat unintentionally) islands. This isn't so bad though, historically islands participated in colonialism far more per capita.
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = new_world_i }
				is_in_capital_area = no			#This version hits islands and overseas colonies
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_new_world_i_embraced
				owner = { has_institution = new_world_i }
				is_in_capital_area = no			#This version hits islands and overseas colonies
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 12			#BTAddOn changed from 24. Logic in notes at the top of the file.
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 4 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 8 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 16 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 32 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.4
		}
		modifier = {
			factor = 2.0
			overseas_provinces_percentage = 0.5
		}			#BTAddOn new. This modifer is for a highly unusual (and unprecedented historically) thassalocracy. In this rare case, the lower factor above may cause a micro state in a rich area but with many colonies in poor areas to never reach the threshold for embracing.
		modifier = {
			factor = 2.0
			OR = {
				tag = GEN
				tag = VEN
			}
		}			#BTAddOn new. These tags both have the disadvantage of having distant colonies, contrasted with the reality of both being some of the most cutting edge countries in the world at the time. Increasing this here for historical balance.
		modifier = {
			factor = 1.5
			years_of_income = 10.0
		}			#BTAddOn new. If a country is swimming in gold, they can fork out some extra. This will likely keep a few small rich states like Venice slightly ahead in tech and/or with a few extra MP for dev building, but this isn't such a bad thing
		modifier = {
			factor = 0.25
			has_any_disaster = yes
		}			#BTAddOn new. Same logic as vanilla's is at war check
		modifier = {
			factor = 1.5
			is_great_power = yes
		}			#BTAddOn new. Great Powers want to stay great powers, and can probably better afford it anyway. Note this may reintroduce my issue with some countries embracing with only one province, but at least here there is a reason =p
	}
}



#######################################
# Printing Press
#######################################
printing_press = {
	penalty = 0.5

	bonus = {
		stability_cost_modifier = -0.05			#BTAddOn notes - This is a bit of a strange choice for an institution, and very hard to pick bonuses for... Much of the results of this actually destabalised Europe, at least in the short term, so I don't actually like this bonus, but I can't think of a better one, much less two
		global_missionary_strength = 0.01			#BTAddOn new - Had a hard time choosing a suitable second bonus here... going with missionary strength to follow the whole religious theme. Note base missionary power is reduced in static modifiers, so this just brings it back to vanilla levels.
	}


	historical_start_date = 1550.1.1
	historical_start_province = 1876 #Frankfurt

	history = {
		OR = {
			AND = {
				is_year = 1550
				OR = {
					religion = protestant
					religion = reformed
					region = south_german_region
					region = north_german_region
				}
				development = 20
				continent = europe
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1555
				OR = {
					religion = protestant
					religion = reformed
					region = south_german_region
					region = north_german_region
				}
				development = 15
				continent = europe
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1560
				OR = {
					religion = protestant
					religion = reformed
					region = south_german_region
					region = north_german_region
					region = italy_region
					region = low_countries_region
				}
				development = 11
				continent = europe
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1565
				OR = {
					religion = protestant
					religion = reformed
					region = south_german_region
					region = north_german_region
					region = italy_region
					region = low_countries_region
					region = france_region
					region = british_isles_region
				}
				development = 8
				continent = europe
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1570
				OR = {
					religion = protestant
					religion = reformed
					region = south_german_region
					region = north_german_region
					region = italy_region
					region = low_countries_region
					region = france_region
					region = british_isles_region
					region = iberia_region
					region = scandinavia_region
					region = ireland_area
					region = baltic_region
					region = poland_region
				}
				development = 6
				continent = europe
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1575
				OR = {
					religion = protestant
					religion = reformed
					region = south_german_region
					region = north_german_region
					region = italy_region
					region = low_countries_region
					region = france_region
					region = british_isles_region
					region = iberia_region
					region = scandinavia_region
					region = ireland_area
					region = baltic_region
					region = poland_region
					region = carpathia_region
				}
				development = 5
				continent = europe
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1600
				continent = europe
				owner = { technology_group = western }
			}	#BTMiscAddonChange - Slows spread slightly for later start dates

			AND = {
				is_year = 1625
				OR = {
					AND = {
						continent = europe
						owner = { technology_group = eastern }
					}
					owner = { technology_group = western }
					owner = { technology_group = high_american }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1650
				OR = {
					owner = { technology_group = eastern }
					owner = { technology_group = ottoman }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1700
				OR = {
					owner = { technology_group = muslim }
					owner = { technology_group = east_african }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			
			AND = {
				is_year = 1750
				OR = {
					owner = { technology_group = indian }
					owner = { technology_group = chinese }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
		}
	}
	
	can_start = {
		is_year = 1550
		custom_trigger_tooltip = {
			tooltip = tooltip_bt_add_new_instituiton_details_al			#BTcleaner UI
			is_in_capital_area = yes
		}
		#is_island = no			#BTAddOn removed. Unneccessary detail, no candidates anyway
		#is_state = yes			#BTAddOn removed. Silly detail, see earlier entries where it is also removed.
		OR = {
			development = 16			#BTAddOn change from 15, just to match the others can start requirements
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_ak			#BTcleaner UI
				is_capital = yes
			}
		}
		custom_trigger_tooltip = {
			tooltip = tooltip_bt_add_new_instituiton_details_am			#BTcleaner UI
			OR = {
				#religion = protestant			#BTAddOn removed. Germany regions below give plenty of options, and all of Germany really was at the cutting edge of printing dating all the way back to the start date, even the Catholic parts
				#religion = reformed			#BTAddOn removed. Germany regions below give plenty of options, and all of Germany really was at the cutting edge of printing dating all the way back to the start date, even the Catholic parts
				region = north_german_region
				region = south_german_region
			}
		}
	}
	start_chance = 10		#in 100 for when a province can_start			#BTAddOn changed from 5 - just improving the chances for the institution to hit promptly. If for whatever reason only a couple are eligible, it can be 20 years before it hits.
	
	
	on_start = institution_events.4
	
	
	can_embrace = {
		owner = { has_institution = feudalism }			#BTAddOn new - this makes it so a province must have feudalism before it can embrace anything else. I'm hoping this improves the 1650-no institutions-10 levels behind-to-1675-all institutions-1 level behind problem introduced in the new institution system.
	}

	
	embracement_speed = {
	
		#modifier = {
		#	factor = 0.6
		#	scale = yes
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
		#		any_friendly_coast_border_province = {
		#			printing_press = 100
		#		}
		#	}
		#}
		
		#modifier = {
		#	factor = 0.2
		#	scale = yes
		#	potential = {
		#		NOT = {
		#			any_friendly_coast_border_province = {
		#				printing_press = 100
		#			}
		#		}
		#	}
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_any_neighbor_has_embraced_printing_press
		#		any_neighbor_province = {
		#			NOT = { owned_by = ROOT }
		#			printing_press = 100
		#		}
		#	}
		#}
		
		#########################################################################
		###Start of BT Tech group specific spread modifiers - printing_press
		#########################################################################
		#########################################################################
		###BT Western Tech Spreads - Vanilla speed x 1.67. More provinces means slower spread, speeding up to compensate.
		#########################################################################
		modifier = {
			factor = 1.0
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = western } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.33			#1/3 of full speed, as vanilla
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = western }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT Eastern Tech Spreads - Vanilla speed x 1.67, more provinces means slower spread, speeding up to compensate. Then x 0.95 based on original tech group's 20 percent penalty (i.e. 83 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.95
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = eastern } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.31
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = eastern }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT Ottoman Tech Spreads - Vanilla speed x 1.67, more provinces means slower spread, speeding up to compensate. Then x 0.90 based on original tech group's 25 percent penalty (i.e. 80 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.9
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = ottoman } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.3			#1/3 of full speed, as vanilla
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = ottoman }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT Muslim Tech Spreads - Vanilla speed x 1.67, more provinces means slower spread, speeding up to compensate. Then x 0.80 based on original tech group's 40 percent penalty (i.e. 71 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.8
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = muslim } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.26			#1/3 of full speed, as vanilla
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = muslim }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT Indian Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.45
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = indian } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.15			#1/3 of full speed, as vanilla
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = indian }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT East African Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.45
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = east_african } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.15			#1/3 of full speed, as vanilla
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = east_african }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT Chinese Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.42
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = chinese } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.14			#1/3 of full speed, as vanilla
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = chinese }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT Sub Saharan Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.42
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = sub_saharan } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.14			#1/3 of full speed, as vanilla
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = sub_saharan }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT Central African Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 65 percent penalty (i.e. 61 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.42
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = central_african } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.14			#1/3 of full speed, as vanilla
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = central_african }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT Nomad Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.65 based on original tech group's 75 percent penalty (i.e. 57 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.39
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = nomad_group } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.13			#1/3 of full speed, as vanilla
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = nomad_group }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT High American Tech Spreads - Vanilla speed x 1.67. More provinces means slower spread, speeding up to compensate. Not all regions have new provinces yet, but this tech group was never meant to be 'balanced' anyway
		#########################################################################
		modifier = {
			factor = 1.0
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = high_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.33
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = high_american }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT Central American Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.30
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = mesoamerican } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.10			#1/3 of full speed, as vanilla
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = mesoamerican }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT Andean Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.30
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = andean } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.10			#1/3 of full speed, as vanilla
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = andean }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT North American Tech Spreads - Vanilla speed x 1.33. Only half overhauled, so only half the bonus. Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.32
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = north_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.10			#1/3 of full speed, as vanilla
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = north_american }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#########################################################################
		###BT South American Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.24
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = south_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_printing_press
				any_friendly_coast_border_province = { printing_press = 100 }
			}
		}
		modifier = {
			factor = 0.08			#1/3 of full speed, as vanilla
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = south_american }
				NOT = { any_friendly_coast_border_province = { printing_press = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_printing_press
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					printing_press = 100
				}
			}
		}
		#######################################################################
		###End of BT Tech group specific spread modifiers - printing_press
		#######################################################################
		#BTAddOn note. So in vanilla Lappland (which happens to likely be Protestant) gets flat (no scaling) factor 3 to the printing press, while Paris, Rome, Milan, Venice, Sevilla, Cosntantinople, Moscow, Genoa, and Koeln get scaled factor 0.05.... mkay.... Starting to see what the min-maxers are talking about 
		#when they joke about the Protestant master faith... Rebalancing secondary spreads drastically.
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_estate = estate_church }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_printing_press_clergy
				any_neighbor_province = {
					printing_press = 100
				}
				owner = {
					has_estate = estate_church
					estate_loyalty = {
						estate = estate_church
						loyalty = 40
					}
				}
				has_estate = estate_church
			}
		}			#BTAddOn Note. I don't get it... why does clergy estate boost printing. Something to do with printing the Bible, maybe. Seems a bit thin... and Christian specific as well, maybe even Protestant specific. Anyhow, leaving it until I figure out what it is about, plus it still requires normal spread, so no harm
		#BTAddOn notes - removing this factor entirely. I don't really like how circular it is... need tech for institution, need institution for tech... makes everything seem futile.
		#modifier = {
		#	factor = 0.1			#BTAddOn changed from 1.0. Hitting 15 dip tech was insanely easy very early for many tags which by no means should be this advanced in tech this soon, but changing tech level for effect could have some complications, so lowering effect. For people who should be getting this early, there are plenty of other bonuses.
		#	scale = yes			#BTAddOn new, now scales
		#	force_potential = yes	# Hide the this modifier when potential is false
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_dip_tech15_capital
		#		is_capital = yes
		#		owner = {
		#			dip_tech = 15
		#		}
		#	}
		#}
		modifier = {
			factor = 0.5			#BTAddOn changed from 0.05. Very high dev city in Europe... seems obvious this should be a huge bonus.
			scale = yes			#BTAddOn new, now scales
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = western }
				continent = europe
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_ap
				development = 20
				owner = { technology_group = western }			#BTAddOn new, added western only. Ottomans will get it through spread quickly enough, eastern gets their own version, and nomads shouldn't be getting this early at all... only downside is if someone went crazy and annihilated all European nations. On the other hand, you wipe out the cradle of modern civilisation, technology, and thought, and you get less modern civilisation, technology, and thought =p will still spread normally even then.
				#is_capital = yes			#BTAddOn removed - too limiting
				continent = europe
			}
		}
		#New, weaker, specifically eastern version
		modifier = {
			factor = 0.25
			scale = yes			#BTAddOn new, now scales
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = eastern }
				continent = europe
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_ap
				development = 20
				owner = { technology_group = eastern }
				continent = europe
			}
		}
		#BTAddOn notes - New East Asia specific spread. Like I've said before, we want Asia behind, but not too far behind. This is one of my rare 'pure gameplay' moments, as I find the printing press as an institution... problematic. Also, East Asia was getting stalled here
		modifier = {
			factor = 0.08
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				OR = {
					owner = { technology_group = indian }
					owner = { technology_group = chinese }
				}
				continent = asia
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_an
				development = 30
				OR = {
					owner = { technology_group = indian }
					owner = { technology_group = chinese }
				}
				continent = asia
				is_year = 1700			#50 year greater delay introduced in 1.22, based on China being massively and unrealistically OPed in 1.20 and 1.21
			}
		}
		modifier = {
			factor = 0.3			#BTAddOn changed from 2.0. I can see a bonus for Protestants, but seriously... 2 from owner plus 1 from province non scaling.... nope. Now scaling 0.9 total. If dev is somehow over 30, it might even go faster, but Lappland and N Finland might not see all provinces with printing by 1553
			scale = yes			#BTAddOn new, now scales
			potential = {
				owner = {
					religion_group = christian
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_owner_protestant
				owner = {
					OR = {
						religion = protestant
						religion = reformed
					}
				}
			}
		}
		modifier = {
			factor = 0.6			#BTAddOn changed from 1.0. I can see a bonus for Protestants, but seriously... 2 from owner plus 1 from province non scaling.... nope. Now scaling 0.9 total. If dev is somehow over 30, it might even go faster, but Lappland and N Finland might not see all provinces with printing by 1553
			scale = yes			#BTAddOn new, now scales
			custom_trigger_tooltip = {
				tooltip = tooltip_province_protestant
				OR = {
					religion = reformed
					religion = protestant
				}
			}
		}
		modifier = {
			factor = 1			#Reduced by 80 percent from original 5.0, printing tech and widely available publications spread very slowly on the wild frontier, and it was contributing to overly fast tech spread in native tags
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_printing_press
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = printing_press }
				}
			}
		}
		modifier = {
			factor = 1			#BTAddOn change. As elsewhere, slowing speed of spread for already embraced institutions.
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = printing_press }
				is_in_capital_area = yes			#New, this will prevent institutions from spreading like mad to any country a coloniser gets a border with. Also has the side effect of slowing institution growth on islands... oh well, that isn't actually so bad.
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_printing_press_embraced
				owner = { has_institution = printing_press }
				is_in_capital_area = yes			#New, this will prevent institutions from spreading like mad to any country a coloniser gets a border with. Also has the side effect of slowing institution growth on islands... oh well, that isn't actually so bad.
			}
		}
		#New slower spread bonus for owned provinces not connected to the capital by land
		modifier = {
			factor = 0.2
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = printing_press }
				is_in_capital_area = no			#This version hits islands and overseas colonies
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_printing_press_embraced
				owner = { has_institution = printing_press }
				is_in_capital_area = no			#This version hits islands and overseas colonies
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 12			#BTAddOn changed from 24. Logic in notes at the top of the file.
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 4 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 8 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 16 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 32 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.4
		}
		modifier = {
			factor = 2.0
			overseas_provinces_percentage = 0.5
		}			#BTAddOn new. This modifer is for a highly unusual (and unprecedented historically) thassalocracy. In this rare case, the lower factor above may cause a micro state in a rich area but with many colonies in poor areas to never reach the threshold for embracing.
		modifier = {
			factor = 2.0
			OR = {
				tag = GEN
				tag = VEN
			}
		}			#BTAddOn new. These tags both have the disadvantage of having distant colonies, contrasted with the reality of both being some of the most cutting edge countries in the world at the time. Increasing this here for historical balance.
		modifier = {
			factor = 1.5
			years_of_income = 10.0
		}			#BTAddOn new. If a country is swimming in gold, they can fork out some extra. This will likely keep a few small rich states like Venice slightly ahead in tech and/or with a few extra MP for dev building, but this isn't such a bad thing
		modifier = {
			factor = 0.25
			has_any_disaster = yes
		}			#BTAddOn new. Same logic as vanilla's is at war check
		modifier = {
			factor = 1.5
			is_great_power = yes
		}			#BTAddOn new. Great Powers want to stay great powers, and can probably better afford it anyway. Note this may reintroduce my issue with some countries embracing with only one province, but at least here there is a reason =p
	}
}





#######################################
# Global Trade
#######################################
global_trade = {
	penalty = 0.5

	bonus = {
		merchants = 1
		trade_range_modifier = 0.2			#BTMiscAddon new - One may almost trade half a world away with this, but that is rather the point, no? I'd like to see some unlikely mercantile states pulling trade even if they don't have any colonies. Was originally 0.5, but I didn't want to overshadow all the other institutions
	}


	historical_start_date = 1600.1.1
	historical_start_province = 97 #Holland

	history = {
		OR = {
			AND = {
				is_year = 1600
				area = netherlands_area			#BTMiscAddonChange - Slows spread slightly for later start dates
			}
			AND = {
				is_year = 1625			#BTMiscAddon Note - 20 year penalty here, everyone was way behind the Dutch historically (VOC founded in 1602), but the English and Portuguese came next
				OR = {
					province_id = 236	#London
					province_id = 227	#Lisbon
					province_id = 239	#Bristol
					province_id = 231	#Porto
				}	#BTMiscAddonChange - Slows spread slightly for later start dates
			}
			AND = {
				is_year = 1640			#BTMiscAddon Note - Dutch, English, and Portuguese really dominated here, so giving another 10 year gap before other rich W European capitals get it
				OR = {
					region = low_countries_region
					area = home_counties_area
					area = wessex_area
					area = east_anglia_area
					area = mercia_area
					province_id = 248	#Edinburgh
					province_id = 3019	#Glasgow
					province_id = 373	#Dublin
					province_id = 3024	#Liverpool
					province_id = 12	#Zealand
					province_id = 23	#Bergen
					province_id = 183	#Paris
					province_id = 203	#Lyon
					province_id = 201	#Provence
					province_id = 174	#Bordeaux
					province_id = 172	#Nantes
					province_id = 167	#Rouen
					province_id = 217	#Madrid
					province_id = 224	#Sevilla
					province_id = 121	#Naples
					province_id = 220	#Valencia
					province_id = 213	#Barcelona
					province_id = 45	#Luebeck
					province_id = 44	#Hamburg
					province_id = 1874	#Bremen
				}	#BTMiscAddonChange - Slows spread slightly for later start dates
			}
			AND = {
				is_year = 1650			#BTMiscAddon Note - Another 5 year gap
				OR = {
					region = british_isles_region
					region = france_region
					region = iberia_region
					region = north_german_region
					region = south_german_region
					region = scandinavia_region
					region = italy_region
					region = ireland_area
				}	#BTMiscAddonChange - Slows spread slightly for later start dates
			}
			AND = {
				is_year = 1675
				OR = {
					AND = {
						owner = { technology_group = western }
						OR = {
							continent = europe
							continent = asia
						}
					}
					region = baltic_region
					region = russia_region
				}	#BTMiscAddonChange - Slows spread slightly for later start dates
			}
			AND = {
				is_year = 1700
				OR = {
					AND = {
						owner = { technology_group = eastern }
						OR = {
							continent = europe
							continent = asia
						}
					}
					owner = { technology_group = western }			#BTMiscAddon Note, The colonies, most notably the United States, didn't actually enter into the international trade arena until some years after independance, in the early 19th century, but whatever, don't want the US, or any colonies, too far behind
					region = poland_region
					region = ruthenia_region
					region = balkan_region
					region = carpathia_region
				}	#BTMiscAddonChange - Slows spread slightly for later start dates
			}
			AND = {
				is_year = 1725
				OR = {
					owner = { technology_group = eastern }
					owner = { technology_group = ottoman }			#BTMiscAddon Note - The Ottomans weren't too far behind Western Europe for most of the period.
					region = anatolia_region
					region = mashriq_region
					region = egypt_region
					region = maghreb_region
					region = libya_region
				}	#BTMiscAddonChange - Slows spread slightly for later start dates
			}
			AND = {
				is_year = 1750
				OR = {
					AND = {
						continent = europe
						NOT = { owner = { technology_group = nomad_group } }
					}
					owner = { technology_group = muslim }
				}	#BTMiscAddonChange - Slows spread slightly for later start dates
			}
			AND = {
				is_year = 1775
				OR = {
					AND = {
						continent = asia
						NOT = { owner = { technology_group = nomad_group } }
					}
					owner = { technology_group = indian }
					owner = { technology_group = east_african }
				}	#BTMiscAddonChange - Slows spread slightly for later start dates
			}
			AND = {
				is_year = 1800
				OR = {
					owner = { technology_group = chinese }
					owner = { technology_group = sub_saharan }
					owner = { technology_group = central_african }
					owner = { technology_group = sub_saharan }
				}
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
			AND = {
				is_year = 1810
				owner = { technology_group = nomad_group }
			}	#BTMiscAddonChange - Slows spread slightly for later start dates
		}
	}
	
	can_start = {
		is_year = 1600
		#is_island = no			#BTAddOn removed. Unneccessary detail
		highest_value_trade_node = yes
		owner = {
			any_active_trade_node = {
				is_strongest_trade_power = PREV
				highest_value_trade_node = yes
			}
		}
		custom_trigger_tooltip = {
			tooltip = tooltip_bt_add_new_instituiton_details_f
			OR = {
				province_has_center_of_trade_of_level = 2
				province_has_center_of_trade_of_level = 3
				is_capital = yes
			}
		}
		hidden_trigger = {
			OR = {
				owner = { has_institution = new_world_i }			#BTAddOn new - I want to make sure some 3rd world minor can't rush to fulfill these specific requirements and get the the newest institution in the middle of nowhere, skipping all others.
				is_year = 1625			#BTAddOn new - Just in the case of some oddity where a trade giant has no access to institutions. If after 25 years the country still dominates trade, let it have it, colonialism or not. Not requiring the printing press seems a bit draconian, as much of Europe may not even have it yet.
			}
		}	
	}				#BTAddOn note. Note that this is the first institution which can plausibly hit outside of Europe without massive player intervention, so be warned, if Europe doesn't get its ---- together it loses out, as it should be. Still spreads from CoTs, though.
	start_chance = 35		#in 100 for when a province can_start			#BTAddOn change from 25. All the others are 5, why delay this one. Suspense or to allow a player to boost their trade node perhaps... cheeeap =p ..... oh... higher means better chance. Mouth meet foot.
	
	
	on_start = institution_events.5
	
	
	can_embrace = {
		owner = { has_institution = feudalism }			#BTAddOn new - this makes it so a province must have feudalism before it can embrace anything else. I'm hoping this improves the 1650-no institutions-10 levels behind-to-1675-all institutions-1 level behind problem introduced in the new institution system.
	}

	
	embracement_speed = {
		#These are normally at the top... just the normal province to province spread, replaced by tech group system above
		#modifier = {
		#	factor = 0.25
		#	scale = yes
		#	potential = {
		#		has_port = no
		#	}
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_neighbor_non_port_province_global_trade
		#		has_port = no
		#		any_neighbor_province = {
		#			global_trade = 100
		#			
		#		}
		#	}
		#}
		
		#modifier = {
		#	factor = 0.5
		#	scale = yes
		#	potential = {
		#		has_port = yes
		#	}
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_neighbor_port_province_global_trade
		#		has_port = yes
		#		any_neighbor_province = {
		#			global_trade = 100
		#			
		#		}
		#	}
		#}
		#########################################################################
		###Start of BT Tech group specific spread modifiers - global_trade. Note spread here is quirky compared to others, goes by port or no port, not ownership, and spreads slightly slower compared to others. Also overhauled a few potentials and cleaned up UI a bit
		#########################################################################
		#########################################################################
		###BT Western Tech Spreads - Vanilla speed x 1.67. More provinces means slower spread, speeding up to compensate.
		#########################################################################
		modifier = {
			factor = 0.8
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = western
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.4
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = western
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT Eastern Tech Spreads - Vanilla speed x 1.67, more provinces means slower spread, speeding up to compensate. Then x 0.95 based on original tech group's 20 percent penalty (i.e. 83 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.76
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = eastern
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.38
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = eastern
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT Ottoman Tech Spreads - Vanilla speed x 1.67, more provinces means slower spread, speeding up to compensate. Then x 0.90 based on original tech group's 25 percent penalty (i.e. 80 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.72
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = ottoman
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.36
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = ottoman
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT Muslim Tech Spreads - Vanilla speed x 1.67, more provinces means slower spread, speeding up to compensate. Then x 0.80 based on original tech group's 40 percent penalty (i.e. 71 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.64
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = muslim
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.32
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = muslim
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT Indian Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.37
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = indian
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.18
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = indian
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT East African Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.37
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = east_african
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.18
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = east_african
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT Chinese Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.35
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = chinese
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.17
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = chinese
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT Sub Saharan Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.35
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = sub_saharan
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.17
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = sub_saharan
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT Central African Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 65 percent penalty (i.e. 61 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.35
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = central_african
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.17
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = central_african
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT Nomad Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.65 based on original tech group's 75 percent penalty (i.e. 57 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.32
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = nomad_group
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.16
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = nomad_group
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT High American Tech Spreads - Vanilla speed x 1.67. More provinces means slower spread, speeding up to compensate. Not all regions have new provinces yet, but this tech group was never meant to be 'balanced' anyway
		#########################################################################
		modifier = {
			factor = 0.8
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = high_american
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.4
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = high_american
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT Central American Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.25
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = mesoamerican
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.12
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = mesoamerican
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT Andean Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.25
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = andean
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.12
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = andean
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT North American Tech Spreads - Vanilla speed x 1.33. Only half overhauled, so only half the bonus. Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.26
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = north_american
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.13
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = north_american
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#########################################################################
		###BT South American Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.2
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = south_american
				}
				has_port = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_port_province_global_trade
				any_friendly_coast_border_province = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					technology_group = south_american
				}
				OR = {
					has_port = no
					NOT = { any_friendly_coast_border_province = { global_trade = 100 } }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_neighbor_non_port_province_global_trade
				any_neighbor_province = { global_trade = 100 }
			}
		}
		#######################################################################
		###End of BT Tech group specific spread modifiers - global_trade
		#######################################################################
		#BTAddOn note spread of this institution is much more international and much less Euro centric than previous, but this is intentional, I'd say. Trade power matters much more than geography here, and CoT is king.
		modifier = {
			factor = 0.02
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				NOT = { has_building = trade_depot }
				NOT = { has_building = stock_exchange }
			}			#BTAddOn new - this cleans up UI by making only one or two spread factors show, instead of all three. Might cause some minor confusion to a player because trade depot and stock exchange don't appear to spread it at first, but in my opinion cleaning it up does more good than harm, even so
			has_building = marketplace
		}
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				OR = {
					has_building = marketplace
					has_building = trade_depot
				}
			}			#BTAddOn new - this cleans up UI by making only one spread factor show, instead of all three. Might cause some minor confusion to a player because trade depot and stock exchange don't appear to spread it at first, but in my opinion cleaning it up does more good than harm, even so
			has_building = trade_depot
		}
		modifier = {
			factor = 0.4			#BTAddOn changed from 1.0. Want CoT to be the most important for this institution, rather than buildings and TP, so lowering the bonus here.
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				OR = {
					has_building = trade_depot
					has_building = stock_exchange
				}
			}			#BTAddOn new - this cleans up UI by making only one spread factor show, instead of all three. Might cause some minor confusion to a player because trade depot and stock exchange don't appear to spread it at first, but in my opinion cleaning it up does more good than harm, even so
			has_building = stock_exchange
		}
		##########################################################################################################################################################################################################################################################
		#BTAddOn Note - removing trade power factors for global trade spread entirely. They are messy, complicated, don't encourage proper spread, and are redundant as most major factors in tp (CoT/buildings) also spread global trade themselves, estuaries lose out, but oh well. Leaving this here in case I reconsider.
		##########################################################################################################################################################################################################################################################
		#modifier = {
		#	factor = 0.01 #Not scaled			#BTAddOn changed from 0.4. It is scaled now.
		#	scale = yes
		#	force_potential = yes	# Hide the this modifier when potential is false
		#	potential = {
		#		NOT = { province_trade_power = 10 }
		#	}			#BTAddOn new - this cleans up UI by making only one spread factor show, instead of all three. Might cause some minor confusion, but in my opinion cleaning it up does more good than harm, even so
		#	custom_trigger_tooltip = {			#BTAddOn new - custom tooltip to clean things up, hopefully
		#		tooltip = tooltip_bt_add_new_instituiton_details_s
		#		province_trade_power = 5			#BTAddOn changed from 15. Different avg dev per province and some other minor changes in BT requires this to be tweaked a bit, will now cause most moderately rich provinces to grow slightly, even without a CoT
		#		NOT = { province_trade_power = 10 }			#BTAddOn new - TP spread bonues no longer stack, this disables one when the next is enabled
		#	}
		#}
		#modifier = {
		#	factor = 0.05 #Not Scaled			#BTAddOn changed from 0.8 (total 1.2) It is scaled now. 
		#	scale = yes
		#	force_potential = yes	# Hide the this modifier when potential is false
		#	potential = {
		#		province_trade_power = 5
		#		NOT = { province_trade_power = 20 }
		#	}			#BTAddOn new - this cleans up UI by making only one spread factor show, instead of all three. Might cause some minor confusion, but in my opinion cleaning it up does more good than harm, even so
		#	custom_trigger_tooltip = {			#BTAddOn new - custom tooltip to clean things up, hopefully
		#		tooltip = tooltip_bt_add_new_instituiton_details_t
		#		province_trade_power = 10			#BTAddOn changed from 25. Different avg dev per province and some other minor changes in BT requires this to be tweaked a bit, will now cause most moderately rich provinces to grow, even without a CoT
		#		NOT = { province_trade_power = 20 }			#BTAddOn new - TP spread bonues no longer stack, this disables one when the next is enabled
		#	}
		#}
		#modifier = {
		#	factor = 0.2 #Not Scaled			#BTAddOn changed from 0.16 (total 1.36, this was a smaller bonus than all the others, presumably an oversight). It is scaled now.
		#	scale = yes
		#	force_potential = yes	# Hide the this modifier when potential is false
		#	potential = {
		#		province_trade_power = 10
		#		NOT = { province_trade_power = 40 }
		#	}			#BTAddOn new - this cleans up UI by making only one spread factor show, instead of all three. Might cause some minor confusion, but in my opinion cleaning it up does more good than harm, even so
		#	custom_trigger_tooltip = {			#BTAddOn new - custom tooltip to clean things up, hopefully
		#		tooltip = tooltip_bt_add_new_instituiton_details_u
		#		province_trade_power = 20			#BTAddOn changed from 35. Different avg dev per province and some other minor changes in BT requires this to be tweaked a bit, will now cause most moderately rich provinces to grow, even without a CoT
		#		NOT = { province_trade_power = 40 }			#BTAddOn new - TP spread bonues no longer stack, this disables one when the next is enabled
		#	}
		#}
		#modifier = {
		#	factor = 0.6 #Not Scaled			#BTAddOn changed from 1.4 (total 1.96) It is scaled now.
		#	scale = yes
		#	force_potential = yes	# Hide the this modifier when potential is false
		#	potential = {
		#		province_trade_power = 20
		#		NOT = { province_trade_power = 60 }
		#	}			#BTAddOn new - this cleans up UI by making only one spread factor show, instead of all three. Might cause some minor confusion, but in my opinion cleaning it up does more good than harm, even so
		#	custom_trigger_tooltip = {			#BTAddOn new - custom tooltip to clean things up, hopefully
		#		tooltip = tooltip_bt_add_new_instituiton_details_v
		#		province_trade_power = 40			#BTAddOn changed from 45. Different avg dev per province and some other minor changes in BT requires this to be tweaked a bit, will now cause most moderately rich provinces to grow, even without a CoT
		#		NOT = { province_trade_power = 60 }			#BTAddOn new - TP spread bonues no longer stack, this disables one when the next is enabled
		#	}
		#}
		#modifier = {
		#	factor = 1.2 #Not Scaled			#BTAddOn note - in vanilla max stacked spread was 1.96 non-scaled at 45 tp, now it is 1.2 scaled at 60 tp. It should more or less even out, spreading much faster with high dev, slower with low dev. Also note CoT spread increased by 1.9 and trade build spread reduced by 0.6
		#	scale = yes
		#	force_potential = yes	# Hide the this modifier when potential is false
		#	potential = { province_trade_power = 40 }			#BTAddOn new - this cleans up UI by making only one spread factor show, instead of all three. Might cause some minor confusion, but in my opinion cleaning it up does more good than harm, even so
		#	custom_trigger_tooltip = {			#BTAddOn new - custom tooltip to clean things up, hopefully
		#		tooltip = tooltip_bt_add_new_instituiton_details_w
		#		province_trade_power = 60			#BTAddOn new tier for super high trade power provinces (usually requires a CoT and an estuary, a GCoT, or some obscene mercantalism and dev, but it is very possible.)
		#	}
		#}
		#BTAddOn note - spread from a CoT will depend on other embraced institutions. Spread is /4 for no printing, and impossible without colonialism. If a society can't even travel to colonise, it can't develop bonds, stocks, and international trading mechanisms for commerce a world away, no matter how 
		#important a local trading centre it might be.
		modifier = {
			factor = 0.4			#BTAddOn changed from 0.5. - Colonialism only version
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				OR = {
					province_has_center_of_trade_of_level = 2
					province_has_center_of_trade_of_level = 3
				}
				NOT = {
					AND = {
						printing_press = 100
						owner = { has_institution = printing_press }
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_ao
				OR = {
					province_has_center_of_trade_of_level = 2
					province_has_center_of_trade_of_level = 3
				}
				new_world_i = 100
				NOT = { printing_press = 100 }			#BTAddOn new, for colonial societies without the printing press and simple mechanics (by this point probably most tags with coastal land outside of Europe and the Med)
			}
		}
		modifier = {
			factor = 1.6			#BTAddOn changed from 0.5. - Full strength version
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				OR = {
					province_has_center_of_trade_of_level = 2
					province_has_center_of_trade_of_level = 3
				}
				owner = { has_institution = new_world_i }
				owner = { has_institution = printing_press }			#BTAddOn new, For fully up to date tags (By this point, probably only W Europe and the Ottomans, maybe Morocco and/or progressive parts of Eastern Europe)
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_x
				OR = {
					province_has_center_of_trade_of_level = 2
					province_has_center_of_trade_of_level = 3
				}
				printing_press = 100			#BTAddOn new, For fully up to date provinces (By this point, probably only W Europe and the Ottomans, maybe Morocco and/or progressive parts of Eastern Europe)
				owner = { has_institution = printing_press }			#BTAddOn new, For fully up to date tags (By this point, probably only W Europe and the Ottomans, maybe Morocco and/or progressive parts of Eastern Europe)
			}
		}
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_estate = estate_burghers }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_global_trade_burghers
				any_neighbor_province = {
					global_trade = 100
				}
				owner = {
					has_estate = estate_burghers
					estate_loyalty = {
						estate = estate_burghers
						loyalty = 40
					}
				}
				has_estate = estate_burghers
			}
		}
		
		#These are normally at the top... just the normal province to province spread, replaced by tech group system above
		#modifier = {
		#	factor = 0.25
		#	scale = yes
		#	potential = {
		#		has_port = no
		#	}
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_neighbor_non_port_province_global_trade
		#		has_port = no
		#		any_neighbor_province = {
		#			global_trade = 100
		#			
		#		}
		#	}
		#}
		
		#modifier = {
		#	factor = 0.5
		#	scale = yes
		#	potential = {
		#		has_port = yes
		#	}
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_neighbor_port_province_global_trade
		#		has_port = yes
		#		any_neighbor_province = {
		#			global_trade = 100
		#			
		#		}
		#	}
		#}
		
		modifier = {
			factor = 1			#Reduced by 80 percent from original 5.0, like all previous levels. It was contributing to overly fast tech spread in native tags. Also historically, colonies were extensions of their parent country, and conducted relatively little organised international trade (at a federal/governmental level, I should specify). If they tried, it caused a rather large incident, because it would enrich the colonial parent's rivals. Note this is a somewhat simplified explanation and ignores a few notable cases... but whatever, this works for gameplay and matches the other institutions.
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_global_trade
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = global_trade }
				}
			}
		}
		
		#modifier = {
		#	factor = 0.5
		#	printing_press = 100
		#}			#BTAddOn removed. Just 'cause =p
		modifier = {
			factor = 1			#BTAddOn change. As elsewhere, slowing speed of spread for already embraced institutions.
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = global_trade }
				is_in_capital_area = yes			#New, this will prevent institutions from spreading like mad to any country a coloniser gets a border with. Also has the side effect of slowing institution growth on islands... oh well, that isn't actually so bad.
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_global_trade_embraced
				owner = { has_institution = global_trade }
				is_in_capital_area = yes			#New, this will prevent institutions from spreading like mad to any country a coloniser gets a border with. Also has the side effect of slowing institution growth on islands... oh well, that isn't actually so bad.
			}
		}
		#New slower spread bonus for owned provinces not connected to the capital by land
		modifier = {
			factor = 0.2
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = global_trade }
				is_in_capital_area = no			#This version hits islands and overseas colonies
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_global_trade_embraced
				owner = { has_institution = global_trade }
				is_in_capital_area = no			#This version hits islands and overseas colonies
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 12			#BTAddOn changed from 24. Logic in notes at the top of the file.
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 4 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 8 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 16 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 32 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.4
		}
		modifier = {
			factor = 2.0
			overseas_provinces_percentage = 0.5
		}			#BTAddOn new. This modifer is for a highly unusual (and unprecedented historically) thassalocracy. In this rare case, the lower factor above may cause a micro state in a rich area but with many colonies in poor areas to never reach the threshold for embracing.
		modifier = {
			factor = 2.0
			OR = {
				tag = GEN
				tag = VEN
			}
		}			#BTAddOn new. These tags both have the disadvantage of having distant colonies, contrasted with the reality of both being some of the most cutting edge countries in the world at the time. Increasing this here for historical balance.
		modifier = {
			factor = 1.5
			years_of_income = 10.0
		}			#BTAddOn new. If a country is swimming in gold, they can fork out some extra. This will likely keep a few small rich states like Venice slightly ahead in tech and/or with a few extra MP for dev building, but this isn't such a bad thing
		modifier = {
			factor = 0.25
			has_any_disaster = yes
		}			#BTAddOn new. Same logic as vanilla's is at war check
		modifier = {
			factor = 1.5
			is_great_power = yes
		}			#BTAddOn new. Great Powers want to stay great powers, and can probably better afford it anyway. Note this may reintroduce my issue with some countries embracing with only one province, but at least here there is a reason =p
	}
}


#######################################
# Manufactories
#######################################
manufactories = {
	penalty = 0.5

	bonus = {
		development_cost = -0.05			#BTAddOn new - actually moved from the renaissance. I like it better here, at the dawn of the industrial age, rather than way back when people were trying to return to Classical thought, which I think is better represented by a tech cost reduction.
		global_trade_goods_size_modifier = 0.1
	}

	historical_start_date = 1650.1.1
	historical_start_province = 236 #London			#BTAddOn changed. Switching Enlightenment to Paris and Manufacturing to London, instead of the inverse like in vanilla

	history = {
		OR = {
			AND = {
				is_year = 1650
				continent = europe
				OR = {
					AND = {
						owner = { technology_group = western }
						development = 24
					}
					AND = {
						owner = { technology_group = eastern }
						development = 32
					}
					development = 40
				}
			}
			AND = {
				is_year = 1660
				continent = europe
				OR = {
					AND = {
						owner = { technology_group = western }
						development = 20
					}
					AND = {
						owner = { technology_group = eastern }
						development = 28
					}
					development = 36
				}
			}
			AND = {
				is_year = 1670
				continent = europe
				OR = {
					AND = {
						owner = { technology_group = western }
						development = 16
					}
					AND = {
						owner = { technology_group = eastern }
						development = 24
					}
					development = 32
				}
			}
			AND = {
				is_year = 1680
				continent = europe
				OR = {
					AND = {
						owner = { technology_group = western }
						development = 12
					}
					AND = {
						owner = { technology_group = eastern }
						development = 20
					}
					development = 28
				}
			}
			AND = {
				is_year = 1690
				continent = europe
				OR = {
					AND = {
						owner = { technology_group = western }
						development = 8
					}
					AND = {
						owner = { technology_group = eastern }
						development = 16
					}
					development = 24
				}
			}
			AND = {
				is_year = 1700
				continent = europe
				OR = {
					owner = { technology_group = western }
					AND = {
						owner = { technology_group = eastern }
						development = 12
					}
					development = 20
				}
			}
			AND = {
				is_year = 1725
				OR = {
					AND = {
						owner = { technology_group = western }
						development = 24
					}
					AND = {
						owner = { technology_group = eastern }
						development = 32
					}
					AND = {
						owner = { technology_group = ottoman }
						development = 40
					}
				}
			}
			AND = {
				is_year = 1750
				OR = {
					AND = {
						owner = { technology_group = western }
						development = 16
					}
					AND = {
						owner = { technology_group = eastern }
						development = 22
					}
					AND = {
						owner = { technology_group = ottoman }
						development = 28
					}
					AND = {
						owner = { technology_group = muslim }
						development = 34
					}
					AND = {
						owner = { technology_group = indian }
						development = 40
					}
					AND = {
						owner = { technology_group = east_african }
						development = 40
					}
				}
			}
			AND = {
				is_year = 1775
				OR = {
					AND = {
						owner = { technology_group = western }
						development = 8
					}
					AND = {
						owner = { technology_group = eastern }
						development = 12
					}
					AND = {
						owner = { technology_group = ottoman }
						development = 16
					}
					AND = {
						owner = { technology_group = muslim }
						development = 20
					}
					AND = {
						owner = { technology_group = indian }
						development = 24
					}
					AND = {
						owner = { technology_group = east_african }
						development = 24
					}
					AND = {
						owner = { technology_group = chinese }
						development = 28
					}
					AND = {
						owner = { technology_group = sub_saharan }
						development = 28
					}
				}
			}
			AND = {
				is_year = 1800
				OR = {
					owner = { technology_group = western }
					owner = { technology_group = eastern }
					AND = {
						owner = { technology_group = ottoman }
						development = 8
					}
					AND = {
						owner = { technology_group = muslim }
						development = 10
					}
					AND = {
						owner = { technology_group = indian }
						development = 12
					}
					AND = {
						owner = { technology_group = east_african }
						development = 12
					}
					AND = {
						owner = { technology_group = chinese }
						development = 14
					}
					AND = {
						owner = { technology_group = sub_saharan }
						development = 14
					}
					AND = {
						owner = { technology_group = central_african }
						development = 16
					}
					AND = {
						owner = { technology_group = nomad_group }
						development = 18
					}
				}
			}
		}
	}
	
	can_start = {
		is_year = 1650
		custom_trigger_tooltip = {
			tooltip = tooltip_bt_add_new_instituiton_details_al			#BTcleaner UI
			is_in_capital_area = yes
		}
		#is_island = no			#BTAddon removed
		#is_state = yes			#BTAddon removed
		#development = 20			#BTAddon removed and replaced with below
		OR = {
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_g			#BTcleaner UI
				continent = europe
				development = 20			#BTAddOn notes - lowered from 24 after 1.24. As dev continues to plummet this institution was apparently not spawning very quickly. 20 dev should open up at least a dozen or so options by this point, even worst case scenario for Europe.
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_h			#BTcleaner UI
				development = 30			#BTAddOn notes - Without increasing dev, Nanjing and Beijing are the only candidates, currently, though there are dozens of other candidates who will very likely reach 30 dev by 1650.
			}
		}			#BTAddon new. Now, like vanilla, it is possible for manufactories to hit elsewhere in the world, but now, unlike vanilla, there is a higher chance that it will hit in Europe. Also, if it does hit elsewhere, it will not be some pissant minor =p. Note BT's lower avg dev makes it much more likely to hit outside of europe compared to vanilla as well, so that needed to be corrected anyway.
		custom_trigger_tooltip = {
			tooltip = tooltip_bt_add_new_instituiton_details_j			#BTcleaner UI
			OR = {
				has_building = wharf
				has_building = weapons
				has_building = textile
				has_building = plantations
				has_building = tradecompany
				has_building = mills
			}
		}
		hidden_trigger = {
			global_trade = 100
		}			#This should be automatic already, but I'm not actually sure it is... anyhow, I want to make sure some nothing 3rd world minor without any other institutions can't rush to fulfill these specific requirements and get the the newest institution in the middle of nowhere, skipping all the others.
	}
	start_chance = 5		#in 100 for when a province can_start			#BTAddOn changed from 10 - I actually don't mind this one being delayed a bit, and there should be dozens of candidates in pretty much any game.
	
	
	on_start = institution_events.6
	
	
	can_embrace = {
		owner = { has_institution = feudalism }			#BTAddOn new - this makes it so a province must have feudalism before it can embrace anything else. I'm hoping this improves the 1650-no institutions-10 levels behind-to-1675-all institutions-1 level behind problem introduced in the new institution system.
	}

	
	embracement_speed = {
		#modifier = {
		#	factor = 0.35
		#	scale = yes
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
		#		any_friendly_coast_border_province = {
		#			manufactories = 100
		#		}
		#	}
		#}
		#modifier = {
		#	factor = 0.05
		#	scale = yes
		#	potential = {
		#		NOT = {
		#			any_friendly_coast_border_province = {
		#				manufactories = 100
		#			}
		#		}
		#	}
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_any_neighbor_has_embraced_manufactories
		#		any_neighbor_province = {
		#			NOT = { owned_by = ROOT }
		#			manufactories = 100
		#		}
		#	}
		#}
		#########################################################################
		###Start of BT Tech group specific spread modifiers - manufactories
		#########################################################################
		#########################################################################
		###BT Western Tech Spreads - Vanilla speed roughly x 1.5. More provinces means slower spread, speeding up to compensate.
		#########################################################################
		modifier = {
			factor = 0.5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = western } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.07
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = western }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT Eastern Tech Spreads - Vanilla speed roughly x 1.5, more provinces means slower spread, speeding up to compensate. Then x 0.95 based on original tech group's 20 percent penalty (i.e. 83 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.47
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = eastern } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.07
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = eastern }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT Ottoman Tech Spreads - Vanilla speed roughly x 1.5, more provinces means slower spread, speeding up to compensate. Then x 0.90 based on original tech group's 25 percent penalty (i.e. 80 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.45
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = ottoman } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.07
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = ottoman }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT Muslim Tech Spreads - Vanilla speed x 1.5, more provinces means slower spread, speeding up to compensate. Then x 0.80 based on original tech group's 40 percent penalty (i.e. 71 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.4
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = muslim } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.06
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = muslim }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT Indian Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.26
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = indian } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.04
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = indian }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT East African Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.26
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = east_african } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.04
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = east_african }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT Chinese Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.24
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = chinese } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.04
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = chinese }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT Sub Saharan Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.24
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = sub_saharan } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.04
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = sub_saharan }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT Central African Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 65 percent penalty (i.e. 61 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.23
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = central_african } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.04
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = central_african }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT Nomad Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.65 based on original tech group's 75 percent penalty (i.e. 57 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.22
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = nomad_group } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.03
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = nomad_group }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT High American Tech Spreads - Vanilla speed roughly x 1.5. More provinces means slower spread, speeding up to compensate. Not all regions have new provinces yet, but this tech group was never meant to be 'balanced' anyway
		#########################################################################
		modifier = {
			factor = 0.5
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = high_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.07
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = high_american }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT Central American Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.17
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = mesoamerican } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.02
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = mesoamerican }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT Andean Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.17
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = andean } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.02
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = andean }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT North American Tech Spreads - Vanilla speed x 1.33. Only half overhauled, so only half the bonus. Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.16
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = north_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.02
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = north_american }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#########################################################################
		###BT South American Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.14
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = south_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_manufactories
				any_friendly_coast_border_province = { manufactories = 100 }
			}
		}
		modifier = {
			factor = 0.02
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = south_american }
				NOT = { any_friendly_coast_border_province = { manufactories = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_manufactories
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					manufactories = 100
				}
			}
		}
		#######################################################################
		###End of BT Tech group specific spread modifiers - manufactories
		#######################################################################
		#Manufacturing building spread now affected by currently embraced institutions. If a society can't exchange ideas and technology through global trade, this will spread at 1/5. If a society can't even master simple mechanics like a printing press, though, it will not grow at all. This weakens some isolated
		#tags, but generally most tags which should be able to feasibly develop mass manufactoring should have an oportunity to get the printing press by this time.
		modifier = {
			factor = 0.2			#BTAddOn Notes - 1/5 strength if province has printing press but not global trade
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				NOT = {
					AND = {
						global_trade = 100
						owner = { has_institution = global_trade }
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_j
				OR = {
					has_building = wharf
					has_building = weapons
					has_building = textile
					has_building = plantations
					has_building = tradecompany
					has_building = mills
				}
				printing_press = 100
				NOT = { global_trade = 100 }
			}
		}
		modifier = {
			factor = 1.0			#BTAddOn Notes - same as vanilla spread, if province also has global trade
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = printing_press }
				owner = { has_institution = global_trade }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_y
				OR = {
					has_building = wharf
					has_building = weapons
					has_building = textile
					has_building = plantations
					has_building = tradecompany
					has_building = mills
				}
				global_trade = 100
				owner = { has_institution = global_trade }
			}
		}
		#New spread factors for industrial Europe
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = western }
				NOT = { development = 32 }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_p
				owner = { technology_group = western }
				development = 24
				NOT = { development = 32 }
			}
		}
		modifier = {
			factor = 0.4
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = western }
				development = 24
				NOT = { development = 40 }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_q
				owner = { technology_group = western }
				development = 32
				NOT = { development = 40 }
			}
		}
		modifier = {
			factor = 1.2
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = western }
				development = 32
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_r
				owner = { technology_group = western }
				development = 40
			}
		}
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = eastern }
				NOT = { development = 32 }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_p
				owner = { technology_group = eastern }
				development = 24
				NOT = { development = 32 }
			}
		}
		modifier = {
			factor = 0.2
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = eastern }
				development = 24
				NOT = { development = 40 }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_q
				owner = { technology_group = eastern }
				development = 32
				NOT = { development = 40 }
			}
		}
		modifier = {
			factor = 0.6
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = eastern }
				development = 32
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_r
				owner = { technology_group = eastern }
				development = 40
			}
		}
		modifier = {
			factor = 1			#Reduced by 80 percent from original 5.0, like all previous levels. It was contributing to overly fast tech spread in native tags.
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_manufactories
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = manufactories }
				}
			}
		}
		modifier = {
			factor = 1			#BTAddOn change. As elsewhere, slowing speed of spread for already embraced institutions.
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = manufactories }
				is_in_capital_area = yes			#New, this will prevent institutions from spreading like mad to any country a coloniser gets a border with. Also has the side effect of slowing institution growth on islands... oh well, that isn't actually so bad.
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_manufactories_embraced
				owner = { has_institution = manufactories }
				is_in_capital_area = yes			#New, this will prevent institutions from spreading like mad to any country a coloniser gets a border with. Also has the side effect of slowing institution growth on islands... oh well, that isn't actually so bad.
			}
		}
		#New slower spread bonus for owned provinces not connected to the capital by land
		modifier = {
			factor = 0.2
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = manufactories }
				is_in_capital_area = no			#This version hits islands and overseas colonies
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_manufactories_embraced
				owner = { has_institution = manufactories }
				is_in_capital_area = no			#This version hits islands and overseas colonies
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 12			#BTAddOn changed from 24. Logic in notes at the top of the file.
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 4 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 8 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 16 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 32 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.4
		}
		modifier = {
			factor = 2.0
			overseas_provinces_percentage = 0.5
		}			#BTAddOn new. This modifer is for a highly unusual (and unprecedented historically) thassalocracy. In this rare case, the lower factor above may cause a micro state in a rich area but with many colonies in poor areas to never reach the threshold for embracing.
		modifier = {
			factor = 2.0
			OR = {
				tag = GEN
				tag = VEN
			}
		}			#BTAddOn new. These tags both have the disadvantage of having distant colonies, contrasted with the reality of both being some of the most cutting edge countries in the world at the time. Increasing this here for historical balance.
		modifier = {
			factor = 1.5
			years_of_income = 10.0
		}			#BTAddOn new. If a country is swimming in gold, they can fork out some extra. This will likely keep a few small rich states like Venice slightly ahead in tech and/or with a few extra MP for dev building, but this isn't such a bad thing
		modifier = {
			factor = 0.25
			has_any_disaster = yes
		}			#BTAddOn new. Same logic as vanilla's is at war check
		modifier = {
			factor = 1.5
			is_great_power = yes
		}			#BTAddOn new. Great Powers want to stay great powers, and can probably better afford it anyway. Note this may reintroduce my issue with some countries embracing with only one province, but at least here there is a reason =p
	}
}



#######################################
# Enlightenment
#######################################
enlightenment = {
	penalty = 0.5

	bonus = {
		num_accepted_cultures = 2			#BTAddOn change from culture conversion cost -25 percent. The Enlightenment wasn't about more effective methods of assimilation, it was about bringing enlightenment to the world (okay, maybe a little bit about assimilation, but not enough for a bonus here). Plus, cheaper culture conversion was wiping out too many small cultures too quickly.
		religious_unity = 0.2			#BTAddOn new. Just a little bonus. Plus there is room for 2 bonuses in the UI =D
	}

	historical_start_date = 1715.9.1			#BTAddOn changed - historical date of the death of Louis XIV, the date the French tradition holds as the beginning of the Age of Enlightenment. I can live with the French tradition, because they started it and the other tradtions are a bit vague with a start date. Note this is the only institutional start date changed, and I only do so because it is the last.
	historical_start_province = 183 #Paris			#BTAddOn changed. Switching Enlightenment to Paris and Manufacturing to London, instead of the inverse like in vanilla

	history = {
		OR = {
			AND = {
				is_year = 1716
				continent = europe
				owner = { technology_group = western }
				development = 32
			}
			AND = {
				is_year = 1724
				continent = europe
				owner = { technology_group = western }
				development = 28
			}
			AND = {
				is_year = 1732
				continent = europe
				owner = { technology_group = western }
				development = 24
			}
			AND = {
				is_year = 1740
				continent = europe
				owner = { technology_group = western }
				development = 16
			}
			AND = {
				is_year = 1760
				continent = europe
				owner = { technology_group = eastern }
				development = 24
			}
			AND = {
				is_year = 1780
				owner = { technology_group = western }
			}
			AND = {
				is_year = 1760
				continent = europe
				owner = { technology_group = eastern }
				development = 16
			}
		}
	}
	
	can_start = {
		is_year = 1700
		#BTAddOn notes - completed overhauled requirements and UI display here. It IS possible for the enlightenment to be delayed until a country can fulfill the requirements, this is intentional, there is 50 years for someone to meet the criteria
		#Also note tech to build Unis will likely be reached at least 80-85 years before this, so there should be plenty of Unis around, especially in western Europe with new ai factors in building file.
		OR = {
			has_building = university
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_o
				development = 32
				is_capital = yes
				continent = europe
			}
		}			#Note this or group favours Europe, but it is by no means impossible for this to spawn elsewhere. Anyone can build a uni, though the AI sometimes wont, a player can certainly play the system and build a dozen unis.
		OR = {
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_k
				owner = { has_advisor = natural_scientist }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_l
				owner = { has_advisor = philosopher }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_m
				owner = { full_idea_group = innovativeness_ideas }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_z
				owner = { full_idea_group = humanist_ideas }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_n
				owner = {
					ADM = 5
					MIL = 5
					DIP = 5
				}
			}
			hidden_trigger = { is_year = 1750 } 		#In case the world is in ashes, or some strange twist, mod conflict, etc. makes the above 'or's impossible will hit anywhere with a university or in a rich euro city by 1750s
		}
		hidden_trigger = {
			manufactories = 100
		}			#This should be automatic already, but I'm not actually sure it is... anyhow, I want to make sure some nothing 3rd world minor without any other institutions can't rush to fulfill these specific requirements and get the the newest institution in the middle of nowhere, skipping all the others.
		#BTAddOn notes - removed all the misc here, replacing it with above
		#is_island = no			#BTAddon removed
		#is_state = yes			#BTAddon removed
		#OR = {
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_has_seat_in_parliament
		#		has_seat_in_parliament = yes
		#	}
		#	has_building = university
		#	AND = {
		#		continent = europe
		#		development = 20
		#		owner = {
		#			ADM = 5
		#			MIL = 5
		#			DIP = 5
		#		}
		#	}
		#	
		#}
	}
	start_chance = 5		#in 100 for when a province can_start			#BTAddOn changed from 10 - I actually don't mind this one being delayed a bit, it is the last one and shouldn't average before 1720s
	
	
	on_start = institution_events.7
	
	
	can_embrace = {
		owner = { has_institution = feudalism }			#BTAddOn new - this makes it so a province must have feudalism before it can embrace anything else. I'm hoping this improves the 1650-no institutions-10 levels behind-to-1675-all institutions-1 level behind problem introduced in the new institution system.
	}

	
	embracement_speed = {
		#modifier = {
		#	factor = 0.1
		#	scale = yes
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
		#		any_friendly_coast_border_province = {
		#			enlightenment = 100
		#		}
		#	}
		#}
		#modifier = {
		#	factor = 0.1
		#	scale = yes
		#	potential = {
		#		NOT = {
		#			any_friendly_coast_border_province = {
		#				enlightenment = 100
		#			}
		#		}
		#	}
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_any_neighbor_has_embraced_enlightenment
		#		any_neighbor_province = {
		#			NOT = { owned_by = ROOT }
		#			enlightenment = 100
		#		}
		#	}
		#}
		#########################################################################
		###Start of BT Tech group specific spread modifiers - enlightenment
		#########################################################################
		#########################################################################
		###BT Western Tech Spreads - Vanilla speed roughly x 1.5. More provinces means slower spread, speeding up to compensate.
		#########################################################################
		modifier = {
			factor = 0.16
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = western } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.16
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = western }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT Eastern Tech Spreads - Vanilla speed roughly x 1.5, more provinces means slower spread, speeding up to compensate. Then x 0.95 based on original tech group's 20 percent penalty (i.e. 83 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.15
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = eastern } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.1			#2/3 foreign spread for medium high tech groups
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = eastern }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT Ottoman Tech Spreads - Vanilla speed roughly x 1.5, more provinces means slower spread, speeding up to compensate. Then x 0.90 based on original tech group's 25 percent penalty (i.e. 80 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.14
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = ottoman } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.09			#2/3 foreign spread for medium high tech groups
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = ottoman }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT Muslim Tech Spreads - Vanilla speed x 1.5, more provinces means slower spread, speeding up to compensate. Then x 0.80 based on original tech group's 40 percent penalty (i.e. 71 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.12
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = muslim } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.06			#Halving foreign spread for medium and medium low tech groups
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = muslim }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT Indian Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.07
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = indian } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.03			#Halving foreign spread for medium and medium low tech groups
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = indian }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT East African Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.75 based on original tech group's 50 percent penalty (i.e. 67 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.07
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = east_african } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.03			#Halving foreign spread for medium and medium low tech groups
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = east_african }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT Chinese Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.07
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = chinese } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.02			#1/3 foreign spread for low tech groups
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = chinese }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT Sub Saharan Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 60 percent penalty (i.e. 63 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.07
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = sub_saharan } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.02			#1/3 foreign spread for low tech groups
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = sub_saharan }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT Central African Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.70 based on original tech group's 65 percent penalty (i.e. 61 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.07
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = central_african } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.02			#1/3 foreign spread for low tech groups
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = central_african }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT Nomad Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.65 based on original tech group's 75 percent penalty (i.e. 57 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.06
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = nomad_group } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.02			#1/3 foreign spread for low tech groups
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = nomad_group }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT High American Tech Spreads - Vanilla speed roughly x 1.5. More provinces means slower spread, speeding up to compensate. Not all regions have new provinces yet, but this tech group was never meant to be 'balanced' anyway
		#########################################################################
		modifier = {
			factor = 0.16
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = high_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.16
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = high_american }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT Central American Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = mesoamerican } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.01			#1/4 foreign spread for very low tech groups
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = mesoamerican }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT Andean Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.50 based on original tech group's 150 percent penalty (i.e. 40 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = andean } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.01			#1/4 foreign spread for very low tech groups
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = andean }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT North American Tech Spreads - Vanilla speed x 1.33. Only half overhauled, so only half the bonus. Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = north_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.01			#1/4 foreign spread for very low tech groups
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = north_american }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#########################################################################
		###BT South American Tech Spreads - Vanilla speed. No new provinces, so normal spread speed. Then x 0.40 based on original tech group's 250 percent penalty (i.e. 29 percent of normal speed)
		#########################################################################
		modifier = {
			factor = 0.04
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { technology_group = south_american } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_enlightenment
				any_friendly_coast_border_province = { enlightenment = 100 }
			}
		}
		modifier = {
			factor = 0.01			#1/4 foreign spread for very low tech groups
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { technology_group = south_american }
				NOT = { any_friendly_coast_border_province = { enlightenment = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_neighbor_has_embraced_enlightenment
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					enlightenment = 100
				}
			}
		}
		#######################################################################
		###End of BT Tech group specific spread modifiers - enlightenment
		#######################################################################
		modifier = {
			factor = 0.3			#BTAddOn change from 5.0, also now scaled. Greenland with a university is still Greenland, and Paris without a university is still Paris.
			scale = yes			#BTAddOn new - now scaled like most others
			has_building = university
		}
		#BTAddOn note - I know, ra ra for democracy and all that, but simply having representation at a federal level doesn't automatically mean that the people are 'englightened'
		#modifier = {
		#	factor = 5
		#	potential = {
		#		owner = {
		#			has_parliament = yes
		#		}
		#	}
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_has_seat_in_parliament
		#		has_seat_in_parliament = yes
		#	}
		#}
		#BTAddOn note - removing the capital only spreads. The whole point of the enlightenment was the 0.1 percent of rich nobles in the royal court of the capital weren't the only ones who got respect, not reason to make all growth capital only. Introducing new spreads below.
		#modifier = {
		#	factor = 1.5
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_philosopher_capital
		#		is_capital = yes
		#		owner = {
		#			advisor = philosopher
		#			dip_tech = 20
		#		}
		#	}
		#}
		#modifier = {
		#	factor = 3
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_scientist_capital
		#		is_capital = yes
		#		owner = {
		#			advisor = natural_scientist
		#			dip_tech = 20
		#		}
		#	}
		#}
		#modifier = {
		#	factor = 5
		#	custom_trigger_tooltip = {
		#		tooltip = tooltip_full_innovativeness
		#		is_capital = yes
		#		owner = {
		#			full_idea_group = innovativeness_ideas
		#		}
		#	}
		#}
		#BTAddOn note - Bunch of new spread factors for the Enlightenment. Note they are mostly country-wide, unlike vanilla, all scaled, unlike vanilla, all very slow, unlike vanilla, and generally a huge departure from the way it previously spread. I didn't really like vanilla spread here, hopefully this improves it...
		#I expect, generally, that the enlightenment will be embraced more slowly, but also at lower cost and by more countries by the end of the 18th century. I expect there will also be a somewhat larger divide between richer areas and poorer areas, due to the introduction of scaling. All this is intentional.
		#First two modifers are western tech only, and will hopefully see the Enlightenment spreading historically throughout Western Europe and America. The 3rd through 5th are advisor related spreads requiring manufacturies. 6th and 7th are from ideas and require at least global trade, and 8th is a all 5 or above leader
		#based bonus which everyone is eligible for. Hopefully this mix of requirements will keep everyone growing, but the right ones growing fast. Also will allow a clever player with a focus on tech to bring a normally uncompetitive tech group forward and compete, albeit with varying degrees of difficulty.
		#A 40 dev province with an uni owned by a great power with a lvl 3 natural scientist and both innovative and humanist ideas should see the enlightenment in 2-3 years (only slightly slower than vanilla) but spread can theoretically take hundreds of years, too (not hit before end date). Testing required.
		#BTAddOn note - 1st modifier. Western tech great powers automatically get medium spread
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				is_in_capital_area = yes
				owner = {
					technology_group = western
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_ac
				is_in_capital_area = yes
				owner = {
					is_great_power = yes
					capital_scope = { continent = europe }
					technology_group = western
				}
			}
		}
		#BTAddOn note - 2nd modifier. Former colonial nations bonus. Former colonies are really a mixed bag... they adopted some of the concepts and ideas of the Enlightenment, like free will and religious tolerance with great abandon. On the other hand, they resisted other enlightenment ideas, like racial equality and inalienable human rights, rather fiercely. Giving them a medium boost anyway.
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				is_in_capital_area = yes
				owner = {
					is_former_colonial_nation = yes
					technology_group = western
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_ad
				is_in_capital_area = yes
				owner = {
					is_former_colonial_nation = yes
					technology_group = western
				}
			}
		}
		#BTAddOn note - 3rd - 5th modifiers. Nation-wide bonuses from advisors. Requires owner to have embraced manufacturing to prevent spread too early in areas still developing. Note vanilla accomplishes the same thing by doing tech 20 instead.
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					has_institution = manufactories
					NOT = {
						OR = {
							philosopher = 2
							natural_scientist = 2
						}
					 }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_ae
				owner = {
					has_institution = manufactories
					OR = {
						philosopher = 1
						natural_scientist = 1
					}
					NOT = {
						OR = {
							philosopher = 2
							natural_scientist = 2
						}
					 }
				}
			}
		}
		#BTAddOn note - 3rd - 5th modifiers. Nation-wide bonuses from advisors. Requires owner to have embraced manufacturing to prevent spread too early in areas still developing. Note vanilla accomplishes the same thing by doing tech 20 instead.
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					has_institution = manufactories
					OR = {
						philosopher = 2
						natural_scientist = 2
					}
					NOT = {
						OR = {
							philosopher = 3
							natural_scientist = 3
						}
					 }
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_af
				owner = {
					has_institution = manufactories
					OR = {
						philosopher = 2
						natural_scientist = 2
					}
					NOT = {
						OR = {
							philosopher = 3
							natural_scientist = 3
						}
					 }
				}
			}
		}
		#BTAddOn note - 3rd - 5th modifiers. Nation-wide bonuses from advisors. Requires owner to have embraced manufacturing to prevent spread too early in areas still developing. Note vanilla accomplishes the same thing by doing tech 20 instead.
		modifier = {
			factor = 0.2
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = {
					has_institution = manufactories
					OR = {
						philosopher = 3
						natural_scientist = 3
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_ag
				owner = {
					has_institution = manufactories
					OR = {
						philosopher = 3
						natural_scientist = 3
					}
				}
			}
		}
		#BTAddOn note - 6th modifiers. Innovative idea spread. Requires at least global trade to prevent devloping tags from getting it too early. Note this is earlier than the advisor spread, which requires manufacturies. Hopefully this speeds spread in developed areas while still giving poorer areas a chance.
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { has_institution = global_trade } }
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_m
				owner = {
					has_institution = global_trade
					full_idea_group = innovativeness_ideas
				}
			}
		}
		#BTAddOn note - 7th modifiers. Humanist idea spread. Requires at least global trade to prevent devloping tags from getting it too early. Note this is earlier than the advisor spread, which requires manufacturies. Hopefully this speeds spread in developed areas while still giving poorer areas a chance.
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = { owner = { has_institution = global_trade } }
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_z
				owner = {
					has_institution = global_trade
					full_idea_group = humanist_ideas
				}
			}
		}
		#BTAddOn note - 8th modifiers. Epic leader bonus
		modifier = {
			factor = 0.1
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_bt_add_new_instituiton_details_n
				owner = {
					ADM = 5
					MIL = 5
					DIP = 5
				}
			}
		}
		modifier = {
			factor = 1			#Reduced by 80 percent from original 5.0, like all previous levels. It was contributing to overly fast tech spread in native tags.
			scale = yes
			potential = {
				owner = {
					is_colonial_nation = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_colonial_overlord_enlightenment
				OR = {
					has_port = yes
					is_capital = yes
				}
				owner = {
					is_colonial_nation = yes
					overlord = { has_institution = enlightenment }
				}
			}
		}
		modifier = {
			factor = 1			#BTAddOn change. As elsewhere, slowing speed of spread for already embraced institutions.
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = enlightenment }
				is_in_capital_area = yes			#New, this will prevent institutions from spreading like mad to any country a coloniser gets a border with. Also has the side effect of slowing institution growth on islands... oh well, that isn't actually so bad.
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_enlightenment_embraced
				owner = { has_institution = enlightenment }
				is_in_capital_area = yes			#New, this will prevent institutions from spreading like mad to any country a coloniser gets a border with. Also has the side effect of slowing institution growth on islands... oh well, that isn't actually so bad.
			}
		}
		#New slower spread bonus for owned provinces not connected to the capital by land
		modifier = {
			factor = 0.2
			scale = yes
			force_potential = yes	# Hide the this modifier when potential is false
			potential = {
				owner = { has_institution = enlightenment }
				is_in_capital_area = no			#This version hits islands and overseas colonies
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_enlightenment_embraced
				owner = { has_institution = enlightenment }
				is_in_capital_area = no			#This version hits islands and overseas colonies
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 12			#BTAddOn changed from 24. Logic in notes at the top of the file.
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 4 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 8 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 16 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 1.5			#BTAddOn changed from 2.0. If a country is behind in tech, it wants to catch up, sure. But vanilla authorises AI to spend 32 years' income on embracement... uh uh. If a tag is that far behind, it will need its cash too.
			neighbors_tech_discount = 0.4
		}
		modifier = {
			factor = 2.0
			overseas_provinces_percentage = 0.5
		}			#BTAddOn new. This modifer is for a highly unusual (and unprecedented historically) thassalocracy. In this rare case, the lower factor above may cause a micro state in a rich area but with many colonies in poor areas to never reach the threshold for embracing.
		modifier = {
			factor = 2.0
			OR = {
				tag = GEN
				tag = VEN
			}
		}			#BTAddOn new. These tags both have the disadvantage of having distant colonies, contrasted with the reality of both being some of the most cutting edge countries in the world at the time. Increasing this here for historical balance.
		modifier = {
			factor = 1.5
			years_of_income = 10.0
		}			#BTAddOn new. If a country is swimming in gold, they can fork out some extra. This will likely keep a few small rich states like Venice slightly ahead in tech and/or with a few extra MP for dev building, but this isn't such a bad thing
		modifier = {
			factor = 0.25
			has_any_disaster = yes
		}			#BTAddOn new. Same logic as vanilla's is at war check
		modifier = {
			factor = 1.5
			is_great_power = yes
		}			#BTAddOn new. Great Powers want to stay great powers, and can probably better afford it anyway. Note this may reintroduce my issue with some countries embracing with only one province, but at least here there is a reason =p
	}
}