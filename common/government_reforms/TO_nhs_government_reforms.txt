
#02 NHS

elysian_empire_legacy = {
	icon = "castle"
	allow_normal_conversion = no
	monarchy = yes
	legacy_government = yes
	fixed_rank = 2
	valid_for_nation_designer = no
	valid_for_new_country = no
	allow_convert = no
	modifiers = {
		legitimacy = 1
		stability_cost_modifier = 0.20
		global_autonomy = -0.05
		max_states = 3
	}
	ai = {
		factor = 0
	}
}
senatorial_empire_legacy = {
	icon = "castle"
	allow_normal_conversion = no
	monarchy = yes
	legacy_government = yes
	fixed_rank = 3
	valid_for_nation_designer = no
	valid_for_new_country = no
	allow_convert = no
	modifiers = {
		legitimacy = 1
		stability_cost_modifier = -0.10
		global_autonomy = -0.075
		max_absolutism = -15
		max_states = 4
	}
	conditional = {
		allow = { has_dlc = "Common Sense" }
		has_parliament = yes
	}

}
elysian_patriarchy_legacy = {
	icon = "castle"
	allow_normal_conversion = no
	religion = yes
	legacy_government = yes
	fixed_rank = 3
	valid_for_nation_designer = no
	valid_for_new_country = no
	allow_convert = no
	modifiers = {
		tolerance_own = 2
		tolerance_heretic = -1
		global_autonomy = -0.075
		max_states = 4
		max_absolutism = 5
	}
	conditional = {
		allow = { has_dlc = "Common Sense" }
		has_parliament = yes
	}
	conditional = {
		allow = {
			has_dlc = "Common Sense"
		}
		has_devotion = yes
	}
}
elysian_patriarchy_2_legacy = {
	icon = "castle"
	allow_normal_conversion = no
	religion = yes
	legacy_government = yes
	valid_for_nation_designer = no
	valid_for_new_country = no
	allow_convert = no
	modifiers = {
		tolerance_own = 2
		tolerance_heretic = -1
		max_states = 3
		max_absolutism = 5
		global_autonomy = -0.05
	}
	conditional = {
		allow = {
			has_dlc = "Common Sense"
		}
		has_devotion = yes
	}
	
}
elysian_absolute_empire_legacy = {
	icon = "castle"
	allow_normal_conversion = no
	monarchy = yes
	legacy_government = yes
	fixed_rank = 3
	valid_for_nation_designer = no
	valid_for_new_country = no
	allow_convert = no
	modifiers = {
		legitimacy = 1
		yearly_absolutism = 0.5
		max_absolutism = 10
		unjustified_demands = -0.15
		max_states = 3
		global_autonomy = -0.075
	}
	conditional = {
		allow = { has_dlc = "Common Sense" }
		has_parliament = no
	}
}

elysian_republic_legacy = {
	icon = "castle"
	allow_normal_conversion = no
	republic = yes
	legacy_government = yes
	fixed_rank = 3
	valid_for_nation_designer = no
	valid_for_new_country = no
	republican_name = yes
	royal_marriage = no
	allow_convert = no
	duration = 4
	modifiers = {
		core_creation = -0.1
		production_efficiency = 0.1
		years_of_nationalism = -5
		max_absolutism = -15
		max_states = 3
	}
	custom_attributes = {
		locked_government_type = yes
	}
	conditional = {
		allow = { has_dlc = "Common Sense" }
		has_parliament = yes
	}
	custom_attributes = {
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
	}
}

nhs_noble_republic_legacy = {
	icon = "castle"
	allow_normal_conversion = no
	republic = yes
	legacy_government = yes
	fixed_rank = 3
	valid_for_nation_designer = no
	valid_for_new_country = no
	republican_name = no
	royal_marriage = yes
	allow_convert = no
	duration = 6
	modifiers = {
		discipline = 0.05
		land_morale = 0.1
		max_absolutism = -5
		administrative_efficiency = 0.05
		max_states = 4
	}
	custom_attributes = {
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
	}
	conditional = {
		allow = { has_dlc = "Common Sense" }
		has_parliament = yes
	}
}

elysian_revolutionary_republic_legacy = {
	icon = "castle"
	allow_normal_conversion = no
	republic = yes
	legacy_government = yes
	fixed_rank = 3
	valid_for_nation_designer = no
	valid_for_new_country = no
	republican_name = yes
	royal_marriage = no
	allow_convert = no
	duration = 4
	modifiers = {
		land_morale = 0.10
		global_autonomy = -0.2
		years_of_nationalism = -5
		max_absolutism = -15
		max_states = 3
	}
	conditional = {
		allow = {
			has_dlc = "Rights of Man"
		}
		factions = {
			rr_jacobins
			rr_royalists
			rr_girondists
		}
	}
	conditional = {
		allow = { has_dlc = "Common Sense" }
		has_parliament = yes
	}
	custom_attributes = {
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
	}
}

elysian_revolutionary_empire_legacy = {
	icon = "castle"
	allow_normal_conversion = no
	monarchy = yes
	legacy_government = yes
	fixed_rank = 3
	valid_for_new_country = no
	allow_convert = no
	modifiers = {
		global_manpower_modifier = 0.25
		land_morale = 0.10
		global_autonomy = -0.2
		administrative_efficiency = 0.05
		max_absolutism = 10
		max_states = 3
	}
	ai = {
		factor = 0
	}
}

nhs_intermediary_government_legacy = {
	icon = "elysian_republic"
	allow_normal_conversion = no
	republic = yes
	legacy_government = yes
	#lock_level_when_selected = yes
	valid_for_new_country = no
	allow_convert = no
	fixed_rank = 3
	duration = 4
	modifiers = {
	}
	custom_attributes = {
		locked_government_type = yes
	}
}

elysian_empire = {
	icon = "elysian_empire"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		#has_reform = elysian_empire
		OR = {
			tag = NHS
			tag = ELY
			tag = ERF
			tag = ELR
			tag = ERR
		}
	}
	legacy_equivalent = elysian_empire_legacy
	fixed_rank = 2
	#lock_level_when_selected = yes
	valid_for_new_country = no
	trigger = {
		NOT = { have_had_reform = senatorial_empire }
		if = {
			limit = {
				tag = ELY
			}
			NOT = { tag = ELY }
		}
		else_if = {
			limit = {
				tag = ERF
			}
			NOT = { tag = ERF }
		}
		else_if = {
			limit = {
				tag = ELR
			}
			NOT = { tag = ELR }
		}
		else_if = {
			limit = {
				tag = ERR
			}
			NOT = { tag = ERR }
		}
	}
	modifiers = {
		legitimacy = 1
		stability_cost_modifier = 0.20
		max_states = 1
	}
	custom_attributes = {
		locked_government_type = yes
	}
}

senatorial_empire = {
	icon = "senatorial_empire"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		#has_reform = senatorial_empire
		OR = {
			tag = NHS
			tag = ELY
			tag = ERF
			tag = ELR
			tag = ERR
		}
	}
	legacy_equivalent = senatorial_empire_legacy
	trigger = {
		tag = ELY
		NOT = { has_reform = nhs_reduce_senate_reform }
	}
	fixed_rank = 3
	#lock_level_when_selected = yes
	valid_for_new_country = no
	modifiers = {
		legitimacy = 1
		max_absolutism = -15
		global_autonomy = -0.025
		max_states = 2
	}
	conditional = {
		allow = { has_dlc = "Common Sense" }
		has_parliament = yes
	}
	custom_attributes = {
		locked_government_type = yes
	}
}
elysian_patriarchy = {
	icon = "elysian_patriarchy"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		has_reform = elysian_patriarchy
	}
	legacy_equivalent = elysian_patriarchy_legacy
	fixed_rank = 3
	lock_level_when_selected = yes
	valid_for_new_country = no
	modifiers = {
		tolerance_own = 2
		tolerance_heretic = -1
		global_autonomy = -0.025
		max_states = 2
		max_absolutism = 5
	}
	conditional = {
		allow = { has_dlc = "Common Sense" }
		has_parliament = yes
	}
	custom_attributes = {
		locked_government_type = yes
	}
}
elysian_patriarchy_2 = {
	icon = "elysian_patriarchy_2"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		has_reform = elysian_patriarchy_2
	}
	legacy_equivalent = elysian_patriarchy_2_legacy
	lock_level_when_selected = yes
	valid_for_new_country = no
	modifiers = {
		tolerance_own = 2
		tolerance_heretic = -1
		max_states = 1
		max_absolutism = 5
	}
	
	custom_attributes = {
		locked_government_type = yes
	}
}
elysian_absolute_empire = {
	icon = "elysian_absolute_empire"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		#has_reform = elysian_absolute_empire
		OR = {
			tag = NHS
			tag = ELY
			tag = ERF
			tag = ELR
			tag = ERR
		}
	}
	trigger = {
		tag = ELY
		has_reform = nhs_reduce_senate_reform
	}
	legacy_equivalent = elysian_absolute_empire_legacy
	#lock_level_when_selected = yes
	valid_for_new_country = no
	fixed_rank = 3
	modifiers = {
		legitimacy = 1
		yearly_absolutism = 0.4
		max_states = 2
		unjustified_demands = -0.15
		global_autonomy = -0.025
	}
	conditional = {
		allow = { has_dlc = "Common Sense" }
		has_parliament = no
	}
	custom_attributes = {
		locked_government_type = yes
	}
}

elysian_republic = {
	icon = "elysian_republic"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		OR = {
			tag = NHS
			tag = ELY
			tag = ERF
			tag = ELR
			tag = ERR
		}
	}
	trigger = {
		OR = {
			custom_trigger_tooltip = {
				tooltip = nhs_no_infighting_disaster
				NOT = { has_country_flag = republican_infighting }
			}
			custom_trigger_tooltip = {
				tooltip = nhs_status_quo_infighting_tt
				NOT = { has_country_flag = nhs_status_quo_flag }
			}
		}
	}
	legacy_equivalent = elysian_republic_legacy
	#lock_level_when_selected = yes
	valid_for_new_country = no
	fixed_rank = 3
	duration = 4
	modifiers = {
		core_creation = -0.1
		production_efficiency = 0.1
		years_of_nationalism = -5
		max_absolutism = -25
		max_states = 1
	}
	custom_attributes = {
		locked_government_type = yes
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
	}
}

nhs_intermediary_government = {
	icon = "elysian_republic"
	allow_normal_conversion = no
	potential = {
		always = no
	}
	legacy_equivalent = nhs_intermediary_government_legacy
	#lock_level_when_selected = yes
	valid_for_new_country = no
	fixed_rank = 3
	duration = 4
	modifiers = {
	}
	custom_attributes = {
		locked_government_type = yes
	}
}

nhs_noble_republic = {
	icon = "nhs_noble_republic"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		OR = {
			tag = NHS
			tag = ELY
			tag = ERF
			tag = ELR
			tag = ERR
		}
	}
	trigger = {
		OR = {
			custom_trigger_tooltip = {
				tooltip = nhs_in_infighting_disaster
				has_country_flag = republican_infighting
				NOT = { has_country_flag = nhs_status_quo_flag }
				NOT = { has_country_flag = nhs_opposition_victory_flag }
			}
			custom_trigger_tooltip = {
				tooltip = nhs_oligarch_victory_flag_tt
				has_country_flag = nhs_oligarch_victory_flag
			}
		}
	}
	legacy_equivalent = nhs_noble_republic_legacy
	#lock_level_when_selected = yes
	valid_for_new_country = no
	fixed_rank = 3
	duration = 6
	modifiers = {
		discipline = 0.05
		land_morale = 0.1
		max_absolutism = -5
		administrative_efficiency = 0.05
		max_states = 1
	}
	custom_attributes = {
		locked_government_type = yes
		enables_plutocratic_idea_group = no
		enables_aristocratic_idea_group = yes
	}
}

elysian_revolutionary_republic = {
	icon = "revolutionary_republic"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		OR = {
			tag = NHS
			tag = ELY
			tag = ERF
			tag = ELR
			tag = ERR
		}
	}
	trigger = {
		custom_trigger_tooltip = {
			tooltip = nhs_opposition_victory_flag_tt
			has_country_flag = nhs_opposition_victory_flag
		}
	}
	legacy_equivalent = elysian_revolutionary_republic_legacy
	#lock_level_when_selected = yes
	valid_for_new_country = no
	fixed_rank = 3
	duration = 4
	modifiers = {
		land_morale = 0.10
		global_autonomy = -0.2
		years_of_nationalism = -5
		max_absolutism = -15
		max_states = 1
	}
	custom_attributes = {
		locked_government_type = yes
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
	}
	conditional = {
		allow = {
			has_dlc = "Rights of Man"
		}
		factions = {
			rr_jacobins
			rr_royalists
			rr_girondists
		}
	}
}

elysian_revolutionary_empire = {
	icon = "elysian_revolutionary_empire"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		has_reform = elysian_revolutionary_empire
	}
	legacy_equivalent = elysian_revolutionary_empire_legacy
	fixed_rank = 3
	lock_level_when_selected = yes
	valid_for_new_country = no
	modifiers = {
		global_manpower_modifier = 0.25
		land_morale = 0.10
		global_autonomy = -0.2
		administrative_efficiency = 0.05
		max_absolutism = 10
	}
	custom_attributes = {
		locked_government_type = yes
	}
}


nhs_native_cadre = {
	icon = "shaman"
	allow_normal_conversion = yes
	potential = {
		OR = {
			tag = NHS
			tag = ELY
			tag = ERF
			tag = ELR
			tag = ERR
		}
		has_estate = estate_nhs_native_council
	}
	trigger = {
		not_revoked_privileges = yes
	}
	modifiers = {
		advisor_pool = 1
		free_leader_pool = 1
		max_states = 3
	}
}

#deliberative_assembly

# parliamentary_reform defined in common file

royal_decree_reform_ely = {
	icon = "king"
	potential = {
		has_reform = senatorial_empire
	}
	allow_normal_conversion = yes
	modifiers = {
		max_absolutism = 5
	}
}

aristocratic_court_reform_ely = {
	icon = "soldiers_2"
	potential = {
		has_reform = senatorial_empire
	}
	allow_normal_conversion = yes
	modifiers = {
		army_tradition_decay = -0.005
	}
}

general_estates_reform_ely = {
	icon = "paper_with_seal"
	potential = {
		has_reform = senatorial_empire
	}
	allow_normal_conversion = yes
	modifiers = {
		production_efficiency = 0.1
	}
}


#absolute_rule_vs_constitutional

letat_cest_moi_reform_ely = {
	icon = "queen"
	potential = {
		OR = {
			has_reform = elysian_empire
			has_reform = elysian_revolutionary_empire
			has_reform = elysian_absolute_empire
			AND = {
				has_reform = senatorial_empire
				OR = {
					current_age = age_of_absolutism
					current_age = age_of_revolutions
				}
				OR = {
					has_reform = nhs_expand_senate_of_cities
					has_reform = nhs_consolidate_senate_of_cities
				}
			}
		}
	}
	trigger = {
		NOT = { has_reform = senatorial_empire }
	}
	allow_normal_conversion = yes
	modifiers = {
		max_states = 5
	}
}

regional_representation_reform_ely = {
	icon = "assembly_hall"
	potential = {
		OR = {
			has_reform = elysian_revolutionary_empire
			has_reform = elysian_absolute_empire
			AND = {
				has_reform = senatorial_empire
				OR = {
					current_age = age_of_absolutism
					current_age = age_of_revolutions
				}
				OR = {
					has_reform = nhs_expand_senate_of_cities
					has_reform = nhs_consolidate_senate_of_cities
				}
			}
		}
	}
	trigger = {
		NOT = { has_reform = senatorial_empire }
	}
	allow_normal_conversion = yes
	modifiers = {
		min_autonomy_in_territories = -0.10
	}
}

nhs_expand_senate_of_cities = {
	icon = "parliament"
	potential = {
		has_reform = senatorial_empire
	}
	modifiers = {
		core_creation = -0.10
		diplomatic_upkeep = -1
		max_absolutism = -10
	}
	effect = {
		clr_country_flag = nhs_remember_expanding_senate
	}
}

nhs_consolidate_senate_of_cities = {
	icon = "assembly_hall"
	potential = {
		has_reform = senatorial_empire
	}
	modifiers = {
		free_adm_policy = 1
		possible_adm_policy = 1
		state_maintenance_modifier = -0.20
		stability_cost_modifier = -0.20
	}
	effect = {
		set_country_flag = nhs_remember_consolidating_senate
	}
}

#separation_of_power

nhs_reduce_senate_reform = {
	icon = "nhs_reduce_senate_reform"
	allow_normal_conversion = yes
	modifiers = {
		max_absolutism = 5
		yearly_absolutism = 0.1
	}
	potential = {
		OR = {
			has_reform = senatorial_empire
			has_reform = elysian_absolute_empire
			has_reform = elysian_revolutionary_empire
		}
	}
	trigger = {
		if = {
			limit = {
				NOT = { has_reform = nhs_reduce_senate_reform }
			}
			OR = {
				current_age = age_of_absolutism
				current_age = age_of_revolutions
			}
			absolutism = 70
			stability = 1
			has_reform = centralize_reform
			has_reform = royal_decree_reform_ely
			custom_trigger_tooltip = {
				tooltip = nhs_nhs_reduce_senate2_tt
				NOT = { has_ruler_flag = nhs_changed_to_abs }
			}
		}
		else = {
			has_reform = nhs_reduce_senate_reform
		}
	}
	effect = {
		if = {
			limit = {
				NOT = { has_country_flag = nhs_no_reduce_senate_effect }
				has_reform = senatorial_empire
			}
			add_government_reform = elysian_absolute_empire
			add_government_reform = royal_decree_reform
			add_government_reform = letat_cest_moi_reform_ely
			add_absolutism = 5
			add_stability = -2
			add_legitimacy = -30
			add_adm_power = -100
			add_corruption = -5
			if = {
				limit = {
					has_country_modifier = nhs2_patriarch_influences_minor
				}
				custom_tooltip = nhs_rm_patriarch_influences_minor_tt
			}
			if = {
				limit = {
					has_country_modifier = nhs2_patriarch_influences_major
				}
				custom_tooltip = nhs_rm_patriarch_influences_major_tt
			}
			if = {
				limit = {
					any_owned_province = {
						has_province_modifier = nhs2_patriarchate_land_capital
					}
				}
				random_owned_province = {
					limit = {
						has_province_modifier = nhs2_patriarchate_land_capital
					}
					custom_tooltip = nhs_rm_nhs2_patriarchate_land_capital_tt
				}
			}
			hidden_effect = {
				country_event = { id = nhs2_countryevents.65 }
			}
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = nhs_no_reduce_senate_effect }
				has_reform = elysian_absolute_empire
			}
			tooltip = {
				add_government_reform = elysian_absolute_empire
				add_government_reform = royal_decree_reform
				add_government_reform = letat_cest_moi_reform_ely
				add_absolutism = 5
				add_stability = -2
				add_legitimacy = -30
				add_adm_power = -100
				add_corruption = -5
				if = {
					limit = {
						has_country_modifier = nhs2_patriarch_influences_minor
					}
					custom_tooltip = nhs_rm_patriarch_influences_minor_tt
				}
				if = {
					limit = {
						has_country_modifier = nhs2_patriarch_influences_major
					}
					custom_tooltip = nhs_rm_patriarch_influences_major_tt
				}
				if = {
					limit = {
						any_owned_province = {
							has_province_modifier = nhs2_patriarchate_land_capital
						}
					}
					random_owned_province = {
						limit = {
							has_province_modifier = nhs2_patriarchate_land_capital
						}
						custom_tooltip = nhs_rm_nhs2_patriarchate_land_capital_tt
					}
				}
				hidden_effect = {
					country_event = { id = nhs2_countryevents.65 }
				}
				#if = {
				#	limit = {
				#		has_country_modifier = nhs2_patriarch_influences_minor
				#	}
				#	remove_country_modifier = nhs2_patriarch_influences_minor
				#}
				#if = {
				#	limit = {
				#		has_country_modifier = nhs2_patriarch_influences_major
				#	}
				#	remove_country_modifier = nhs2_patriarch_influences_major
				#}
				#if = {
				#	limit = {
				#		any_owned_province = {
				#			has_province_modifier = nhs2_patriarchate_land_capital
				#		}
				#	}
				#	random_owned_province = {
				#		limit = {
				#			has_province_modifier = nhs2_patriarchate_land_capital
				#		}
				#		remove_province_modifier = nhs2_patriarchate_land_capital
				#	}
				#}
			}
		}
		custom_tooltip = nhs_path_to_revolution_tt
		custom_tooltip = nhs_new_line_tt
		hidden_effect = {
			set_ruler_flag = nhs_changed_to_abs
		}
	}
}

legislative_houses_reform_ely = {
	icon = "parliament_hall"
	allow_normal_conversion = yes
	potential = {
		has_reform = senatorial_empire
	}
	modifiers = {
		possible_adm_policy = 1
		global_unrest = -1
	}
}

nhs_empower_senate_reform = {
	icon = "parliament_hall"
	allow_normal_conversion = yes
	potential = {
		has_reform = elysian_absolute_empire
	}
	trigger = {
		custom_trigger_tooltip = {
			tooltip = nhs_nhs_reduce_senate2_tt
			NOT = { has_ruler_flag = nhs_changed_to_abs }
		}
	}
	effect = {
		if = {
			limit = {
				has_reform = elysian_absolute_empire
			}
			add_government_reform = senatorial_empire
			add_government_reform = legislative_houses_reform_ely
			if = {
				limit = {
					has_country_flag = nhs_remember_consolidating_senate
				}
				add_government_reform = nhs_consolidate_senate_of_cities
			}
			else = {
				add_government_reform = nhs_expand_senate_of_cities
			}
			if = {
				limit = {
					has_reform = royal_decree_reform_ely
				}
				remove_government_reform = royal_decree_reform_ely
			}
			add_stability = 1
			add_legitimacy = 20
			add_adm_power = -50
			add_absolutism = -20
			#if = {
			#	limit = {
			#		has_country_modifier = rev_absolute_authority
			#	}
			#	remove_country_modifier = rev_absolute_authority
			#}
			if = {
				limit = {
					has_country_modifier = rev_absolute_authority
				}
				#remove_country_modifier = rev_absolute_authority
				custom_tooltip = nhs_rm_rev_absolute_authority_tt
				hidden_effect = {
					country_event = { id = nhs2_countryevents.66 } #PDX must have messed something here
				}
			}
			if = {
				limit = {
					has_dlc = "Common Sense"
				}
				custom_tooltip = nhs_nhs_seats_tt
				hidden_effect = {
					every_owned_province = {
						limit = {
							OR = {
								province_id = 2550
								province_id = 952
								province_id = 950
								province_id = 2554
								province_id = 953
								province_id = 957
							}
						}
						set_seat_in_parliament = yes
					}
				}
			}
		}
		hidden_effect = {
			set_ruler_flag = nhs_changed_to_abs
		}
	}
	conditional = {
		allow = { has_dlc = "Common Sense" }
		has_parliament = yes
	}
	modifiers = {
		possible_adm_policy = 1
		global_unrest = -1
	}
}

#parliamentary_vs_presidential

nhs_restore_senate_reform = {
	icon = "parliament_hall"
	allow_normal_conversion = yes
	potential = {
		OR = {
			has_reform = elysian_republic
			has_reform = nhs_noble_republic
			has_reform = elysian_revolutionary_republic
		}
	}
	trigger = {
		custom_trigger_tooltip = {
			tooltip = nhs_nhs_reduce_senate2_tt
			NOT = { has_ruler_flag = nhs_changed_to_abs }
		}
	}
	effect = {
		if = {
			limit = {
				has_dlc = "Common Sense"
			}
			custom_tooltip = nhs_nhs_seats_tt
			hidden_effect = {
				every_owned_province = {
					limit = {
						OR = {
							province_id = 2550
							province_id = 952
							province_id = 950
							province_id = 2554
							province_id = 953
							province_id = 957
						}
					}
					set_seat_in_parliament = yes
				}
			}
		}
		set_country_flag = nhs_changed_to_abs
	}
	conditional = {
		allow = { has_dlc = "Common Sense" }
		has_parliament = yes
	}
	modifiers = {
		possible_adm_policy = 1
		stability_cost_modifier = 0.20
		global_unrest = -1
		max_absolutism = -5
	}
}

#question_of_dictatorship
seize_executive_power_reform_ely = {
	icon = "king_2_highlighted"
	allow_normal_conversion = yes
	
	potential = {
		has_reform = nhs_noble_republic
	}

	trigger = {
		has_reform = republican_authoritarianism_reform
		has_reform = consolidation_of_power_reform
		has_reform = broaden_executive_powers_reform
		NOT = { has_reform = nhs_restore_senate_reform }
		stability = 1
	}

	modifiers = {
	}
	effect = {
		change_tag = ELY
		if = {
			limit = {
				NOT = { government = monarchy }
			}
			change_government = monarchy
		}
		add_government_reform = elysian_absolute_empire
		add_government_reform = enforce_privileges_reform
		add_government_reform = centralize_reform
		add_government_reform = of_noble_bearing_reform
		add_government_reform = aristocratic_court_reform_ely
		add_government_reform = letat_cest_moi_reform_ely
		set_country_flag = nhs_no_reduce_senate_effect
		add_government_reform = nhs_reduce_senate_reform
		clr_country_flag = nhs_no_reduce_senate_effect
		#add_country_modifier = {
		#	name = rev_absolute_authority
		#	duration = -1
		#}
		add_absolutism = 15
		add_stability = -1
	}
	ai = {
		factor = 0
	}
}

restore_monarchy_reform_ely = {
	icon = "king_highlighted"
	allow_normal_conversion = yes
	
	potential = {
		has_reform = nhs_noble_republic
	}

	trigger = {
		has_reform = consolidation_of_power_reform
		has_reform = broaden_executive_powers_reform
		has_reform = landholders_reform
		has_reform = nhs_restore_senate_reform
	}

	modifiers = {
	}
	effect = {
		hidden_effect = {
			if = {
				limit = {
					has_dlc = "Common Sense"
					has_parliament = yes
				}
				every_owned_province = {
					limit = {
						has_seat_in_parliament = yes
					}
					set_province_flag = nhs_transfer_seats_flag
				}
			}
		}
		change_tag = ELY
		if = {
			limit = {
				NOT = { government = monarchy }
			}
			change_government = monarchy
		}
		custom_tooltip = nhs_ruler_and_heir_restored_tt
		add_government_reform = senatorial_empire
		add_government_reform = enforce_privileges_reform
		add_government_reform = decentralize_reform
		add_government_reform = of_noble_bearing_reform
		add_government_reform = aristocratic_court_reform_ely
		add_government_reform = nhs_consolidate_senate_of_cities
		add_government_reform = legislative_houses_reform_ely
		#if = {
		#	limit = {
		#		has_country_modifier = rev_absolute_authority
		#	}
		#	remove_country_modifier = rev_absolute_authority
		#}
		if = {
			limit = {
				has_country_modifier = rev_absolute_authority
			}
			#remove_country_modifier = rev_absolute_authority
			custom_tooltip = nhs_rm_rev_absolute_authority_tt
			hidden_effect = {
				country_event = { id = nhs2_countryevents.66 } #PDX must have messed something here
			}
		}
		hidden_effect = {
			country_event = { id = nhs_republic_events.5 }
			if = {
				limit = {
					has_dlc = "Common Sense"
					has_parliament = yes
				}
				every_owned_province = {
					limit = {
						has_province_flag = nhs_transfer_seats_flag
					}
					set_seat_in_parliament = yes
					clr_province_flag = nhs_transfer_seats_flag
				}
			}
		}
	}
	ai = {
		factor = 0
	}
}



#nhs_expand_senate_of_cities = {
#	icon = ""
#	modifiers = {
#		core_creation = -0.10
#		diplomatic_upkeep = -1
#		max_absolutism = -5
#	}
#}
#
#nhs_consolidate_senate_of_cities = {
#	icon = ""
#	modifiers = {
#		free_adm_policy = 1
#		reform_progress_growth = 0.1
#		state_maintenance_modifier = -0.15
#		stability_cost_modifier = -0.15
#	}
#}

# 03_MSG 

spartan_army_legacy = {
	icon = "castle"
	allow_normal_conversion = no
	monarchy = yes
	legacy_government = yes
	fixed_rank = 2
	valid_for_nation_designer = no
	valid_for_new_country = no
	allow_convert = no
	modifiers = {
		global_autonomy = -0.1
		land_morale = 0.10
		monarch_military_power = 3
		max_absolutism = 5
		land_morale = 0.10
		possible_mercenaries = -3
		max_states = 1
	}
}

spartan_kingdom_legacy = {
	icon = "castle"
	allow_normal_conversion = no
	monarchy = yes
	legacy_government = yes
	fixed_rank = 2
	valid_for_nation_designer = no
	valid_for_new_country = no
	allow_convert = no
	modifiers = {
		global_unrest = -2
		land_forcelimit_modifier = 0.10
		years_of_nationalism = -5
		max_absolutism = 10
		monarch_military_power = 3
		max_states = 3
	}
}

spartan_sovreignty_legacy = {
	icon = "castle"
	allow_normal_conversion = no
	monarchy = yes
	legacy_government = yes
	fixed_rank = 3
	valid_for_nation_designer = no
	valid_for_new_country = no
	allow_convert = no
	modifiers = {
		global_autonomy = -0.1
		land_forcelimit_modifier = 0.10
		years_of_nationalism = -5
		max_absolutism = 20
		monarch_military_power = 3
		discipline = 0.05
		max_states = 4
	}
}

spartan_army = {
	icon = "spartan_army_icon"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		#has_reform = spartan_army
		OR = {
			tag = MSG
			tag = MSN
		}
	}
	legacy_equivalent = spartan_army_legacy
	fixed_rank = 2
	trigger = {
		NOT = { have_had_reform = spartan_kingdom }
	}
	#lock_level_when_selected = yes
	modifiers = {
		global_autonomy = -0.05
		land_morale = 0.10
		monarch_military_power = 3
		max_absolutism = 5
		land_morale = 0.10
		possible_mercenaries = -3
	}
	custom_attributes = {
		locked_government_type = yes
	}
}

spartan_kingdom = {
	icon = "spartan_kingdom_icon"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		#has_reform = spartan_kingdom
		OR = {
			tag = MSG
			tag = MSN
		}
	}
	trigger = {
		tag = MSN
		custom_trigger_tooltip = {
			tooltip = msg_cushed_nobility_not_tt
			NOT = {
				OR = {
					has_reform = spartan_sovreignty
					has_reform = msg_crush_nobles_ref
				}
			}
		}
	}
	legacy_equivalent = spartan_kingdom_legacy
	fixed_rank = 2
	#lock_level_when_selected = yes
	modifiers = {
		global_unrest = -2
		land_forcelimit_modifier = 0.10
		years_of_nationalism = -5
		max_absolutism = 10
		monarch_military_power = 3
	}
	custom_attributes = {
		locked_government_type = yes
	}
}

spartan_sovreignty = {
	icon = "spartan_sovreignty_icon"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		#has_reform = spartan_sovreignty
		OR = {
			tag = MSG
			tag = MSN
		}
	}
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_cushed_nobility_tt
			OR = {
				has_reform = spartan_sovreignty
				has_reform = msg_crush_nobles_ref
			}
		}
	}
	legacy_equivalent = spartan_sovreignty_legacy
	fixed_rank = 3
	#lock_level_when_selected = yes
	modifiers = {
		global_autonomy = -0.05
		land_forcelimit_modifier = 0.10
		years_of_nationalism = -5
		max_absolutism = 20
		monarch_military_power = 3
		discipline = 0.05
	}
	custom_attributes = {
		locked_government_type = yes
	}
}

msg_spartan_nobility_crushed = {
	icon = "fist_in_air"
	potential = {
		has_reform = spartan_sovreignty
	}
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_nobility_crushed_tt
			NOT = { has_global_flag = msg_pipiltin_bribe }
			NOT = { has_global_flag = msg_apogonoi_bribe }
			NOT = { has_global_flag = msg_no_pipiltin_palace }
			NOT = { has_global_flag = msg_no_apogonoi_palace }
		}
	}
	modifiers = {
		reform_progress_growth = 0.20
		yearly_absolutism = 1
	}
}

msg_spartan_nobility_negotiated = {
	icon = "people_walking"
	potential = {
		has_reform = spartan_sovreignty
	}
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_nobility_negotiated_tt
			OR = {
				has_global_flag = msg_pipiltin_bribe
				has_global_flag = msg_apogonoi_bribe
				has_global_flag = msg_no_pipiltin_palace
				has_global_flag = msg_no_apogonoi_palace
			}
			NOT = {
				AND = {
					has_global_flag = msg_pipiltin_bribe
					has_global_flag = msg_apogonoi_bribe
					has_global_flag = msg_no_pipiltin_palace
					has_global_flag = msg_no_apogonoi_palace
				}
			}
		}
	}
	modifiers = {
		reform_progress_growth = 0.10
		global_unrest = -1
		yearly_absolutism = 0.5
		max_absolutism = -5
	}
}

msg_spartan_nobility_appeased = {
	icon = "man_on_podium"
	potential = {
		has_reform = spartan_sovreignty
	}
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_nobility_appeased_tt
			has_global_flag = msg_pipiltin_bribe
			has_global_flag = msg_apogonoi_bribe
			has_global_flag = msg_no_pipiltin_palace
			has_global_flag = msg_no_apogonoi_palace
		}
	}
	modifiers = {
		reform_progress_growth = 0.20
		global_unrest = -2
		max_absolutism = -10
	}
}

###Spartan Kingdom Reforms
##ECONOMY
#Base
msg_economy0_ref = {
	icon = "msg_economy0_ref"
	#lock_level_when_selected = yes
	allow_normal_conversion = no
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_economy0_tt
			NOT = { has_reform = msg_reformed_land }
			NOT = { has_reform = msg_reformed_trade_ports }
			NOT = { has_reform = msg_reformed_gold_mine }
		}
		NOT = { has_reform = msg_economy1_ref }
		NOT = { has_reform = msg_economy2_ref }
		NOT = { has_reform = msg_economy3_ref }
	}
	modifiers = {
		dip_tech_cost_modifier = 0.2
		production_efficiency = -0.25
		build_time = 0.15
		mercenary_cost = 0.25
		light_ship_cost = 1.00
		merchants = -2
		embargo_efficiency = -1.00
	}
}
msg_economy1_ref = {
	#lock_level_when_selected = yes
	allow_normal_conversion = no
	icon = "msg_economy1_ref"
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_economy1_ref_tt
			OR = {
				has_reform = msg_reformed_land
				has_reform = msg_reformed_trade_ports
				has_reform = msg_reformed_gold_mine
			}
			NOT = {
				AND = {
					has_reform = msg_reformed_land
					has_reform = msg_reformed_trade_ports
				}
				AND = {
					has_reform = msg_reformed_land
					has_reform = msg_reformed_gold_mine
				}
				AND = {
					has_reform = msg_reformed_gold_mine
					has_reform = msg_reformed_trade_ports
				}
			}
		}
		NOT = { has_reform = msg_economy2_ref }
		NOT = { has_reform = msg_economy3_ref }
	}
	modifiers = {
		dip_tech_cost_modifier = 0.1
		production_efficiency = -0.20
		build_time = 0.10
		mercenary_cost = 0.20
		light_ship_cost = 0.75
		merchants = -2
		embargo_efficiency = -0.75
	}
}
msg_economy2_ref = {
	#lock_level_when_selected = yes
	#allow_normal_conversion = no
	icon = "msg_economy2_ref"
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_economy2_ref_tt
			OR = {
				AND = {
					has_reform = msg_reformed_land
					has_reform = msg_reformed_trade_ports
				}
				AND = {
					has_reform = msg_reformed_land
					has_reform = msg_reformed_gold_mine
				}
				AND = {
					has_reform = msg_reformed_gold_mine
					has_reform = msg_reformed_trade_ports
				}
				
			}
			NOT = {
				AND = {
					has_reform = msg_reformed_land
					has_reform = msg_reformed_trade_ports
					has_reform = msg_reformed_gold_mine
				}
			}
		}
		NOT = { has_reform = msg_economy3_ref }
	}
	modifiers = {
		production_efficiency = -0.15
		build_time = 0.05
		mercenary_cost = 0.15
		light_ship_cost = 0.50
		merchants = -1
		embargo_efficiency = -0.50
	}
}
msg_economy3_ref = {
	#lock_level_when_selected = yes
	#allow_normal_conversion = no
	icon = "paper_with_seal_3"
	trigger = {
		has_reform = msg_reformed_land
		has_reform = msg_reformed_trade_ports
		has_reform = msg_reformed_gold_mine
	}
	effect = {
		custom_tooltip = msg_pass_crush_to_remove_debuffs_tt
		if = {
			limit = {
				religion = pantheon_worship
			}
			if = {
				limit = {
					has_reform = msg_hellenic3_ref
					has_reform = msg_economy3_ref
				}
				change_government_reform_progress = 700
			}
			else = {
				custom_tooltip = msg_gain_700_rp_if_has_all_eco_hel_tt
			}
		}
		else_if = {
			limit = {
				religion = aztlan_worship
			}
			if = {
				limit = {
					has_reform = msg_aztlan3_ref
					has_reform = msg_economy3_ref
				}
				change_government_reform_progress = 700
			}
			else = {
				custom_tooltip = msg_gain_700_rp_if_has_all_eco_azt_tt
			}
		}
		else = {
			if = {
				limit = {
					has_reform = msg_aztlan3_ref
					has_reform = msg_christian3_ref
				}
				change_government_reform_progress = 700
			}
			else = {
				custom_tooltip = msg_gain_700_rp_if_has_all_eco_ort_tt
			}
		}
	}
	modifiers = {
		production_efficiency = -0.10
		mercenary_cost = 0.10
		light_ship_cost = 0.25
		embargo_efficiency = -0.25
	}
}
#Land
msg_reform_land_ref_no = {
	icon = "msg_unreformed_land"
	trigger = {
		NOT = { has_reform = msg_reform_land_ref }
	}
	modifiers = {
		development_cost = 1.00
		build_cost = 1.00
	}
}

msg_reform_land_ref = {
	icon = "msg_reform_land_ref"
	lock_level_when_selected = yes
	trigger = {
		if = {
			limit = { NOT = { has_reform = msg_reform_land_ref } }
			if = {
				limit = {
					ai = no
				}
				stability = 1
				capital_scope = {
					base_tax = 2
				}
			}
			OR = {
				custom_trigger_tooltip = {
					tooltip = msg_less_than_100_contruction_cost_tt
					NOT = {
						has_global_modifier_value = {
							which = build_cost
							value = 0.91
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = msg_less_than_100_development_cost_tt
					NOT = {
						has_global_modifier_value = {
							which = development_cost
							value = 0.91
						}
					}
				}
			}
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no #AI now uses decisions
				# NOT = {
					# is_in_war = {
						# attacker_leader = ROOT
					# }
				# }
			}
		}
	}
	modifiers = {
		development_cost = 0.75
		build_cost = 0.75
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		if = {
			limit = { ai = no }
			add_stability = -1
		}
		if = {
			limit = {
				OR = {
					ai = no
					capital_scope = {
						base_tax = 2
					}
				}
			}
			capital_scope = {
				add_base_tax = -1
			}
		}
		country_event = { id = msg_reforms.4 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_reformed_land = {
	icon = "tribal_centralize_power"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
			has_reform = msg_reformed_land
		}
	}
	effect = {
		#improve economy
		if = {
			limit = {
				has_reform = msg_economy0_ref
			}
			#remove_government_reform = msg_economy0_ref
			add_government_reform = msg_economy1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_economy1_ref
			}
			#remove_government_reform = msg_economy1_ref
			add_government_reform = msg_economy2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_economy2_ref
			}
			#remove_government_reform = msg_economy2_ref
			add_government_reform = msg_economy3_ref
		}
	}
}

#Trade
msg_unreformed_trade_ports = {
	icon = "msg_reformed_trade_ports"
	trigger = {
		NOT = { has_reform = msg_reform_trade_ports_ref }
	}
	modifiers = {
		global_trade_power = -0.25
	}
	ai = {
		factor = 0
	}
}

msg_reform_trade_ports_ref = {
	icon = "msg_reform_trade_ports_ref"
	lock_level_when_selected = yes
	trigger = {
		if = {
			limit = { NOT = { has_reform = msg_reform_trade_ports_ref } }
			if = {
				limit = {
					ai = no
				}
				stability = 2
				treasury = 50
			}
			dip_power = 50
			num_of_ports = 10
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	modifiers = {
		global_trade_power = -0.20
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		add_dip_power = -50
		add_treasury = -50
		add_corruption = 2
		country_event = { id = msg_reforms.3 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_reformed_trade_ports = {
	icon = "merchant"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
			has_reform = msg_reformed_trade_ports
		}
	}
	effect = {
		#improve economy
		if = {
			limit = {
				has_reform = msg_economy0_ref
			}
			#remove_government_reform = msg_economy0_ref
			add_government_reform = msg_economy1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_economy1_ref
			}
			#remove_government_reform = msg_economy1_ref
			add_government_reform = msg_economy2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_economy2_ref
			}
			#remove_government_reform = msg_economy2_ref
			add_government_reform = msg_economy3_ref
		}
	}
}

#Gold
msg_unreformed_gold_mines = {
	icon = "msg_reformed_gold_mine"
	trigger = {
		NOT = { has_reform = msg_reform_gold_mine_ref }
	}
	modifiers = {
		inflation_reduction = -0.05
	}
}

msg_reform_gold_mine_ref = {
	icon = "msg_reform_gold_mine_ref"
	lock_level_when_selected = yes
	trigger = {
		if = {
			limit = { NOT = { has_reform = msg_reform_gold_mine_ref } }
			if = {
				limit = {
					ai = no
				}
				stability = 1
				treasury = 100
			}
			dip_power = 50
			num_of_owned_provinces_with = {
				value = 3
				trade_goods = gold
			}
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	modifiers = {
		inflation_reduction = -0.04
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		if = {
			limit = { ai = no }
			add_stability = -1
			add_treasury = -100
		}
		add_treasury = -100
		add_dip_power = -50
		country_event = { id = msg_reforms.2 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_reformed_gold_mine = {
	icon = "paper_money_map"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
			has_reform = msg_reformed_gold_mine
		}
	}
	effect = {
		#improve economy
		if = {
			limit = {
				has_reform = msg_economy0_ref
			}
			#remove_government_reform = msg_economy0_ref
			add_government_reform = msg_economy1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_economy1_ref
			}
			#remove_government_reform = msg_economy1_ref
			add_government_reform = msg_economy2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_economy2_ref
			}
			#remove_government_reform = msg_economy2_ref
			add_government_reform = msg_economy3_ref
		}
	}
}


##GOVERNMENT
#Base
msg_government0_ref = {
	icon = "msg_government0_ref"
	#lock_level_when_selected = yes
	allow_normal_conversion = no
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_economy0_tt
			NOT = { has_reform = msg_court_reform_yes }
			NOT = { has_reform = msg_diplomats_yes }
			NOT = { has_reform = msg_naval_reform_yes }
		}
		NOT = { has_reform = msg_government1_ref }
		NOT = { has_reform = msg_government2_ref }
		NOT = { has_reform = msg_government3_ref }
	}
	modifiers = {
		mil_tech_cost_modifier = 0.20
		advisor_pool = -2
		naval_forcelimit_modifier = -0.5
		privateer_efficiency = -1.00
		global_ship_cost = 0.25
		diplomats = -1
		diplomatic_reputation = -0.5
	}
}
msg_government1_ref = {
	#lock_level_when_selected = yes
	allow_normal_conversion = no
	icon = "msg_government1_ref"
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_court1_ref_tt
			OR = {
				has_reform = msg_court_reform_yes
				has_reform = msg_diplomats_yes
				has_reform = msg_naval_reform_yes
			}
			NOT = {
				AND = {
					has_reform = msg_court_reform_yes
					has_reform = msg_diplomats_yes
				}
				AND = {
					has_reform = msg_court_reform_yes
					has_reform = msg_naval_reform_yes
				}
				AND = {
					has_reform = msg_naval_reform_yes
					has_reform = msg_diplomats_yes
				}
			}
		}
		NOT = { has_reform = msg_government2_ref }
		NOT = { has_reform = msg_government3_ref }
	}
	modifiers = {
		mil_tech_cost_modifier = 0.10
		advisor_pool = -1
		naval_forcelimit_modifier = -0.4
		privateer_efficiency = -0.75
		global_ship_cost = 0.20
		diplomats = -1
		diplomatic_reputation = -0.4
	}
}
msg_government2_ref = {
	#lock_level_when_selected = yes
	#allow_normal_conversion = no
	icon = "msg_government2_ref"
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_court2_ref_tt
			OR = {
				AND = {
					has_reform = msg_court_reform_yes
					has_reform = msg_diplomats_yes
				}
				AND = {
					has_reform = msg_court_reform_yes
					has_reform = msg_naval_reform_yes
				}
				AND = {
					has_reform = msg_naval_reform_yes
					has_reform = msg_diplomats_yes
				}
				
			}
			NOT = {
				AND = {
					has_reform = msg_court_reform_yes
					has_reform = msg_diplomats_yes
					has_reform = msg_naval_reform_yes
				}
			}
		}
		NOT = { has_reform = msg_government3_ref }
	}
	modifiers = {
		advisor_pool = -1
		naval_forcelimit_modifier = -0.3
		privateer_efficiency = -0.5
		global_ship_cost = 0.15
		diplomatic_reputation = -0.3
	}
}
msg_government3_ref = {
	#lock_level_when_selected = yes
	#allow_normal_conversion = no
	icon = "crown"
	trigger = {
		has_reform = msg_court_reform_yes
		has_reform = msg_diplomats_yes
		has_reform = msg_naval_reform_yes
	}
	effect = {
		custom_tooltip = msg_pass_crush_to_remove_debuffs_tt
		if = {
			limit = {
				religion = pantheon_worship
			}
			if = {
				limit = {
					has_reform = msg_hellenic3_ref
					has_reform = msg_economy3_ref
				}
				change_government_reform_progress = 700
			}
			else = {
				custom_tooltip = msg_gain_700_rp_if_has_all_gov_hel_tt
			}
		}
		else_if = {
			limit = {
				religion = aztlan_worship
			}
			if = {
				limit = {
					has_reform = msg_aztlan3_ref
					has_reform = msg_economy3_ref
				}
				change_government_reform_progress = 700
			}
			else = {
				custom_tooltip = msg_gain_700_rp_if_has_all_gov_azt_tt
			}
		}
		else = {
			if = {
				limit = {
					has_reform = msg_aztlan3_ref
					has_reform = msg_christian3_ref
				}
				change_government_reform_progress = 700
			}
			else = {
				custom_tooltip = msg_gain_700_rp_if_has_all_gov_ort_tt
			}
		}
	}
	modifiers = {
		advisor_pool = -1
		naval_forcelimit_modifier = -0.2
		privateer_efficiency = -0.25
		global_ship_cost = 0.10
		diplomatic_reputation = -0.2
	}
}

#Court
msg_court_reform_no = {
	icon = "msg_court_reform_no"
	trigger = {
		NOT = { has_reform = msg_court_reform_ref }
	}
	modifiers = {
		legitimacy = -1
	}
}

msg_court_reform_ref = {
	icon = "msg_court_reform_ref"
	lock_level_when_selected = yes
	trigger = {
		if = {
			limit = { 
				NOT = { has_reform = msg_court_reform_ref } 
			}
			if = {
				limit = {
					ai = no
				}
				stability = 1
			}
			mil_power = 50
			prestige = 20
			num_of_cities = 25
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	modifiers = {
		legitimacy = -0.08
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		add_mil_power = -50
		add_prestige = -20
		country_event = { id = msg_reforms.16 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_court_reform_yes = {
	icon = "man_on_podium"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
			has_reform = msg_court_reform_yes
		}
	}
	effect = {
		#improve government
		if = {
			limit = {
				has_reform = msg_government0_ref
			}
			#remove_government_reform = msg_government0_ref
			add_government_reform = msg_government1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_government1_ref
			}
			#remove_government_reform = msg_government1_ref
			add_government_reform = msg_government2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_government2_ref
			}
			#remove_government_reform = msg_government2_ref
			add_government_reform = msg_government3_ref
		}
	}
}

#Diplomats
msg_diplomats_no = {
	icon = "msg_diplomats_no"
	trigger = {
		NOT = { has_reform = msg_diplomats_ref }
	}
	modifiers = {
		diplomatic_reputation = -0.5
	}
}

msg_diplomats_ref = {
	icon = "msg_diplomats_ref"
	lock_level_when_selected = yes
	trigger = {
		if = {
			limit = { 
				NOT = { has_reform = msg_diplomats_ref } 
			}
			if = {
				limit = {
					ai = no
				}
				stability = 1
				treasury = 100
			}
			dip_power = 50
			custom_trigger_tooltip = {
				tooltip = msg_no_dips_before_conquest
				NOT = {
					any_country = {
						technology_group = mesoamerican
						capital_scope = {
							province_group = mesoamerica_pgroup
						}
						NOT = {
							is_subject_of = ROOT
						}
					}
				}
			}
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	modifiers = {
		diplomatic_reputation = -0.4
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		add_dip_power = -50
		add_treasury = -100
		country_event = { id = msg_reforms.15 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_diplomats_yes = {
	icon = "nobleman"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
			has_reform = msg_diplomats_yes
		}
	}
	effect = {
		#improve government
		if = {
			limit = {
				has_reform = msg_government0_ref
			}
			#remove_government_reform = msg_government0_ref
			add_government_reform = msg_diplomats_yes
		}
		else_if = {
			limit = {
				has_reform = msg_government1_ref
			}
			#remove_government_reform = msg_government1_ref
			add_government_reform = msg_government2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_government2_ref
			}
			#remove_government_reform = msg_government2_ref
			add_government_reform = msg_government3_ref
		}
	}
}

#Navy
msg_naval_reform_no = {
	icon = "msg_naval_reform_no"
	trigger = {
		NOT = { has_reform = msg_naval_reform_ref }
	}
	modifiers = {
		naval_forcelimit_modifier = -1
	}
}

msg_naval_reform_ref = {
	icon = "msg_naval_reform_ref"
	#lock_level_when_selected = yes
	trigger = {
		if = {
			limit = { 
				NOT = { has_reform = msg_naval_reform_ref } 
			}
			if = {
				limit = {
					ai = no
				}
				stability = 1
			}
			mil_power = 50
			sailors = 500
			num_of_ports = 10
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	modifiers = {
		naval_forcelimit_modifier = -0.8
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		add_mil_power = -50
		add_sailors = -500
		country_event = { id = msg_reforms.14 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_naval_reform_yes = {
	icon = "merchant_ship"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
			has_reform = msg_naval_reform_yes
		}
	}
	effect = {
		#improve government
		if = {
			limit = {
				has_reform = msg_government0_ref
			}
			#remove_government_reform = msg_government0_ref
			add_government_reform = msg_government1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_government1_ref
			}
			#remove_government_reform = msg_government1_ref
			add_government_reform = msg_government2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_government2_ref
			}
			#remove_government_reform = msg_government2_ref
			add_government_reform = msg_government3_ref
		}
	}
}

###RELIGION
##Hellenic
#Base
msg_hellenic0_ref = {
	icon = "msg_hellenic0_ref"
	#lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		religion = pantheon_worship
	}
	trigger = {
		#custom_trigger_tooltip = {
			#tooltip = msg_economy0_tt
			NOT = { has_reform = msg_spartan_heralds_yes }
			NOT = { has_reform = msg_native_deities_yes }
			NOT = { has_reform = msg_deify_leonidas_yes }
		#}
		NOT = { has_reform = msg_hellenic1_ref }
		NOT = { has_reform = msg_hellenic2_ref }
		NOT = { has_reform = msg_hellenic3_ref }
	}
	modifiers = {
		adm_tech_cost_modifier = 0.2
		missionaries = -1
		global_missionary_strength = -0.04
		tolerance_own = -1
		tolerance_heretic = -2
	}
}
msg_hellenic1_ref = {
	#lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		religion = pantheon_worship
	}
	icon = "msg_hellenic1_ref"
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_religious1_ref_tt
			OR = {
				has_reform = msg_spartan_heralds_yes
				has_reform = msg_native_deities_yes
				has_reform = msg_deify_leonidas_yes
			}
			NOT = {
				AND = {
					has_reform = msg_spartan_heralds_yes
					has_reform = msg_native_deities_yes
				}
				AND = {
					has_reform = msg_spartan_heralds_yes
					has_reform = msg_deify_leonidas_yes
				}
				AND = {
					has_reform = msg_deify_leonidas_yes
					has_reform = msg_native_deities_yes
				}
			}
		}
		NOT = { has_reform = msg_hellenic2_ref }
		NOT = { has_reform = msg_hellenic3_ref }
	}
	modifiers = {
		adm_tech_cost_modifier = 0.1
		global_missionary_strength = -0.03
		tolerance_own = -1
		tolerance_heretic = -1
	}
}
msg_hellenic2_ref = {
	#lock_level_when_selected = yes
	#allow_normal_conversion = no
	potential = {
		religion = pantheon_worship
	}
	icon = "msg_hellenic2_ref"
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_religious2_ref_tt
			OR = {
				AND = {
					has_reform = msg_spartan_heralds_yes
					has_reform = msg_native_deities_yes
				}
				AND = {
					has_reform = msg_spartan_heralds_yes
					has_reform = msg_deify_leonidas_yes
				}
				AND = {
					has_reform = msg_deify_leonidas_yes
					has_reform = msg_native_deities_yes
				}
				
			}
			NOT = {
				AND = {
					has_reform = msg_spartan_heralds_yes
					has_reform = msg_native_deities_yes
					has_reform = msg_deify_leonidas_yes
				}
			}
		}
		NOT = { has_reform = msg_hellenic3_ref }
	}
	modifiers = {
		global_missionary_strength = -0.02
		tolerance_own = -1
		tolerance_heretic = -1
	}
}
msg_hellenic3_ref = {
	#lock_level_when_selected = yes
	#allow_normal_conversion = no
	potential = {
		religion = pantheon_worship
	}
	icon = "msg_hellenic3_ref"
	trigger = {
		has_reform = msg_spartan_heralds_yes
		has_reform = msg_native_deities_yes
		has_reform = msg_deify_leonidas_yes
	}
	effect = {
		custom_tooltip = msg_pass_crush_to_remove_debuffs_tt
		custom_tooltip = msg_gain_700_rp_if_has_all_rel_tt
		if = {
			limit = {
				has_reform = msg_government3_ref
				has_reform = msg_economy3_ref
			}
			change_government_reform_progress = 700
		}
	}
	modifiers = {
		global_missionary_strength = -0.01
	}
}

#Priesthood-Hellenic
msg_spartan_heralds_no = {
	icon = "msg_spartan_heralds_no"
	potential = {
		religion = pantheon_worship
	}
	trigger = {
		NOT = { has_reform = msg_spartan_heralds_ref }
	}
}

msg_spartan_heralds_ref = {
	icon = "msg_spartan_heralds_ref"
	potential = {
		religion = pantheon_worship
	}
	trigger = {
		if = {
			limit = { 
				NOT = { has_reform = msg_spartan_heralds_ref } 
			}
			if = {
				limit = {
					ai = no
				}
				stability = 1
			}
			adm_power = 50
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		add_adm_power = -50
		add_corruption = 3
		country_event = { id = msg_reforms.6 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_spartan_heralds_yes = {
	icon = "msg_spartan_heralds_yes"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		religion = pantheon_worship
	}
	trigger = {
		if = {
			limit = {
				has_global_flag = msg_first_religious_reform_done
			}
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_1_year #A year has passed since we enacted the reform
				has_reform = msg_spartan_heralds_yes
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
				has_reform = msg_spartan_heralds_yes
			}
		}
	}
	effect = {
		#improve religion
		if = {
			limit = {
				has_reform = msg_hellenic0_ref
			}
			#remove_government_reform = msg_hellenic0_ref
			add_government_reform = msg_hellenic1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_hellenic1_ref
			}
			#remove_government_reform = msg_hellenic1_ref
			add_government_reform = msg_hellenic2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_hellenic2_ref
			}
			#remove_government_reform = msg_hellenic2_ref
			add_government_reform = msg_hellenic3_ref
		}
	}
}

#Organisation-Hellenic
msg_native_deities_no = {
	icon = "msg_native_deities_no"
	potential = {
		religion = pantheon_worship
	}
	trigger = {
		NOT = { has_reform = msg_native_deities_ref }
	}
	modifiers = {
		tolerance_heretic = -1
	}
}

msg_native_deities_ref = {
	icon = "msg_native_deities_ref"
	#lock_level_when_selected = yes
	potential = {
		religion = pantheon_worship
	}
	trigger = {
		if = {
			limit = { 
				NOT = { has_reform = msg_native_deities_ref } 
			}
			if = {
				limit = {
					ai = no
				}
				stability = 1
			}
			adm_power = 50
			prestige = 20
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_needs_aztlan_for_reform
				OR = {
					has_global_flag = aztlan_reformation
					has_global_flag = msg_post_reformation
					had_country_flag = { flag = nhs_msg_land1 days = 18250 }
					AND = {
						had_country_flag = { flag = nhs_msg_land1 days = 16425 }
						has_global_flag = nhs_started_at_bookmark
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	modifiers = {
		tolerance_heretic = -0.8
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		if = {
			limit = { ai = no }
			add_stability = -1
		}
		add_adm_power = -50
		add_prestige = -20
		country_event = { id = msg_reforms.7 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_native_deities_yes = {
	icon = "msg_native_deities_yes"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		religion = pantheon_worship
	}
	trigger = {
		if = {
			limit = {
				has_global_flag = msg_second_religious_reform_done
			}
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_1_year #A year has passed since we enacted the reform
				has_reform = msg_native_deities_yes
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
				has_reform = msg_native_deities_yes
			}
		}
	}
	effect = {
		#improve religion
		if = {
			limit = {
				has_reform = msg_hellenic0_ref
			}
			#remove_government_reform = msg_hellenic0_ref
			add_government_reform = msg_hellenic1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_hellenic1_ref
			}
			#remove_government_reform = msg_hellenic1_ref
			add_government_reform = msg_hellenic2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_hellenic2_ref
			}
			#remove_government_reform = msg_hellenic2_ref
			add_government_reform = msg_hellenic3_ref
		}
	}
}

#Worship-Hellenic
msg_deify_leonidas_no = {
	icon = "msg_deify_leonidas_no"
	potential = {
		religion = pantheon_worship
	}
	trigger = {
		NOT = { has_reform = msg_deify_leonidas_ref }
	}
	modifiers = {
		tolerance_own = -1
	}
}

msg_deify_leonidas_ref = {
	icon = "msg_deify_leonidas_ref"
	#lock_level_when_selected = yes
	potential = {
		religion = pantheon_worship
	}
	trigger = {
		if = {
			limit = { 
				NOT = { has_reform = msg_deify_leonidas_ref } 
			}
			custom_trigger_tooltip = {
				tooltip = msg_leonidas_dead
				NOT = { has_ruler_modifier = msg_has_leonidas }
			}
			if = {
				limit = {
					ai = no
				}
				stability = 0
			}
			adm_power = 50
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_needs_aztlan_for_reform
				OR = {
					has_global_flag = aztlan_reformation
					has_global_flag = msg_post_reformation
					had_country_flag = { flag = nhs_msg_land1 days = 18250 }
					AND = {
						had_country_flag = { flag = nhs_msg_land1 days = 16425 }
						has_global_flag = nhs_started_at_bookmark
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	modifiers = {
		tolerance_own = -0.8
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		add_stability = 1
		add_adm_power = -50
		country_event = { id = msg_reforms.5 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_deify_leonidas_yes = {
	icon = "msg_deify_leonidas_yes"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		religion = pantheon_worship
	}
	trigger = {
		if = {
			limit = {
				has_global_flag = msg_third_religious_reform_done
			}
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_1_year #A year has passed since we enacted the reform
				has_reform = msg_deify_leonidas_yes
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
				has_reform = msg_deify_leonidas_yes
			}
		}
	}
	effect = {
		#improve religion
		if = {
			limit = {
				has_reform = msg_hellenic0_ref
			}
			#remove_government_reform = msg_hellenic0_ref
			add_government_reform = msg_hellenic1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_hellenic1_ref
			}
			#remove_government_reform = msg_hellenic1_ref
			add_government_reform = msg_hellenic2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_hellenic2_ref
			}
			#remove_government_reform = msg_hellenic2_ref
			add_government_reform = msg_hellenic3_ref
		}
	}
}

##Aztlan
#Base
msg_aztlan0_ref = {
	icon = "msg_aztlan0_ref"
	#lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		religion = aztlan_worship
	}
	trigger = {
		#custom_trigger_tooltip = {
			#tooltip = msg_economy0_tt
			NOT = { has_reform = msg_aztlan_priesthood_yes }
			NOT = { has_reform = msg_old_faith_yes }
			NOT = { has_reform = msg_sacrifice_yes }
		#}
		NOT = { has_reform = msg_aztlan1_ref }
		NOT = { has_reform = msg_aztlan2_ref }
		NOT = { has_reform = msg_aztlan3_ref }
	}
	modifiers = {
		adm_tech_cost_modifier = 0.2
		missionaries = -1
		global_missionary_strength = -0.04
		tolerance_own = -1
		tolerance_heretic = -2
	}
}
msg_aztlan1_ref = {
	#lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		religion = aztlan_worship
	}
	icon = "msg_aztlan1_ref"
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_religious1_ref_tt
			OR = {
				has_reform = msg_aztlan_priesthood_yes
				has_reform = msg_old_faith_yes
				has_reform = msg_sacrifice_yes
			}
			NOT = {
				AND = {
					has_reform = msg_aztlan_priesthood_yes
					has_reform = msg_old_faith_yes
				}
				AND = {
					has_reform = msg_aztlan_priesthood_yes
					has_reform = msg_sacrifice_yes
				}
				AND = {
					has_reform = msg_sacrifice_yes
					has_reform = msg_old_faith_yes
				}
			}
		}
		NOT = { has_reform = msg_aztlan2_ref }
		NOT = { has_reform = msg_aztlan3_ref }
	}
	modifiers = {
		adm_tech_cost_modifier = 0.1
		global_missionary_strength = -0.03
		tolerance_own = -1
		tolerance_heretic = -1
	}
}
msg_aztlan2_ref = {
	#lock_level_when_selected = yes
	#allow_normal_conversion = no
	potential = {
		religion = aztlan_worship
	}
	icon = "msg_aztlan2_ref"
	trigger = {
		custom_trigger_tooltip = {
			tooltip = msg_religious2_ref_tt
			OR = {
				AND = {
					has_reform = msg_aztlan_priesthood_yes
					has_reform = msg_old_faith_yes
				}
				AND = {
					has_reform = msg_aztlan_priesthood_yes
					has_reform = msg_sacrifice_yes
				}
				AND = {
					has_reform = msg_sacrifice_yes
					has_reform = msg_old_faith_yes
				}
				
			}
			NOT = {
				AND = {
					has_reform = msg_aztlan_priesthood_yes
					has_reform = msg_old_faith_yes
					has_reform = msg_sacrifice_yes
				}
			}
		}
		NOT = { has_reform = msg_aztlan3_ref }
	}
	modifiers = {
		global_missionary_strength = -0.02
		tolerance_own = -1
		tolerance_heretic = -1
	}
}
msg_aztlan3_ref = {
	#lock_level_when_selected = yes
	#allow_normal_conversion = no
	potential = {
		religion = aztlan_worship
	}
	icon = "msg_aztlan3_ref"
	trigger = {
		has_reform = msg_aztlan_priesthood_yes
		has_reform = msg_old_faith_yes
		has_reform = msg_sacrifice_yes
	}
	effect = {
		custom_tooltip = msg_pass_crush_to_remove_debuffs_tt
		custom_tooltip = msg_gain_700_rp_if_has_all_rel_tt
		if = {
			limit = {
				has_reform = msg_government3_ref
				has_reform = msg_economy3_ref
			}
			change_government_reform_progress = 700
		}
	}
	modifiers = {
		global_missionary_strength = -0.01
	}
}

#Priesthood-Aztlan
msg_aztlan_priesthood_no = {
	icon = "msg_aztlan_priesthood_no"
	potential = {
		religion = aztlan_worship
	}
	trigger = {
		NOT = { has_reform = msg_aztlan_priesthood_ref }
	}
	modifiers = {
		global_missionary_strength = -0.02
	}
}

msg_aztlan_priesthood_ref = {
	icon = "msg_aztlan_priesthood_ref"
	#lock_level_when_selected = yes
	potential = {
		religion = aztlan_worship
	}
	trigger = {
		if = {
			limit = { 
				NOT = { has_reform = msg_aztlan_priesthood_ref } 
			}
			if = {
				limit = {
					ai = no
				}
				stability = 1
			}
			adm_power = 50
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	modifiers = {
		global_missionary_strength = -0.015
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		# if = {
			# limit = { ai = no }
			# add_stability = -1
		# }
		add_adm_power = -50
		country_event = { id = msg_reforms.8 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_aztlan_priesthood_yes = {
	icon = "msg_aztlan_priesthood_yes"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		religion = aztlan_worship
	}
	trigger = {
		if = {
			limit = {
				has_global_flag = msg_first_religious_reform_done
			}
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_1_year #A year has passed since we enacted the reform
				has_reform = msg_aztlan_priesthood_yes
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
				has_reform = msg_aztlan_priesthood_yes
			}
		}
	}
	effect = {
		#improve religion
		if = {
			limit = {
				has_reform = msg_aztlan0_ref
			}
			#remove_government_reform = msg_aztlan0_ref
			add_government_reform = msg_aztlan1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_aztlan1_ref
			}
			#remove_government_reform = msg_aztlan1_ref
			add_government_reform = msg_aztlan2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_aztlan2_ref
			}
			#remove_government_reform = msg_aztlan2_ref
			add_government_reform = msg_aztlan3_ref
		}
	}
}

#Reorganisation-Aztlan
msg_old_faith_no = {
	icon = "msg_hellenic0_ref"
	potential = {
		religion = aztlan_worship
	}
	trigger = {
		NOT = { has_reform = msg_old_faith_ref }
	}
	modifiers = {
		tolerance_heretic = -1
		tolerance_own = -1
	}
}

msg_old_faith_ref = {
	icon = "msg_old_faith_ref"
	#lock_level_when_selected = yes
	potential = {
		religion = aztlan_worship
	}
	trigger = {
		if = {
			limit = { 
				NOT = { has_reform = msg_old_faith_ref } 
			}
			if = {
				limit = {
					ai = no
				}
				stability = 1
			}
			adm_power = 50
			prestige = 20
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	modifiers = {
		tolerance_heretic = -0.8
		tolerance_own = -0.8
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		if = {
			limit = { ai = no }
			add_stability = -1
		}
		add_adm_power = -50
		add_prestige = -20
		country_event = { id = msg_reforms.9 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_old_faith_yes = {
	icon = "msg_hellenic3_ref"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		religion = aztlan_worship
	}
	trigger = {
		if = {
			limit = {
				has_global_flag = msg_second_religious_reform_done
			}
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_1_year #A year has passed since we enacted the reform
				has_reform = msg_old_faith_yes
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
				has_reform = msg_old_faith_yes
			}
		}
	}
	effect = {
		#improve religion
		if = {
			limit = {
				has_reform = msg_aztlan0_ref
			}
			#remove_government_reform = msg_aztlan0_ref
			add_government_reform = msg_aztlan1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_aztlan1_ref
			}
			#remove_government_reform = msg_aztlan1_ref
			add_government_reform = msg_aztlan2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_aztlan2_ref
			}
			#remove_government_reform = msg_aztlan2_ref
			add_government_reform = msg_aztlan3_ref
		}
	}
}

#Worship-Aztlan
msg_sacrifice_no = {
	icon = "msg_sacrifice_no"
	potential = {
		religion = aztlan_worship
	}
	trigger = {
		NOT = { has_reform = msg_sacrifice_ref }
	}
	modifiers = {
		stability_cost_modifier = 0.50
	}
}

msg_sacrifice_ref = {
	icon = "msg_sacrifice_ref"
	#lock_level_when_selected = yes
	potential = {
		religion = aztlan_worship
	}
	trigger = {
		if = {
			limit = { 
				NOT = { has_reform = msg_sacrifice_ref } 
			}
			if = {
				limit = {
					ai = no
				}
				stability = 0
			}
			adm_power = 50
			legitimacy = 70
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	modifiers = {
		stability_cost_modifier = 0.40
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		add_stability = 1
		add_adm_power = -50
		add_legitimacy = -20
		country_event = { id = msg_reforms.10 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_sacrifice_yes = {
	icon = "msg_sacrifice_yes"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		religion = aztlan_worship
	}
	trigger = {
		if = {
			limit = {
				has_global_flag = msg_third_religious_reform_done
			}
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_1_year #A year has passed since we enacted the reform
				has_reform = msg_sacrifice_yes
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
				has_reform = msg_sacrifice_yes
			}
		}
	}
	effect = {
		#improve religion
		if = {
			limit = {
				has_reform = msg_aztlan0_ref
			}
			#remove_government_reform = msg_aztlan0_ref
			add_government_reform = msg_aztlan1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_aztlan1_ref
			}
			#remove_government_reform = msg_aztlan1_ref
			add_government_reform = msg_aztlan2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_aztlan2_ref
			}
			#remove_government_reform = msg_aztlan2_ref
			add_government_reform = msg_aztlan3_ref
		}
	}
}

##Orthodox
#Base
msg_christian0_ref = {
	icon = "msg_christian0_ref"
	#lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
	}
	trigger = {
		OR = {
			religion = orthodox
			religion = elysian_orthodoxy
		}
		#custom_trigger_tooltip = {
			#tooltip = msg_economy0_tt
			NOT = { has_reform = msg_spartan_patriarch_yes }
			NOT = { has_reform = msg_holy_army_yes }
			NOT = { 
				custom_trigger_tooltip = {
					tooltip = msg_has_saint_leo_reform_tt
					OR = {
						has_reform = msg_saint_leo_yes
						has_reform = msg_saint_leo_yes_sinner
					}
				}
			}
		#}
		NOT = { has_reform = msg_christian1_ref }
		NOT = { has_reform = msg_christian2_ref }
		NOT = { has_reform = msg_christian3_ref }
	}
	modifiers = {
		adm_tech_cost_modifier = 0.2
		missionaries = -1
		global_missionary_strength = -0.04
		tolerance_own = -1
		tolerance_heretic = -2
	}
}
msg_christian1_ref = {
	#lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
	}
	icon = "msg_christian1_ref"
	trigger = {
		OR = {
			religion = orthodox
			religion = elysian_orthodoxy
		}
		custom_trigger_tooltip = {
			tooltip = msg_religious1_ref_tt
			OR = {
				has_reform = msg_spartan_patriarch_yes
				has_reform = msg_holy_army_yes
				custom_trigger_tooltip = {
					tooltip = msg_has_saint_leo_reform_tt
					OR = {
						has_reform = msg_saint_leo_yes
						has_reform = msg_saint_leo_yes_sinner
					}
				}
			}
			NOT = {
				AND = {
					has_reform = msg_spartan_patriarch_yes
					has_reform = msg_holy_army_yes
				}
				AND = {
					has_reform = msg_spartan_patriarch_yes
					custom_trigger_tooltip = {
						tooltip = msg_has_saint_leo_reform_tt
						OR = {
							has_reform = msg_saint_leo_yes
							has_reform = msg_saint_leo_yes_sinner
						}
					}
				}
				AND = {
					custom_trigger_tooltip = {
						tooltip = msg_has_saint_leo_reform_tt
						OR = {
							has_reform = msg_saint_leo_yes
							has_reform = msg_saint_leo_yes_sinner
						}
					}
					has_reform = msg_holy_army_yes
				}
			}
		}
		NOT = { has_reform = msg_christian2_ref }
		NOT = { has_reform = msg_christian3_ref }
	}
	modifiers = {
		adm_tech_cost_modifier = 0.1
		global_missionary_strength = -0.03
		tolerance_own = -1
		tolerance_heretic = -1
	}
}
msg_christian2_ref = {
	#lock_level_when_selected = yes
	#allow_normal_conversion = no
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
	}
	icon = "msg_christian2_ref"
	trigger = {
		OR = {
			religion = orthodox
			religion = elysian_orthodoxy
		}
		custom_trigger_tooltip = {
			tooltip = msg_religious2_ref_tt
			OR = {
				AND = {
					has_reform = msg_spartan_patriarch_yes
					has_reform = msg_holy_army_yes
				}
				AND = {
					has_reform = msg_spartan_patriarch_yes
					custom_trigger_tooltip = {
						tooltip = msg_has_saint_leo_reform_tt
						OR = {
							has_reform = msg_saint_leo_yes
							has_reform = msg_saint_leo_yes_sinner
						}
					}
				}
				AND = {
					custom_trigger_tooltip = {
						tooltip = msg_has_saint_leo_reform_tt
						OR = {
							has_reform = msg_saint_leo_yes
							has_reform = msg_saint_leo_yes_sinner
						}
					}
					has_reform = msg_holy_army_yes
				}
				
			}
			NOT = {
				AND = {
					has_reform = msg_spartan_patriarch_yes
					has_reform = msg_holy_army_yes
					custom_trigger_tooltip = {
						tooltip = msg_has_saint_leo_reform_tt
						OR = {
							has_reform = msg_saint_leo_yes
							has_reform = msg_saint_leo_yes_sinner
						}
					}
				}
			}
		}
		NOT = { has_reform = msg_christian3_ref }
	}
	modifiers = {
		global_missionary_strength = -0.02
		tolerance_own = -1
		tolerance_heretic = -1
	}
}
msg_christian3_ref = {
	#lock_level_when_selected = yes
	#allow_normal_conversion = no
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
	}
	icon = "msg_christian3_ref"
	trigger = {
		OR = {
			religion = orthodox
			religion = elysian_orthodoxy
		}
		has_reform = msg_spartan_patriarch_yes
		has_reform = msg_holy_army_yes
		custom_trigger_tooltip = {
			tooltip = msg_has_saint_leo_reform_tt
			OR = {
				has_reform = msg_saint_leo_yes
				has_reform = msg_saint_leo_yes_sinner
			}
		}
	}
	effect = {
		custom_tooltip = msg_pass_crush_to_remove_debuffs_tt
		custom_tooltip = msg_gain_700_rp_if_has_all_rel_tt
		if = {
			limit = {
				has_reform = msg_government3_ref
				has_reform = msg_economy3_ref
			}
			change_government_reform_progress = 700
		}
	}
	modifiers = {
		global_missionary_strength = -0.01
	}
}

#Priesthood-Orthodox
msg_spartan_patriarch_no = {
	icon = "msg_spartan_patriarch_no"
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
	}
	trigger = {
		OR = {
			religion = orthodox
			religion = elysian_orthodoxy
		}
		NOT = { has_reform = msg_spartan_patriarch_ref }
	}
	#modifiers = {
		#global_missionary_strength = -0.01
	#}
}

msg_spartan_patriarch_ref = {
	icon = "msg_spartan_patriarch_ref"
	#lock_level_when_selected = yes
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
	}
	trigger = {
		if = {
			limit = { 
				NOT = { has_reform = msg_spartan_patriarch_ref } 
			}
			OR = {
				religion = orthodox
				religion = elysian_orthodoxy
			}
			if = {
				limit = {
					ai = no
				}
				stability = 1
			}
			adm_power = 50
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	#modifiers = {
	#	global_missionary_strength = -0.008
	#}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		# if = {
			# limit = { ai = no }
			# add_stability = -1
		# }
		add_adm_power = -50
		add_corruption = 3
		country_event = { id = msg_reforms.11 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_spartan_patriarch_yes = {
	icon = "msg_spartan_patriarch_yes"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
	}
	trigger = {
		OR = {
			religion = orthodox
			religion = elysian_orthodoxy
		}
		if = {
			limit = {
				has_global_flag = msg_first_religious_reform_done
			}
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_1_year #A year has passed since we enacted the reform
				has_reform = msg_spartan_patriarch_yes
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
				has_reform = msg_spartan_patriarch_yes
			}
		}
	}
	effect = {
		#improve religion
		if = {
			limit = {
				has_reform = msg_christian0_ref
			}
			#remove_government_reform = msg_christian0_ref
			add_government_reform = msg_christian1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_christian1_ref
			}
			#remove_government_reform = msg_christian1_ref
			add_government_reform = msg_christian2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_christian2_ref
			}
			#remove_government_reform = msg_christian2_ref
			add_government_reform = msg_christian3_ref
		}
	}
}

#Reorganisation-Orthodox
msg_holy_army_no = {
	icon = "msg_holy_army_no"
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
	}
	trigger = {
		OR = {
			religion = orthodox
			religion = elysian_orthodoxy
		}
		NOT = { has_reform = msg_holy_army_ref }
	}
	modifiers = {
		manpower_recovery_speed = -0.25
	}
}

msg_holy_army_ref = {
	icon = "msg_holy_army_ref"
	#lock_level_when_selected = yes
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
	}
	trigger = {
		if = {
			limit = { 
				NOT = { has_reform = msg_holy_army_ref } 
			}
			OR = {
				religion = orthodox
				religion = elysian_orthodoxy
			}
			if = {
				limit = {
					ai = no
				}
				stability = 1
			}
			mil_power = 50
			manpower = 5
			government_reform_progress = 25
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	modifiers = {
		manpower_recovery_speed = -0.20
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		# if = {
			# limit = { ai = no }
			# add_stability = -1
		# }
		add_mil_power = -50
		add_manpower = -5
		country_event = { id = msg_reforms.12 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_holy_army_yes = {
	icon = "soldiers_4"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
	}
	trigger = {
		OR = {
			religion = orthodox
			religion = elysian_orthodoxy
		}
		if = {
			limit = {
				has_global_flag = msg_second_religious_reform_done
			}
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_1_year #A year has passed since we enacted the reform
				has_reform = msg_holy_army_yes
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
				has_reform = msg_holy_army_yes
			}
		}
	}
	effect = {
		#improve religion
		if = {
			limit = {
				has_reform = msg_christian0_ref
			}
			#remove_government_reform = msg_christian0_ref
			add_government_reform = msg_christian1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_christian1_ref
			}
			#remove_government_reform = msg_christian1_ref
			add_government_reform = msg_christian2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_christian2_ref
			}
			#remove_government_reform = msg_christian2_ref
			add_government_reform = msg_christian3_ref
		}
	}
}

#Worship-Orthodox
msg_saint_leo_no = {
	icon = "msg_saint_leo_no"
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
	}
	trigger = {
		OR = {
			religion = orthodox
			religion = elysian_orthodoxy
		}
		NOT = { has_reform = msg_saint_leo_ref }
	}
	modifiers = {
		tolerance_own = -1
	}
}

msg_saint_leo_ref = {
	icon = "msg_saint_leo_ref"
	#lock_level_when_selected = yes
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
	}
	trigger = {
		if = {
			limit = { 
				NOT = { has_reform = msg_saint_leo_ref } 
			}
			OR = {
				religion = orthodox
				religion = elysian_orthodoxy
			}
			if = {
				limit = {
					ai = no
				}
				stability = 1
			}
			adm_power = 50
			custom_trigger_tooltip = {
				tooltip = msg_leonidas_dead
				NOT = { has_ruler_modifier = msg_has_leonidas }
			}
			custom_trigger_tooltip = {
				tooltip = msg_no_reform_in_past_year_tt
				OR = {
					NOT = { has_country_flag = msg_reform_in_progress }
					had_country_flag = { flag = msg_reform_in_progress days = 365 }
				}
			}
			if = {
				limit = {
					ai = yes
				}
				always = no
			}
		}
	}
	modifiers = {
		tolerance_own = -0.8
	}
	effect = {
		custom_tooltip = msg_ignore_reform_corr_tt
		hidden_effect = {
			add_corruption = -10
		}
		# if = {
			# limit = { ai = no }
			# add_stability = -1
		# }
		add_adm_power = -50
		country_event = { id = msg_reforms.13 }
		change_government_reform_progress = -25
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
		if = {
			limit = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
			custom_tooltip = msg_starting_war_verybad_tt
		}
		else = {
			custom_tooltip = msg_starting_war_bad_tt
		}
	}
	ai = {
		factor = 100
	}
}

msg_saint_leo_yes = {
	icon = "elysian_patriarchy"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
		NOT = { has_reform = msg_saint_leo_yes_sinner }
	}
	trigger = {
		OR = {
			religion = orthodox
			religion = elysian_orthodoxy
		}
		if = {
			limit = {
				has_global_flag = msg_third_religious_reform_done
			}
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_1_year #A year has passed since we enacted the reform
				has_reform = msg_saint_leo_yes
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
				has_reform = msg_saint_leo_yes
			}
		}
	}
	effect = {
		#improve religion
		if = {
			limit = {
				has_reform = msg_christian0_ref
			}
			#remove_government_reform = msg_christian0_ref
			add_government_reform = msg_christian1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_christian1_ref
			}
			#remove_government_reform = msg_christian1_ref
			add_government_reform = msg_christian2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_christian2_ref
			}
			#remove_government_reform = msg_christian2_ref
			add_government_reform = msg_christian3_ref
		}
	}
}

msg_saint_leo_yes_sinner = {
	icon = "msg_saint_leo_yes_sinner"
	lock_level_when_selected = yes
	allow_normal_conversion = no
	potential = {
		NOT = { religion = pantheon_worship }
		NOT = { religion = aztlan_worship }
		has_reform = msg_saint_leo_yes_sinner
	}
	trigger = {
		OR = {
			religion = orthodox
			religion = elysian_orthodoxy
		}
		if = {
			limit = {
				has_global_flag = msg_third_religious_reform_done
			}
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_1_year #A year has passed since we enacted the reform
				has_reform = msg_saint_leo_yes_sinner
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = msg_had_reform_for_3_years #3 years has passed since we enacted the reform
				has_reform = msg_saint_leo_yes_sinner
			}
		}
	}
	effect = {
		#improve religion
		if = {
			limit = {
				has_reform = msg_christian0_ref
			}
			#remove_government_reform = msg_christian0_ref
			add_government_reform = msg_christian1_ref
		}
		else_if = {
			limit = {
				has_reform = msg_christian1_ref
			}
			#remove_government_reform = msg_christian1_ref
			add_government_reform = msg_christian2_ref
		}
		else_if = {
			limit = {
				has_reform = msg_christian2_ref
			}
			#remove_government_reform = msg_christian2_ref
			add_government_reform = msg_christian3_ref
		}
	}
}



##CRUSH NOBLES
msg_crush_nobles_ref = {
	icon = "fist_in_air"
	trigger = {
		if = {
			limit = { 
				NOT = { has_reform = msg_crush_nobles_ref } 
			}
			if = {
				limit = {
					ai = no
				}
				stability = 2
			}
			mil_power = 100
			adm_power = 100
			dip_power = 100
			has_reform = msg_government3_ref
			has_reform = msg_economy3_ref
			if = {
				limit = {
					religion = pantheon_worship
				}
				has_reform = msg_hellenic3_ref
			}
			else_if = {
				limit = {
					religion = aztlan_worship
				}
				has_reform = msg_aztlan3_ref
			}
			else_if = {
				limit = {
					OR = {
						religion = orthodox
						religion = elysian_orthodoxy
					}
				}
				has_reform = msg_christian3_ref
			}
			# custom_trigger_tooltip = {
				# tooltip = msg_no_reform_tt
				# OR = {
					# NOT = { has_country_flag = msg_reform_in_progress }
					# had_country_flag = { flag = msg_reform_in_progress days = 1095 }
				# }
			# }
		}
	}
	effect = {
		#custom_tooltip = msg_ignore_reform_corr_tt
		#hidden_effect = {
		#	add_corruption = -10
		#}
		if = {
			limit = {
				ai = no
			}
			add_stability = -2
		}
		add_mil_power = -100
		add_adm_power = -100
		add_dip_power = -100
		country_event = { id = msg_reforms.17 }
		add_corruption = -5
		clr_country_flag = msg_reform_in_progress
		set_country_flag = msg_reform_in_progress
	}
}

# 04_VOV

jarldom_legacy = {
	icon = "jarldom"
	allow_normal_conversion = no
	monarchy = yes
	legacy_government = yes
	valid_for_nation_designer = no
	valid_for_new_country = no
	allow_convert = no
	modifiers = {
		naval_maintenance_modifier = -0.1
		unjustified_demands = -0.1
		diplomatic_upkeep = -1
		max_states = 2
	}
}

althing_republic_legacy = {
	allow_normal_conversion = no
	republic = yes
	legacy_government = yes
	valid_for_nation_designer = no
	valid_for_new_country = no
	republican_name = yes
	royal_marriage = no
	allow_convert = no
	duration = 8
	modifiers = {
		trade_efficiency = 0.15
		naval_maintenance_modifier = -0.15
		republican_tradition = 0.5
		max_absolutism = -15
		global_autonomy = -0.05
		max_states = 3
	}
}

varangian_guard_legacy = {
	icon = "soldiers_6"
	allow_normal_conversion = no
	legacy_government = yes
	#monarchy = yes
	republic = yes
	valid_for_nation_designer = no
	valid_for_new_country = no
	allow_convert = no
	heir = yes
	duration = 30
	modifiers = {
		fort_maintenance_modifier = -0.2
		monarch_military_power = 3
		monthly_militarized_society = 0.05
		global_autonomy = -0.05
		max_absolutism = 5
		heir_chance = -2
	}
	conditional = {
		allow = { has_dlc = "Rights of Man" }
		militarised_society = yes
	}
}

jarldom = {
	icon = "jarldom"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		has_reform = jarldom
	}
	legacy_equivalent = jarldom_legacy
	lock_level_when_selected = yes
	valid_for_new_country = no
	modifiers = {
		naval_maintenance_modifier = -0.1
		unjustified_demands = -0.1
		diplomatic_upkeep = -1
		max_states = 1
	}
	custom_attributes = {
		locked_government_type = yes
	}
}

althing_republic = {
	icon = "althing_republic"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		has_reform = althing_republic
	}
	legacy_equivalent = althing_republic_legacy
	lock_level_when_selected = yes
	valid_for_new_country = no
	duration = 8
	modifiers = {
		trade_efficiency = 0.15
		naval_maintenance_modifier = -0.15
		republican_tradition = 0.5
		max_absolutism = -15
		max_states = 1
	}
	custom_attributes = {
		locked_government_type = yes
	}
}

varangian_guard = {
	icon = "soldiers_6"
	allow_normal_conversion = no
	potential = {
		has_reform = varangian_guard
	}
	legacy_equivalent = varangian_guard_legacy
	lock_level_when_selected = yes
	valid_for_new_country = no
	heir = yes
	duration = 30
	modifiers = {
		fort_maintenance_modifier = -0.2
		monarch_military_power = 3
		monthly_militarized_society = 0.05
		heir_chance = -2
	}
	custom_attributes = {
		locked_government_type = yes
	}
	conditional = {
		allow = { has_dlc = "Rights of Man" }
		militarised_society = yes
	}
}

frequent_elections_reform_vrg = {
	icon = "ballot_box"
	allow_normal_conversion = yes
	potential = {
		has_reform = varangian_guard
	}
	modifiers = {
		max_absolutism = -10
		election_cycle = -10
	}
}

# 06_Gov

parliamentary_reform = {
	icon = "judge"
	modifiers = {
		global_unrest = -1
	}
	potential = {
		#NOT = { has_reform = senatorial_empire }
		#NOT = { has_reform = elysian_absolute_empire }
		NOT = {
			OR = {
				tag = NHS
				tag = ELY
				tag = ERF
				tag = ELR
				tag = ERR
			}
		}
	}
	trigger = {
		if = {
			limit = { NOT = { has_dlc = "Mandate of Heaven" } }
			NOT = { has_reform = celestial_empire }
			NOT = { has_reform = revolutionary_republic_reform }
		}
	}

	conditional = {
		allow = { has_dlc = "Common Sense" }
		has_parliament = yes
	}
}

# Upgraded Indian estate reforms

permanent_marathas_council_reform = {
	icon = "noble_indian"
	allow_normal_conversion = yes
	potential = {
		has_estate = estate_maratha
		technology_group = indian
	}
	modifiers = {
		discipline = 0.05
		# reduce noble loyalty and influence if has estate
	}
	custom_attributes = {
		maratha_general_interaction = yes
	}
}

governmental_purbias_register_reform = {
	icon = "rajput_kingdom"
	potential = {
		has_estate = estate_rajput
		technology_group = indian
	}
	modifiers = {
		recover_army_morale_speed = 0.05
		# reduce noble loyalty and influence if has estate
	}
	custom_attributes = {
		better_purbias_interaction = yes
	}
}

# for Spain

council_of_the_indies_reform = {
	icon = "merchant_ship"
	allow_normal_conversion = yes
	potential = {
		culture_group = iberian
		capital_scope = {
			region = iberia_region
		}
	}
	trigger = {
		num_of_colonists = 1
		culture_group = iberian
		capital_scope = {
			region = iberia_region
		}
	}
	modifiers = {
		expel_minorities_cost = -0.3
	}
}

# 06_nat

native_council_after_legacy = {
	allow_normal_conversion = no
	republic = yes
	legacy_government = yes
	valid_for_nation_designer = no
	valid_for_new_country = no
	republican_name = yes
	duration = 6
	royal_marriage = no
	allow_convert = no
	modifiers = {
		stability_cost_modifier = -0.15
		land_maintenance_modifier = -0.15
		land_forcelimit_modifier = 0.15
		global_autonomy = -0.025
		max_absolutism = -30
	}
	custom_attributes = {
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = yes
	}
	conditional = {
		allow = {
			has_dlc = "Res Publica"
		}
		states_general_mechanic = {
			council = {
				advisor_cost = -0.25
				administrative_efficiency = 0.05
				stability_cost_modifier = -0.10
				republican_tradition = 0.5
			}

			chief = {
				prestige = 0.5
				all_power_cost = -0.05
				global_autonomy = -0.05
				republican_tradition = -0.5
			}
		}
	}
}

native_council2 = {
	icon = "castle"
	allow_normal_conversion = no
	#monarchy = yes
	legacy_government = yes
	allow_convert = no
	fixed_rank = 1
	valid_for_nation_designer = no
	valid_for_new_country = no
	modifiers = {
		stability_cost_modifier = -0.20
		land_maintenance_modifier = -0.25
		diplomatic_upkeep = -1
	}
}

native_council_after = {
	icon = "generic_people"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		has_reform = native_council_after
	}
	legacy_equivalent = native_council_after_legacy
	lock_level_when_selected = yes
	duration = 6
	modifiers = {
		stability_cost_modifier = -0.15
		land_maintenance_modifier = -0.15
		land_forcelimit_modifier = 0.15
		max_absolutism = -30
	}
	custom_attributes = {
		enables_aristocratic_idea_group = no
		enables_plutocratic_idea_group = yes
		locked_government_type = yes
	}
	
	conditional = {
		allow = {
			has_dlc = "Res Publica"
		}
		states_general_mechanic = {
			council = {
				advisor_cost = -0.25
				administrative_efficiency = 0.05
				stability_cost_modifier = -0.10
				republican_tradition = 0.5
			}

			chief = {
				prestige = 0.5
				all_power_cost = -0.05
				global_autonomy = -0.05
				republican_tradition = -0.5
			}
		}
	}
}

migratory_society = {
	icon = "shaman"
	allow_migration = yes
	trigger = {
		NOT = { num_of_cities = 2 }
	}
	legacy_equivalent = native_council_legacy
	modifiers = {
		stability_cost_modifier = -0.33
		land_maintenance_modifier = -0.25
		diplomatic_upkeep = -1
		global_institution_spread = -0.1
	}
	custom_attributes = {
		locked_government_type = yes
	}
	ai = {
		factor = 0
	}
}

sedentary_society = {
	icon = "tribal_civil_society"
	legacy_equivalent = native_council2
	modifiers = {
		stability_cost_modifier = -0.20
		land_maintenance_modifier = -0.25
	}
	custom_attributes = {
		locked_government_type = yes
	}
}

# 07_oth


cretan_admiralty_legacy = {
	icon = "compass"
	allow_normal_conversion = no
	republic = yes
	legacy_government = yes
	republican_name = no
	heir = yes
	valid_for_nation_designer = no
	valid_for_new_country = no
	has_term_election = no
	factions = {
		ctm_dynatoi
		ctm_patrikioi
		ctm_admiralty
	}
	modifiers = {
		navy_tradition = 1
		naval_forcelimit_modifier = 0.2
		global_sailors_modifier = 0.2
		monarch_diplomatic_power = 1
		heir_chance = -2
	}
	custom_attributes = {
		locked_government_type = yes
		election_on_death = yes
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = yes
	}
}
cretan_admiralty = {
	icon = "compass"
	allow_normal_conversion = no
	potential = {
		#nhs_is_elysia_not_seen = yes
		has_reform = cretan_admiralty
	}
	legacy_equivalent = cretan_admiralty_legacy
	lock_level_when_selected = yes
	valid_for_new_country = no
	republican_name = no
	heir = yes
	factions = {
		ctm_dynatoi
		ctm_patrikioi
		ctm_admiralty
	}
	modifiers = {
		navy_tradition = 1
		naval_forcelimit_modifier = 0.2
		global_sailors_modifier = 0.2
		monarch_diplomatic_power = 1
		heir_chance = -2
	}
	custom_attributes = {
		locked_government_type = yes
		election_on_death = yes
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = yes
	}
	conditional = {
		allow = {
			has_dlc = "Res Publica"
		}
		can_use_trade_post = yes
	}
}
