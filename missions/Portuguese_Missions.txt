#IR Portuguese mission overhaul
#slot 1
por_slot_1 = {

	slot = 1
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = POR
			tag = LSA	
		}
	}
	has_country_shield = yes
	
	por_iberian_unity = {
		icon = mission_alliances
		required_missions = { por_centralization }
		position = 2
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			country_or_non_sovereign_subject_holds = CAS
		}
		
		trigger = {
			if = {
				limit = { exists = CAS NOT = { exists = SPA } }
				marriage_with = CAS
			}
			else_if = {
				limit = { exists = SPA NOT = { exists = CAS } }
				marriage_wist = SPA
			}
		}
		
		effect = {
			add_prestige = 5
		}
	}
	
	por_intervene_cas = {
		icon = mission_alliances
		required_missions = { por_iberian_unity }
		position = 3
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			country_or_non_sovereign_subject_holds = CAS
		}
		
		trigger = {
			#has_country_modifier = por_won_wocs
		}
		
		effect = {
			create_union = LON
		}
	}
	
}

#slot 2
por_slot_2 = {

	slot = 2
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = POR
			tag = LSA	
		}
	}
	has_country_shield = yes
	
	por_centralization = {
		icon = mission_have_two_subjects
		required_missions = { }
		position = 1
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			por_core_provinces = yes
			NOT = { owned_by = ROOT }
		}
		
		trigger = {
			conquest_mission_trigger = {
				TOOLTIP=owned_by_highlighted 
				PROVINCES=por_core_provinces
				OWNER_TYPE=owned_by
			}
			NOT = { exists = BGC }
			NOT = { exists = VSU }
			NOT = { exists = CIM }
			NOT = { exists = BJ1 }
		}
		
		effect = {
			add_adm_power = 75
			add_country_modifier = {
				name = "por_centralize"
				duration = 7300
			}
		}
	}
	
	por_consolidate_authority = {
		icon = mission_have_two_subjects
		required_missions = { por_centralization }
		position = 2
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			por_core_provinces = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			NOT = { average_home_autonomy = 30 }
		}
		
		effect = {
			change_government_reform_progress = 50
		}
	}
	
	por_reorganize_cortes = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { por_consolidate_authority }
		position = 3
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		
		trigger = {
			if = {
				limit = { has_estate = estate_nobles }
				NOT = {
					estate_influence = {
    					estate = estate_nobles
   						influence = 25
					}			
				}
			}
			if = {
				limit = { has_estate = estate_church }
				NOT = {
					estate_influence = {
    					estate = estate_church
   						influence = 25
					}			
				}
			}
			if = {
				limit = { has_estate = estate_burghers }
				NOT = {
					estate_influence = {
    					estate = estate_burghers
   						influence = 25
					}			
				}
			}
		}
		
		effect = {
		#	change_government_reform_progress = 75
		}
	}
	
	por_invest_sagres = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { por_reorganize_cortes por_navy_build }
		position = 4
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		
		trigger = {
			treasury = 200
			navy_tradition = 30
			230 = {
				owned_by = ROOT
				has_province_modifier = por_sacres
			}
		}
		
		effect = {
			add_treasury = -200
			add_country_modifier = {
				name = "sagres_trained_captains"
				duration = -1
			}
			if = { 
				limit = { 230 = { NOT = { has_province_modifier = por_sacres } } }
				add_province_modifier = {
					name = "por_sacres"
					duration = -1
				}
			}
			if = {
				limit = { NOT = { has_government_reform = noble_explorers_reform } }
				add_government_reform = noble_explorers_reform
			}	
		}
	}
	
	por_carrack = {
		icon = mission_galleys_in_port
		required_missions = { por_invest_sagres }
		position = 5
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		trigger = {
			treasury = 500
			num_of_heavy_ships = 15
			dip_tech = 9
			has_idea = overseas_exploration
		}
		
		effect = {
			add_treasury = -500
			add_country_modifier = {
				name = "por_carrack"
				duration = -1
			}
		}
	}
	
	por_frota_em_sur = {
		icon = mission_galleys_in_port
		required_missions = { por_carrack por_caravel }
		position = 6
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		trigger = {
			treasury = 1000
			mil_power = 400
			num_of_heavy_ships = 50
			num_of_light_ships = 100
		}
		
		effect = {
			add_treasury = -1000
			add_mil_power = -400
			add_country_modifier = {
				name = "por_frota_em_sur"
				duration = -1
			}
		}
	}
}

#slot 3
por_slot_3 = {

	slot = 3
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = POR
			tag = LSA	
		}
	}
	has_country_shield = yes
	
	por_navy_build = {
		icon = mission_galleys_in_port
		required_missions = { por_crusade_trade por_control_tangiers }
		position = 3
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		trigger = {
			navy_size_percentage = 0.9
			num_of_heavy_ship = 5
		}
		
		effect = {
			add_navy_tradition = 5
			add_country_modifier = {
				name = "por_navigators_legacy"
				duration = -1
			}
		}
	}
	
	por_navy_expand = {
		icon = mission_galleys_in_port
		required_missions = { por_navy_build }
		position = 4
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		trigger = {
			treasury = 200
			num_of_ports = 20
			dock = 5
		}
		
		effect = {
			add_treasury = -200
			add_navy_tradition = 5
			227 = { add_building = shipyard }
			230 = { add_building = shipyard }
			231 = { add_building = shipyard }
		}
	}
	
	por_caravel = {
		icon = mission_galleys_in_port
		required_missions = { por_navy_expand }
		position = 5
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		trigger = {
			treasury = 300
			num_of_light_ships = 30
			dip_tech = 9
			has_idea = overseas_exploration
		}
		
		effect = {
			add_treasury = -300
			add_country_modifier = {
				name = "por_caravel"
				duration = -1
			}
		}
	}
}

#slot 4
por_slot_4 = {

	slot = 4
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = POR
			tag = LSA	
		}
	}
	has_country_shield = yes
	
	
	por_crusade_trade = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { por_dum_diversas por_centralization }
		position = 2
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		
		trigger = {
			227 = { #Lisbon
				trade_share = {
					country = ROOT
					share = 60
				}
			}
			345 = { #Safi
				trade_share = {
					country = ROOT
					share = 30
				}
			}
		}
		
		effect = {
			add_dip_power = 50
			227 = { #Lisbon
				add_trade_modifier = {
					who = ROOT
					duration = 7300
					power = 25
					key = lisbon_ambition
				}
			}
			345 = { #Safi
				add_trade_modifier = {
					who = ROOT
					duration = 7300
					power = 25
					key = safi_ambition
				}
			}
		}
	}
}

#slot 5
por_slot_5 = {

	slot = 5
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = POR
			tag = LSA	
		}
	}
	has_country_shield = yes
	
	por_dum_diversas = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { }
	
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		trigger = {
			any_rival_country = {
				custom_trigger_tooltip = {
					tooltip = capital_maghreb.tooltip
					capital_scope = { region = maghreb_region }
				}
				is_neighbor_of = ROOT
				religion_group = muslim
			}
			PAP = { 
				has_opinion = {
					who = ROOT
					value = 50
				}
			}
		}
		
		effect = {
			add_country_modifier = {
				name = "por_dum_diversas"
				duration = 7300
			}
			custom_tooltip = por_dum_diversas_claims.tooltip
			assign_claim_core = {
				PROVINCES = por_tangiers_provinces
				TYPE = permanent_claim
			}
		}
	}
	
	por_control_tangiers = {
		icon = mission_unite_home_region
		required_missions = { por_dum_diversas }
		position = 2
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			por_tangiers_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=por_tangiers_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = {
				PROVINCES = por_tangiers_provinces
			}
			#Remove bypass modifier on Ceuta - only valuable with Tangier
			1751 = { remove_province_modifier = bypassed_by_tangiers }
			#Cripple AI Morocco through a somewhat historical turn of events. Morocco could be strong in theory, but they are prone to internal disputes, one represented here.
			if = { 
				limit = { MOR = { ai = yes } }
				MOR = { country_event = { id = IR_flavor_POR.10 days = 0 } }
			}
			custom_tooltip = por_control_tangiers_claims.tooltip
			assign_claim_core = {
				PROVINCES = por_mazagao_provinces
				TYPE = permanent_claim
			}
		}
	}
	
	por_control_mazagao = {
		icon = mission_unite_home_region
		required_missions = { por_control_tangiers }
		position = 3
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			por_mazagao_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=por_mazagao_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = {
				PROVINCES = por_mazagao_provinces
			}
		}
	}
	
	por_crusade_morocco = {
		icon = mission_unite_home_region
		required_missions = { por_navy_build por_control_mazagao }
		position = 4
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		trigger = {
			MOR = { is_crusade_target = yes }
		}
		
		effect = {
			custom_tooltip = por_crusade_morocco_claims.tooltip
			assign_claim_core = {
				PROVINCES = por_morocco_provinces
				TYPE = permanent_claim 
			}
		}
	}
	
	por_consolidate_morocco = {
		icon = mission_cannons_firing
		required_missions = { por_crusade_morocco }
		position = 5
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			por_morocco_provinces = yes
 			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			conquest_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_holds_highlighted
				PROVINCES=por_morocco_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			consolidate_region = {
				TOOLTIP = por_consolidate_morocco.tooltip
				PROVINCES = por_morocco_provinces
			}
		}
	}
	
	por_cape_of_good_hope = {
		icon = mission_establish_high_seas_navy
		required_missions = { por_discover_kongo por_caravel }
		position = 6
		
		provinces_to_highlight = {
			province_id = 1460
		}
		
		
		trigger = { 
			treasury = 75
			discover_mission_trigger = {
				TOOLTIP=por_discover_cape_of_good_hope.tooltip
				PROVINCES=1460
			}
		}
	
		effect = {
			discover_province = 1459
			discover_province = 1458
			discover_province = 1182
			discovery_mission_cede = {
				PROVINCE_ID = 1182
				COST = 75
				TRADE_GOOD = fish
				MODIFIER = por_feitoria
				DURATION = -1
			}
		}
	}
	
	por_seize_sofala = {
		icon = mission_establish_high_seas_navy
		required_missions = { por_cape_of_good_hope }
		position = 7
		
		provinces_to_highlight = {
			province_id = 1186
		}
		
		
		trigger = { 
			mil_power = 50
			treasury = 50
			num_of_heavy_ships = 10
			discover_mission_trigger = {
				TOOLTIP=por_seize_sofala.tooltip
				PROVINCES=1186
			}
		}
	
		effect = {
			add_mil_power = -50
			discovery_mission_cede = {
				PROVINCE_ID = 1186
				COST = 50
				TRADE_GOOD = gold
				MODIFIER = por_feitoria
				DURATION = -1
			}
			custom_tooltip = por_seize_sofala_claims.tooltip
			assign_claim_core = {
				PROVINCES = 1201
				TYPE = permanent_claim
			}
		}
	}
	
	por_control_zanzibar = {
		icon = mission_unite_home_region
		required_missions = { por_seize_sofala }
		position = 8
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			por_zanzibar_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=por_zanzibar_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = {
				PROVINCES = por_zanzibar_provinces
			}
		}
	}
}

#slot 6
por_slot_6 = {

	slot = 6
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = POR
			tag = LSA	
		}
	}
	has_country_shield = yes
	
	
	por_romanus_pontifex = {
		icon = mission_european_church
		required_missions = { por_dum_diversas por_alem_do_bojador }
		position = 2
	
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		trigger = {
			PAP = { 
				has_opinion = {
					who = ROOT
					value = 100
				}
			}
		}
		
		effect = {
			add_prestige = 5
			add_legitimacy = 5
			add_country_modifier = {
				name = "por_romanus_pontifex"
				duration = 7300
			}
		}
	}
	
	por_cabo_verde = {
		icon = mission_colonial
		required_missions = { por_romanus_pontifex por_volta_do_mar }
		position = 3
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		
		provinces_to_highlight = {
			por_cabo_verde_provinces = yes
			has_discovered = ROOT
		}
		
		trigger = {
			dip_power = 50
			treasury = 75
			has_idea = quest_for_the_new_world	
			discover_mission_trigger = {
				TOOLTIP=por_cabo_verde.tooltip
				PROVINCES=por_cabo_verde_provinces
			}
		}
		
		effect = {
			add_dip_power = -50
			discovery_mission_cede = {
				PROVINCE_ID = 1096
				COST = 75
				TRADE_GOOD = sugar
				MODIFIER = por_feitoria
				DURATION = -1
			}
		}
	}
	
	por_portos_escala = {
		icon = mission_colonial
		required_missions = { por_cabo_verde }
		position = 4
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			por_portos_escala_provinces = yes
		}
		
		trigger = {
			mil_power = 200
			treasury = 100
			num_of_heavy_ship = 20
			conquest_mission_trigger = {
				TOOLTIP=owned_by_highlighted 
				PROVINCES=por_portos_escala_provinces
				OWNER_TYPE=owned_by
			}
		}
		
		effect = {
			add_mil_power = -200
			add_treasury = -100
			assign_group_prov_modifier = {
				PROVINCES = por_portos_escala_provinces
				TYPE = city
				MODIFIER = por_porto_maritima
				DURATION = -1
			}
		}
	}
	
	por_discover_kongo = {
		icon = mission_establish_high_seas_navy
		required_missions = { por_portos_escala por_sao_tome_principe }
		position = 5
		
		provinces_to_highlight = {
			por_discover_kongo_provinces = yes
		}
		
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=por_discover_kongo.tooltip
				PROVINCES=por_discover_kongo_provinces
			}
		}
	
		effect = {
			KON = { set_country_flag = discover_kongo_mission_complete }
			if = {
				limit = { KON = { NOT = { has_country_flag = kongo_allows_missionaries } } }
				KON = { country_event = { id = flavor_kon.1 days = 0 } }
			}
		}
	}	
	
	por_conquer_low_mozambique = {
		icon = mission_cannons_firing
		required_missions = { por_cape_of_good_hope }
		position = 7
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			por_low_mozambique_provinces = yes
		}
		
		trigger = {
			conquest_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_holds_highlighted
				PROVINCES=por_low_mozambique_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			1182 = { add_building = shipyard }
			custom_tooltip = por_conquer_low_mozambique_claims.tooltip
			assign_claim_core = {
				PROVINCES = por_zambeze_provinces
				TYPE = permanent_claim
			}
		}
	}
	
	por_up_the_zambezi = {
		icon = mission_cannons_firing
		required_missions = { por_conquer_low_mozambique }
		position = 8
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			por_zambeze_provinces = yes
		}
		
		trigger = {
			conquest_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_holds_highlighted
				PROVINCES=por_zambeze_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			custom_tooltip = por_up_the_zambezi_claims.tooltip
			assign_claim_core = {
				PROVINCES = por_zimbabue_provinces
				TYPE = permanent_claim
			}
		}
	}
	
	por_into_zimbabue = {
		icon = mission_cannons_firing
		required_missions = { por_up_the_zambezi }
		position = 9
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			por_zimbabue_provinces = yes
		}
		
		trigger = {
			conquest_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_holds_highlighted
				PROVINCES=por_zimbabue_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			custom_tooltip = por_into_zimbabue_claims.tooltip
			assign_claim_core = {
				PROVINCES = por_mozambique_provinces
				TYPE = permanent_claim
			}
		}
	}
	
	por_consolidate_mozambique = {
		icon = mission_empire
		required_missions = { por_into_zimbabue }
		position = 10
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			por_mozambique_provinces = yes
		}
		
		trigger = {
			colonize_mission_trigger = {
				TOOLTIP=colonize_conquer_highlighted
				SCOPE = every
				PROVINCES=por_mozambique_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			add_country_modifier = {
				name = por_consolidate_mozambique
				duration = -1
			}
			consolidate_region = {
				TOOLTIP = por_consolidate_mozambique.tooltip
				PROVINCES = por_mozambique_provinces
			}
		}
	}
	
	por_somali_expedition = {
		icon = mission_unite_home_region
		required_missions = { por_consolidate_mozambique }
		position = 11
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			por_somali_expedition_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=por_somali_expedition_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = {
				PROVINCES = por_somali_expedition_provinces
			}
		}
	}
}

#slot 7
por_slot_7 = {

	slot = 7
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = POR
			tag = LSA	
		}
	}
	has_country_shield = yes
	
	por_volta_do_mar = {
		icon = mission_establish_high_seas_navy
		required_missions = { por_alem_do_bojador }
		position = 2
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		
		provinces_to_highlight = {
			province_id = 10080
			has_discovered = ROOT
		}
		
		trigger = {
			discover_mission_trigger = {
				TOOLTIP=por_terceira.tooltip
				PROVINCES=10080
			}
			num_of_light_ship = 10
			treasury = 50
			has_idea_group = exploration_ideas
		}
		
		effect = {
			discovery_mission_cede = {
				PROVINCE_ID = 10080
				COST = 50
				TRADE_GOOD = sugar
				MODIFIER = por_feitoria
				DURATION = -1
			}
		}
	}
	
	por_macaronesia_plantation = {
		icon = mission_colonial
		required_missions = { por_volta_do_mar }
		position = 3
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			macaronesia_core_provinces = yes
		}
		
		trigger = {
			dip_power = 50
			treasury = 250
			has_idea = quest_for_the_new_world	
			conquest_mission_trigger = {
				TOOLTIP=owned_by_highlighted 
				PROVINCES=macaronesia_core_provinces
				OWNER_TYPE=owned_by
			}
		}
		
		effect = {
			add_dip_power = -50
			add_treasury = -250
			assign_group_prov_modifier = {
				PROVINCES = macaronesia_core_provinces
				TYPE = city
				MODIFIER = por_plantation
				DURATION = -1
			}
		}
	}
	
	por_cabo_verde_plantation = {
		icon = mission_colonial
		required_missions = { por_macaronesia_plantation por_cabo_verde }
		position = 4
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			macaronesia_core_provinces = yes
		}
		
		trigger = {
			treasury = 300
			conquest_mission_trigger = {
				TOOLTIP=owned_by_highlighted 
				PROVINCES=1096
				OWNER_TYPE=owned_by
			}
		}
		
		effect = {
			add_treasury = -300
			assign_group_prov_modifier = {
				PROVINCES = por_cabo_verde_provinces
				TYPE = city
				MODIFIER = por_plantation
				DURATION = -1
			}
			assign_group_prov_modifier = {
				PROVINCES = por_cabo_verde_provinces
				TYPE = empty
				MODIFIER = por_colony
				DURATION = 54750
			}
		}
	}
	
	por_casa_da_guine = {
		icon = mission_colonial
		required_missions = { por_sao_tome_principe }
		position = 5
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			province_id = 1114
		}
		
		trigger = {
			adm_power = 100
			treasury = 100
			conquest_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_holds_highlighted 
				PROVINCES=1114
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			add_adm_power = -100
			add_treasury = -100
			1114 = {
				add_province_modifier = {
					name = por_casa_da_guine
					duration = -1
				}
			}
		}
	}
	
	por_kongo_rapport = {
		icon = mission_trade_company_region_abroad
		required_missions = { por_discover_kongo }
		position = 6
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			country_or_non_sovereign_subject_holds = KON
			has_discovered = ROOT
		}
		
		trigger = {
			dip_power = 25
			KON = { 
				religion_group = christian
				has_opinion = {
					who = ROOT
					value = 50
				}
			}
		}
		
		effect = {
			add_dip_power = -25
			KON = {
				add_opinion = {
					who = ROOT
					modifier = por_rapport_kongo
				}
			}
		}
	}
	
	por_porto_soja = {
		icon = mission_trade_company_region_abroad
		required_missions = { por_kongo_rapport }
		position = 7
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			por_porto_soja_provinces = yes
			has_discovered = ROOT
		}
		
		trigger = {
			adm_power = 50
			treasury = 120
			KON = { 
				has_opinion = {
					who = ROOT
					value = 75
				}
			}
		}
		
		effect = {
			add_adm_power = -50
			add_treasury = -120
			custom_subject = {
				TOOLTIP = por_porto_soja.tooltip
				TAG = SYO
				SUBJECT_TYPE = domain
				PROVINCES = por_porto_soja_provinces
				LEADER = Manuel
   				DYNASTY = Silva
    			ADM = 2 
    			DIP = 4 
    			MIL = 2
    			AGE = 35
    			CLAIM = 75
    			CULTURE = kongolese
    			RELIGION = catholic
    			FIXED = yes
    			GENDER = male
			}
		}
	}
	
	por_kongo_entrepot = {
		icon = mission_trade_company_region_abroad
		required_missions = { por_porto_soja }
		position = 8
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		
		provinces_to_highlight = {
			por_kongo_coast_provinces = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			conquest_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_holds_highlighted
				PROVINCES=por_kongo_coast_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			integrate_subject = {
				TOOLTIP = por_kongo_entrepot.tooltip
				TAG = SYO
			}
			assign_group_prov_modifier = {
				PROVINCES = por_kongo_slave_provinces
				TYPE = city
				MODIFIER = IR_slave_entrepot
				DURATION = -1
			}
		}
	}
}

#slot 8
por_slot_8 = {

	slot = 8
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = POR
			tag = LSA	
		}
	}
	has_country_shield = yes
	
	por_alem_do_bojador = {
		icon = mission_establish_high_seas_navy
		required_missions = { }
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		
		provinces_to_highlight = {
			por_bojador_provinces = yes
			has_discovered = ROOT
		}
		
		trigger = {
			discover_mission_trigger = {
				TOOLTIP=por_discover_bojador.tooltip
				PROVINCES=por_bojador_provinces
			}
			treasury = 50
		}
		
		effect = {
			discovery_mission_cede = {
				PROVINCE_ID = 1111
				COST = 50
				TRADE_GOOD = slaves
				MODIFIER = por_feitoria
				DURATION = -1
			}
		}
	}
	
	por_gomes_monopoly = {
		icon = mission_establish_high_seas_navy
		required_missions = { por_alem_do_bojador }
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=por_gomes_monopoly.tooltip
				EVENT=IR_flavor_POR.1
				BYPASS_DATE=1500
			}
		}
		
		effect = {
			if = {
				limit = { 
					has_trade_modifier = {
						who = ROOT
						key = por_gomes_monopoly
					}
				}
				define_explorer = {
					name = "Fern√£o Gomes"
   					shock = 3
    				fire = 2
    				manuever = 5
    				siege = 1
				}
			}
			else_if = {
				limit = { 
					has_trade_modifier = {
						who = ROOT
						key = por_royal_monopoly
					}
				}
				create_explorer = 30
			}
			else = {
				create_explorer = 20
			}
		}
	}
	
	por_ouro_da_guine = {
		icon = mission_establish_high_seas_navy
		required_missions = { por_gomes_monopoly }
		position = 3
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		
		provinces_to_highlight = {
			por_ouro_da_guine_provinces = yes
			has_discovered = ROOT
		}
		
		trigger = {
			discover_mission_trigger = {
				TOOLTIP=por_ouro_da_guine.tooltip
				PROVINCES=por_ouro_da_guine_provinces
			}
			num_of_light_ship = 10
			has_idea_group = exploration_ideas
		}
		
		effect = {
			add_years_of_income = 2.5
			10105 = { 
				add_permanent_province_modifier = {
					name = "elmina"
					duration = -1
				}
			}
		}
	}
	
	por_sao_tome_principe = {
		icon = mission_trade_company_region_abroad
		required_missions = { por_ouro_da_guine por_macaronesia_plantation }
		position = 4
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		
		provinces_to_highlight = {
			por_sao_tome_principe_provinces = yes
			has_discovered = ROOT
		}
		
		trigger = {
			treasury = 50
			colonize_mission_trigger = {
				TOOLTIP=por_sao_tome_principe.tooltip
				SCOPE = any
				PROVINCES=por_sao_tome_principe_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			colony_mission_cede = {
				TOOLTIP = por_sao_tome_principe.tooltip
				COST = 50
				PROVINCES = por_sao_tome_principe_provinces
			}
			assign_group_prov_modifier = {
				PROVINCES = por_sao_tome_principe_provinces
				TYPE = city
				MODIFIER = por_feitoria
				DURATION = -1
			}
			assign_group_trade_goods = {
				PROVINCES = por_sao_tome_principe_provinces
				TRADE_GOOD = sugar
			}
		}
	}
	
	por_elmina = {
		icon = mission_trade_company_region_abroad
		required_missions = { por_sao_tome_principe }
		position = 5
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		
		provinces_to_highlight = {
			province_id = 10105
			has_discovered = ROOT
		}
		
		
		trigger = {
			adm_power = 100
			treasury = 100
			10105 = { has_discovered = ROOT }
		}
		
		effect = {
			add_adm_power = -100
			discovery_mission_cede = {
				PROVINCE_ID = 10105
				COST = 100
				TRADE_GOOD = sugar
				MODIFIER = por_feitoria
				DURATION = -1
			}
		}
	}
	
	por_axim = {
		icon = mission_trade_company_region_abroad
		required_missions = { por_elmina }
		position = 6
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			province_id = 10103
			has_discovered = ROOT
		}
		
		
		trigger = {
			adm_power = 100
			treasury = 200
			10103 = { has_discovered = ROOT }
		}
		
		effect = {
			add_adm_power = -100
			discovery_mission_cede = {
				PROVINCE_ID = 10103
				COST = 200
				TRADE_GOOD = naval_supplies
				MODIFIER = por_feitoria
				DURATION = -1
			}
		}
	}
	
	por_shama = {
		icon = mission_trade_company_region_abroad
		required_missions = { por_axim }
		position = 7
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			province_id = 10101
			has_discovered = ROOT
		}
		
		
		trigger = {
			adm_power = 100
			treasury = 200
			10101 = { has_discovered = ROOT }
		}
		
		effect = {
			add_adm_power = -100
			discovery_mission_cede = {
				PROVINCE_ID = 10101
				COST = 200
				TRADE_GOOD = naval_supplies
				MODIFIER = por_feitoria
				DURATION = -1
			}
		}
	}
	
	por_benin_entrepot = { 
		icon = mission_trade_company_region_abroad
		required_missions = { por_shama }
		position = 8
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		
		provinces_to_highlight = {
			por_gold_coast_coast_provinces = yes
			NOT = { owned_by = ROOT }
		}
		
		
		trigger = {
			conquest_mission_trigger = {
				TOOLTIP=owned_by_highlighted
				PROVINCES=por_gold_coast_provinces
				OWNER_TYPE=owned_by
			}
			treasury = 50
		}
		
		effect = {
			add_treasury = -50
			assign_group_prov_modifier = {
				PROVINCES = por_gold_coast_slave_provinces
				TYPE = city
				MODIFIER = IR_slave_entrepot
				DURATION = -1
			}
			assign_group_trade_goods = {
				PROVINCES = por_gold_coast_slave_provinces
				TRADE_GOOD = slaves
			}
		}
	}
	
	por_dominate_slave_trade = {
		icon = mission_trade_company_region_abroad
		required_missions = { por_kongo_entrepot por_benin_entrepot por_angola_entrepot }
		position = 9
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		trigger = {
			trading_bonus = {
				trade_goods = slaves
				value = yes
			}
		}
		
		effect = {
			
		}
	}
	
	por_discover_india = {
		icon = mission_establish_high_seas_navy
		required_missions = { }
		position = 10
		
		provinces_to_highlight = {
			por_discover_india_provinces = yes
		}
		
		
		trigger = { 
			treasury = 75
			discover_mission_trigger = {
				TOOLTIP=por_discover_india.tooltip
				PROVINCES=por_discover_india_provinces
			}
		}
	
		effect = {
			custom_tooltip = por_discover_india_claims.tooltip
			assign_claim_core = {
				PROVINCES = por_discover_india_claim_provinces
				TYPE = permanent_claim
			}
		}
	}
}

#slot 9
por_slot_9 = {

	slot = 9
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = POR
			tag = LSA	
		}
	}
	has_country_shield = yes
	
	
	por_buy_lanzarote = {
		icon = mission_war_chest
		required_missions = { por_alem_do_bojador }
		position = 2
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			province_id = 10077
			NOT = { owned_by = ROOT }
		}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=por_buy_lanzarote.tooltip
				EVENT=IR_flavor_POR.3
				BYPASS_DATE=1455
			}
		}
		
		effect = {
			if = {
				limit = { 10077 = { owned_by = ROOT } }
				10077 = {
					add_province_modifier = {
						name = por_feitoria
						duration = -1
					}
				}
			}	
			else = {
				add_prestige = 5
			}
		}
	}
	
	por_vassalize_canaries = {
		icon = mission_have_two_subjects
		required_missions = { por_buy_lanzarote }
		position = 3
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			is_core = CNR
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			vassalize_mission_trigger = {
				TOOLTIP=vassalize_canaries_mission.tooltip
				TAG=CNR
			} 
		}
		
		effect = {
			custom_tooltip = por_canaries_claims.tooltip
			assign_claim_core = {
				PROVINCES = por_canaries_provinces
				TYPE = permanent_claim
			}
		}
	}
	por_canaries_plantation = {
		icon = mission_colonial
		required_missions = { por_vassalize_canaries }
		position = 4
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			por_canaries_provinces = yes
		}
		
		trigger = {
			dip_power = 50
			treasury = 300
			conquest_mission_trigger = {
				TOOLTIP=owned_by_highlighted 
				PROVINCES=por_canaries_provinces
				OWNER_TYPE=owned_by
			}
		}
		
		effect = {
			add_dip_power = -50
			add_treasury = -300
			assign_group_prov_modifier = {
				PROVINCES = por_canaries_provinces
				TYPE = city
				MODIFIER = por_plantation
				DURATION = -1
			}
		}
	}
	
	
	por_sao_tome_plantation = {
		icon = mission_trade_company_region_abroad
		required_missions = { por_sao_tome_principe }
		position = 5
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		
		provinces_to_highlight = {
			por_sao_tome_principe_provinces = yes
		}
		
		trigger = {
			dip_power = 50
			treasury = 100
			conquest_mission_trigger = {
				TOOLTIP=owned_by_highlighted
				PROVINCES=por_sao_tome_principe_provinces
				OWNER_TYPE=owned_by
			}
		}
		
		effect = {
			add_dip_power = -50
			treasury = -100
			assign_group_prov_modifier = {
				PROVINCES = por_sao_tome_principe_provinces
				TYPE = city
				MODIFIER = por_plantation
				DURATION = -1
			}
			#Amyz moved to the plantation mission to get Sugar
			#assign_group_trade_goods = {
			#	PROVINCES = por_sao_tome_principe_provinces
			#	TRADE_GOOD = sugar
			#}
		}
	}
	
	por_luanda = {
		icon = mission_trade_company_region_abroad
		required_missions = { por_elmina }
		position = 6
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			province_id = 1167
			has_discovered = ROOT
		}
		
		
		trigger = {
			adm_power = 100
			treasury = 200
			1167 = { has_discovered = ROOT }
		}
		
		effect = {
			add_adm_power = -100
			discovery_mission_cede = {
				PROVINCE_ID = 1167
				COST = 200
				TRADE_GOOD = slaves
				MODIFIER = por_feitoria
				DURATION = -1
			}
		}
	}
	
	por_benguela = {
		icon = mission_trade_company_region_abroad
		required_missions = { por_luanda }
		position = 7
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			province_id = 1172
			has_discovered = ROOT
		}
		
		
		trigger = {
			adm_power = 100
			treasury = 200
			1172 = { has_discovered = ROOT }
		}
		
		effect = {
			add_adm_power = -100
			discovery_mission_cede = {
				PROVINCE_ID = 1172
				COST = 200
				TRADE_GOOD = slaves
				MODIFIER = por_feitoria
				DURATION = -1
			}
		}
	}
	
	por_angola_entrepot = {
		icon = mission_trade_company_region_abroad
		required_missions = { por_benguela }
		position = 8
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		
		provinces_to_highlight = {
			por_angola_provinces = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			conquest_mission_trigger = {
				TOOLTIP=owned_by_highlighted
				PROVINCES=por_angola_provinces
				OWNER_TYPE=owned_by
			}
			treasury = 50
		}
		
		effect = {
			add_treasury = -50
			assign_group_prov_modifier = {
				PROVINCES = por_angola_slave_provinces
				TYPE = city
				MODIFIER = IR_slave_entrepot
				DURATION = -1
			}
			assign_group_trade_goods = {
				PROVINCES = por_angola_slave_provinces
				TRADE_GOOD = slaves
			}
		}
	}
}