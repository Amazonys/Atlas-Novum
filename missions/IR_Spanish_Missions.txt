
#c******l_cuba renamed colonial_the_carribean
#IR Spanish mission overhaul
#slot 1
spa_slot_1 = {
	
	slot = 1
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_cuellar_convention = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { spa_defeat_infante }
		position = 2
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=spa_cuellar_convention.tooltip
				EVENT=IR_flavor_SPA.7
				BYPASS_DATE=1460
			}
		}
		
		effect = { 
			if = {
				limit = { GRA = { exists = yes is_subject_of = ROOT NOT = { religion_group = christian } } }
				hidden_effect = { GRA = { grant_independence = yes } }
				
			}
		}
	}
	
	spa_control_gibraltar = {
		icon = mission_unite_home_region
		required_missions = { spa_cuellar_convention spa_entrench_the_army }
		position = 3
		
		#ai_weight = {
		#	factor = 5
		#}
		#ai_priority = {
		#	factor = 5
		#}
		
		provinces_to_highlight = {
			spa_gibraltar_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_gibraltar_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			SEV = { control_mission_cede = { PROVINCES = spa_gibraltar_provinces } }
			if = {
				limit  = { GRA = { exists = yes is_subject = no } }
				create_subject = {
					subject_type = tributary_state
					subject = GRA
				}
			}
		}
	}
	
	spa_control_malaga = {
		icon = mission_unite_home_region
		required_missions = { spa_control_gibraltar }
		position = 4
		
		#ai_weight = {
		#	factor = 5
		#}
		#ai_priority = {
		#	factor = 5
		#}
		
		provinces_to_highlight = {
			spa_control_malaga_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_control_malaga_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = { PROVINCES = spa_control_malaga_provinces }
			if = {
				limit  = { GRA = { exists = yes is_subject = no } }
				create_subject = {
					subject_type = tributary_state
					subject = GRA
				}
			}
		}
	}
	
	spa_control_granada = {
		icon = mission_unite_home_region
		required_missions = { spa_control_malaga }
		position = 5
		
		#ai_weight = {
		#	factor = 5
		#}
		#ai_priority = {
		#	factor = 5
		#}
		
		provinces_to_highlight = {
			spa_control_granada_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_control_granada_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = { PROVINCES = spa_granada_provinces }
		}
	}
	
	
	spa_control_melilla = {
		icon = mission_unite_home_region
		required_missions = { spa_reconquista }
		position = 7
		
		provinces_to_highlight = {
			spa_control_melilla_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_control_melilla_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = { PROVINCES = spa_control_melilla_provinces }
		}
	}
	
	spa_conquer_luzon = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 12
		
		provinces_to_highlight = {
			OR = { 
				area = luzon_area
				area = southern_luzon_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			luzon_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			southern_luzon_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			every_province = {
				limit = { OR = { area = luzon_area area = southern_luzon_area } NOT = { has_province_modifier = spa_plantation } OR = { trade_goods = spices trade_goods = tea trade_goods = sugar trade_goods = coffee trade_goods = incense trade_goods = tobacco trade_goods = cotton trade_goods = dyes }}
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
		}
	}
	
	spa_conquer_sulawesi = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_palawan }
		position = 13
		
		provinces_to_highlight = {
			OR = {
				area = sulawesi_area
				area = south_sulawesi_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			sulawesi_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			south_sulawesi_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_mil_power = 25
			2716 = {
				add_province_modifier = {
					name = "spa_presidio"
					duration = -1
				}
			}
		}
	}
	
}


#slot 2
spa_slot_2 = {
	
	slot = 2
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_defeat_infante = {
		icon = mission_unite_home_region
		required_missions = { }
		position = 1
		
		provinces_to_highlight = {
			owned_by = ROOT
			controlled_by = REB
		}
		
		trigger = {
			NOT = { num_of_rebel_armies = 1 }
			NOT = { num_of_rebel_controlled_provinces = 1 }
		}
		
		effect = {
		}
	}
	
	spa_entrench_the_army = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { spa_defeat_infante }
		position = 2
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
		
		}
		
		effect = {
		}
	}
	
	spa_reconquista = {
		icon = mission_cannons_firing
		required_missions = { spa_control_granada spa_catholic_monarchs }
		
		position = 6
		
		provinces_to_highlight = {
			gra_core_provinces = yes
		}
		
		trigger = {
			conquest_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_holds_highlighted
				PROVINCES=gra_core_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			add_adm_power = 50
			add_mil_power = 50
			if = {
				limit = { NOT = { has_government_reform = reconquista_reform } }
				add_government_reform = reconquista_reform
			}
		}
	}
	
	spa_control_oran = {
		icon = mission_unite_home_region
		required_missions = { spa_reconquista }
		position = 6
		
		provinces_to_highlight = {
			spa_control_oran_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_control_oran_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = { PROVINCES = spa_control_oran_provinces }
		}
	}
	
	spa_conquer_buffer_morocco = {
		icon = mission_cannons_firing
		required_missions = { spa_control_melilla spa_control_oran }
		position = 8
		
		
		provinces_to_highlight = {
			OR = { 
				province_id = 2465
				area = northern_morocco_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			2465 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			northern_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_mil_power = 25
			marrekesh_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			western_morocco_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_casablanca = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_buffer_morocco }
		position = 8
		
		provinces_to_highlight = {
			OR = {
				area = marrekesh_area
				area = western_morocco_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			marrekesh_area = { type = all country_or_non_sovereign_subject_holds = ROOT }
			western_morocco_area = { type = all country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			add_mil_power = 25 
			southern_morocco_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			sus_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			tagmudant_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			tafilalt_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_consolidate_morocco = {
		icon = mission_empire
		required_missions = { spa_conquer_casablanca }
		position = 9
		
		provinces_to_highlight = {
			OR = {
				area = western_morocco_area
				area = marrekesh_area
				area = sus_area
				area = southern_morocco_area
				area = northern_morocco_area
				area = tagmudant_area
				area = tafilalt_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			northern_morocco_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			western_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			marrekesh_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			sus_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			southern_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tagmudant_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tafilalt_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_stability = 1
			add_country_modifier = {
				name = "removed_mor_threat"
				duration = 7300
			}
			northern_morocco_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			western_morocco_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			marrekesh_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			sus_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			} 
		}
	}
	
	spa_discover_east_indies = {
		icon = mission_establish_high_seas_navy
		required_missions = {  }
		position = 11
		
		provinces_to_highlight = {
			OR = { 
				area = visayas_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			visayas_area = { type = all has_discovered = ROOT }
			has_idea = quest_for_the_new_world
		}
	
		effect = {
			add_dip_power = 25
			if = { 
				limit = { 4352 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						4352 = { owner = { is_colonizer_tech_group = no } }
					}
					hidden_effect = {
						4352 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					4352 = { 
						cede_province = ROOT 
						add_province_modifier = {
							name = "spa_audiencia"
							duration = -1
						}
					}
				}
				else_if = {
					limit = { 
						4352 = { owner = { is_colonizer_tech_group = yes } } 
					}
					if = { 
						limit = {
							4355 = { owner = { is_colonizer_tech_group = no } }
						}
						hidden_effect = {
							4355 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						4355 = {
							cede_province = ROOT 

						}	
					}
					else_if = { 
						limit = {
							4353 = { owner = { is_colonizer_tech_group = no } }
						}
						hidden_effect = {
							4353 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						4353 = {
							cede_province = ROOT 
						}	
					}
					4352 = { add_permanent_claim = ROOT }
				}
			}
		}
	}
	
	spa_conquer_philip_isles = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 12
		
		provinces_to_highlight = {
			OR = { 
				area = visayas_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			visayas_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			4352 = { 
				add_province_modifier = {
					name = "spa_presidio"
					duration = -1
				}
			}
			every_province = {
				limit = { OR = { area = visayas_area } NOT = { has_province_modifier = spa_plantation } OR = { trade_goods = spices trade_goods = tea trade_goods = sugar trade_goods = coffee trade_goods = incense trade_goods = tobacco trade_goods = cotton trade_goods = dyes }}
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
		}
	}
		
	spa_conquer_philippines = {
		icon = mission_empire
		required_missions = { spa_conquer_philip_isles spa_conquer_palawan spa_conquer_mindanao spa_conquer_luzon }
		position = 13
		
		provinces_to_highlight = {
			OR = { 
				area = visayas_area
				area = mindanao_area
				area = west_mindanao_area
				area = palawan_area
				area = luzon_area
				area = southern_luzon_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			luzon_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			southern_luzon_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			palawan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			visayas_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			mindanao_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			west_mindanao_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_dip_power = 50
			656 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_moluccas = {
		icon = mission_empire
		required_missions = { spa_conquer_philippines spa_conquer_borneo spa_conquer_sulawesi }
		position = 14
		
		provinces_to_highlight = {
			OR = { 
				area = lesser_sunda_islands_area
				area = ceram_area
				area = timor_area
				area = molluca_area
				area = spice_islands_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			lesser_sunda_islands_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			ceram_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			timor_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			molluca_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			spice_islands_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_dip_power = 50
			631 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			635 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_east_indies = {
		icon = mission_rb_colonise_spice_islands
		required_missions = { spa_moluccas spa_conquer_sumatra }
		position = 15
		
		provinces_to_highlight = {
			OR = {
				region = indonesia_region
				region = moluccas_region
				area = malacca_area
				area = malaya_area
				area = tenasserim_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			indonesia_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			moluccas_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			malacca_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			malaya_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			tenasserim_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_prestige = 25
			add_years_of_income = 5
			add_country_modifier = {
				name = "por_spice_trade"
				duration = 9125
			}
		}
	}
}

#slot 3
spa_slot_3 = {
	
	slot = 3
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_eleanor_navarra = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { spa_defeat_infante }
		position = 2
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=spa_eleanor_navarra.tooltip
				EVENT=IR_flavor_SPA.12
				BYPASS_DATE=1470
			}
		}
		
		effect = {
			add_dip_power = 50
		}
	}
	
	
	spa_secure_ne = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { spa_eleanor_navarra }
		position = 3
		
		provinces_to_highlight = {
			OR = {
				is_core = NAV
				is_core = VZC
			}
		}
		
		trigger = {
			adm_power = 200
			treasury = 200
			vassalize_mission_trigger = {
				TOOLTIP=spa_vassalize_VZC.tooltip
				TAG=VZC
			} 
			vassalize_mission_trigger = {
				TOOLTIP=spa_vassalize_NAV.tooltip
				TAG=NAV
			} 
		}
		
		effect = {
			add_adm_power = -200
			add_treasury = -200
			integrate_subject = {
				TOOLTIP = spa_secure_ne_1.tooltip
				TAG = VZC
			}
			integrate_subject = {
				TOOLTIP = spa_secure_ne_2.tooltip
				TAG = NAV
			}
			#integrate_subject = {
			#	TOOLTIP = spa_secure_ne_3.tooltip
			#	TAG = FOI
			#}
		}
	}
	
	spa_control_algiers = {
		icon = mission_unite_home_region
		required_missions = { spa_reconquista }
		position = 7
		
		provinces_to_highlight = {
			spa_control_algiers_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_control_algiers_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = { PROVINCES = spa_control_algiers_provinces }
			if = {
				limit = { TLC = { exists = yes is_subject = no } }
				create_subject = {
					subject_type = dominion
					subject = TLC
				}
			}
		}
	}
	
	spa_conquer_algiers = {
		icon = mission_cannons_firing
		required_missions = { spa_control_algiers }
		position = 8
		
		
		provinces_to_highlight = {
			OR = { 
				area = oran_area
				area = algiers_area
				area = kabylia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			oran_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			algiers_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			kabylia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_mil_power = 25
			hautes_plaines_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			tagmudant_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			kabylia_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_algeria = {
		icon = mission_empire
		required_missions = { spa_conquer_algiers }
		position = 9
		
		
		provinces_to_highlight = {
			OR = { 
				area = tagmudant_area
				area = oran_area
				area = algiers_area
				area = hautes_plaines_area
				area = kabylia_area
				area = ouled_nail_area
				area = constantine_area
				area = ouled_nail_area
				area = north_saharan_area
				area = west_aures_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			oran_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			algiers_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			kabylia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			constantine_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tagmudant_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			hautes_plaines_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			west_aures_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			ouled_nail_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			north_saharan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_stability = 1
			add_mil_power = 50
			338 = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			339 = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
		}
	}
	
	
	spa_conquer_palawan = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 12
		
		provinces_to_highlight = {
			OR = { 
				area = palawan_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			palawan_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			every_province = {
				limit = { OR = { area = palawan_area } NOT = { has_province_modifier = spa_plantation } OR = { trade_goods = spices trade_goods = tea trade_goods = sugar trade_goods = coffee trade_goods = incense trade_goods = tobacco trade_goods = cotton trade_goods = dyes }}
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
			brunei_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT  } }
				add_permanent_claim = ROOT
			}
			brunei_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT  } }
				add_permanent_claim = ROOT
			}
			brunei_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT  } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_borneo = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_palawan }
		position = 13
		
		provinces_to_highlight = {
			OR = {
				area = brunei_area
				area = kutai_area
				area = kalimantan_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			brunei_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			kutai_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			kalimantan_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_mil_power = 25
			2709 = {
				add_province_modifier = {
					name = "spa_presidio"
					duration = -1
				}
			}
			malacca_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			malaya_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			tenasserim_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			west_java_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			central_java_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			east_java_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
}

#slot 4
spa_slot_4 = {

	slot = 4
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_farce_avila = {
		icon = mission_alliances
		required_missions = { spa_defeat_infante spa_juans_will }
		position = 2
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=spa_farce_avila.tooltip
				EVENT=IR_flavor_SPA.4
				BYPASS_DATE=1470
			}
		}
		
		effect = {
			add_prestige = 5
		}
	}
	
	spa_control_tripoli = {
		icon = mission_unite_home_region
		required_missions = { spa_control_algiers }
		position = 8
		
		provinces_to_highlight = {
			spa_control_tripoli_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_control_tripoli_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = { PROVINCES = spa_control_tripoli_provinces }
		}
	}
	
	spa_conquer_mindanao = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 12
		
		provinces_to_highlight = {
			OR = { 
				area = mindanao_area
				area = west_mindanao_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			mindanao_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			west_mindanao_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			every_province = {
				limit = { OR = { area = mindanao_area area = west_mindanao_area } NOT = { has_province_modifier = spa_plantation } OR = { trade_goods = spices trade_goods = tea trade_goods = sugar trade_goods = coffee trade_goods = incense trade_goods = tobacco trade_goods = cotton trade_goods = dyes }}
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
		}
	}
}

#slot 5
spa_slot_5 = {

	slot = 5
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_juans_will = {
		icon = mission_alliances
		required_missions = { }
		position = 1
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=spa_juans_will.tooltip
				EVENT=IR_flavor_SPA.3
				BYPASS_DATE=1456
			}
		}
		
		effect = {
			add_prestige = 5
		}
	}
	
	spa_iberian_wedding = {
		icon = mission_alliances
		required_missions = { spa_farce_avila }
		position = 3
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=spa_iberian_wedding.tooltip
				EVENT=IR_marriages.1
				BYPASS_DATE=1472
			}
		}
		
		effect = {
			add_prestige = 5
		}
	}
	
	spa_defeat_beltraneja = {
		icon = mission_alliances
		required_missions = { spa_iberian_wedding }
		position = 4
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
		#	event_mission_trigger = {
		#		TOOLTIP=spa_iberian_wedding.tooltip
		#		EVENT=IR_marriages.1
		#		BYPASS_DATE=1472
		#	}
		}
		
		effect = {
			if = {
				limit = { LON = { is_subject_of = ROOT } }
				integrate_subject = {
					TOOLTIP = spa_defeat_beltraneja_effect.tooltip
					TAG = LON
				}
			}
		}
	}
	
	spa_catholic_monarchs = {
		icon = mission_alliances
		required_missions = { spa_defeat_beltraneja }
		position = 5
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
		#	event_mission_trigger = {
		#		TOOLTIP=spa_iberian_wedding.tooltip
		#		EVENT=IR_marriages.1
		#		BYPASS_DATE=1472
		#	}
		}
		
		effect = {
			add_prestige = 5
		}
	}
	
	spa_form_colombia = {
		icon = mission_alliances
		required_missions = { spa_conquer_musica }
		position = 11
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_colombia
			}
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 30
				colonial_region = colonial_colombia
				is_city = yes
			}
			
		}
		
		effect = {
			add_dip_power = 50
		}
	}
	
	spa_discover_laplata = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_pizarro }
		position = 12
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_la_plata

			}
		}
		
		trigger = {
			buenos_aires_area = { type = all has_discovered = ROOT }
			misiones_area = { type = all has_discovered = ROOT }
			paraguay_area = { type = all has_discovered = ROOT }
		}
		
		effect = {
			if = { 
				limit = { 775 = { is_empty = yes } }
				hidden_effect = {
					775 = {
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT
					}
				}
				775 = { cede_province = ROOT }
			}
			if = { 
				limit = { 775 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						775 = { owner = { is_colonizer_tech_group = no } }
					}
					hidden_effect = {
						775 = {
							owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
							random_empty_neighbor_province = { 
								change_religion = event_target:native_move
								change_culture = event_target:native_move
								add_core = event_target:native_move			
								cede_province = event_target:native_move
							}
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					775 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						775 = { owner = { is_colonizer_tech_group = yes } } 
					}
					if = { 
						limit = {
							761 = { owner = { is_colonizer_tech_group = no } }
						}
						hidden_effect = {
							761 = { 
								owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
								random_empty_neighbor_province = { 
									change_religion = event_target:native_move
									change_culture = event_target:native_move
									add_core = event_target:native_move			
									cede_province = event_target:native_move
								}
								clear_global_event_target = native_move
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						761 = {
							cede_province = ROOT 
						}	
					}
					775 = { add_permanent_claim = ROOT }
				}
			}
			if = { 
				limit = { 778 = { is_empty = yes } }
				hidden_effect = {
					778 = {
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT
					}
				}
				778 = { cede_province = ROOT }
			}
			if = { 
				limit = { 778 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						778 = { owner = { is_colonizer_tech_group = no } }
					}
					hidden_effect = {
						778 = {
							owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
							random_empty_neighbor_province = { 
								change_religion = event_target:native_move
								change_culture = event_target:native_move
								add_core = event_target:native_move			
								cede_province = event_target:native_move
							}
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					778 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						778 = { owner = { is_colonizer_tech_group = yes } } 
					}
					if = { 
						limit = {
							761 = { owner = { is_colonizer_tech_group = no } }
						}
						hidden_effect = {
							761 = { 
								owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
								random_empty_neighbor_province = { 
									change_religion = event_target:native_move
									change_culture = event_target:native_move
									add_core = event_target:native_move			
									cede_province = event_target:native_move
								}
								clear_global_event_target = native_move
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						761 = {
							cede_province = ROOT 
						}	
					}
					778 = { add_permanent_claim = ROOT }
				}
			}
		}
	}
	
	spa_colonize_laplata = {
		icon = mission_colonial
		required_missions = { spa_discover_laplata }
		position = 13
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_la_plata
				colonial_region = colonial_chile
				colonial_region = colonial_paraguay
			}
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				OR = {
					colonial_region = colonial_la_plata
					colonial_region = colonial_chile
					colonial_region = colonial_paraguay
				}
			}	
		}
		
		effect = {
			add_dip_power = 25 
			778 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			776 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			colonial_la_plata = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			colonial_chile = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			colonial_paraguay = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
	
	spa_form_laplata = {
		icon = mission_alliances
		required_missions = { spa_colonize_laplata spa_bolivia }
		position = 14
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_patagonia
			}
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 12
				OR = {
					colonial_region = colonial_patagonia
				}
				is_city = yes
			}
			
		}
		
		effect = {
			add_dip_power = 50
			colonial_patagonia = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
}
#slot 6
spa_slot_6 = {

	slot = 6
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	
	spa_discover_colombia = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_puerto_rico }
		position = 8
		
		provinces_to_highlight = {
			OR = { 
				area = venezuela_area
				area = leeward_antilles_area
			}
		}
		
		trigger = {
			venezuela_area = { type = all has_discovered = ROOT }
			leeward_antilles_area = { type = all has_discovered = ROOT }
		}
		
		effect = {
			add_dip_power = 25
			if = { 
				limit = { 5579 = { is_empty = yes } }
				hidden_effect = {
					5579 = {
						change_religion = ROOT	
						change_culture = ROOT
						add_territorial_core = ROOT
					}
				}
				5579 = { cede_province = ROOT }
			}
			if = { 
				limit = { 5579 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						5579 = { owner = { is_colonizer_tech_group = no } }
					}
					hidden_effect = {
						5579 = {
							owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
							random_empty_neighbor_province = { 
								change_religion = event_target:native_move
								change_culture = event_target:native_move
								add_core = event_target:native_move			
								cede_province = event_target:native_move
							}
							clear_global_event_target = native_move
							change_religion = ROOT	
							change_culture = ROOT
							add_territorial_core = ROOT
						}	
					}
					5579 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						5579 = { owner = { is_colonizer_tech_group = yes } } 
					}
					5579 = { add_permanent_claim = ROOT }
				}
			}
			if = { 
				limit = { 831 = { is_empty = yes } }
				hidden_effect = {
					831 = {
						change_religion = ROOT	
						change_culture = ROOT
						add_territorial_core = ROOT
					}
				}
				831 = { cede_province = ROOT }
			}
			if = { 
				limit = { 831 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						831 = { owner = { is_colonizer_tech_group = no } }
					}
					hidden_effect = {
						831 = {
							owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
							random_empty_neighbor_province = { 
								change_religion = event_target:native_move
								change_culture = event_target:native_move
								add_core = event_target:native_move			
								cede_province = event_target:native_move
							}
							clear_global_event_target = native_move
							change_religion = ROOT	
							change_culture = ROOT
							add_territorial_core = ROOT
						}	
					}
					831 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						831 = { owner = { is_colonizer_tech_group = yes } } 
					}
					831 = { add_permanent_claim = ROOT }
				}
			}
			if = { 
				limit = { 2806 = { is_empty = yes } }
				hidden_effect = {
					2806 = {
						change_religion = ROOT	
						change_culture = ROOT
						add_territorial_core = ROOT
					}
				}
				2806 = { cede_province = ROOT }
			}
			if = { 
				limit = { 2806 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						2806 = { owner = { is_colonizer_tech_group = no } }
					}
					hidden_effect = {
						2806 = {
							owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
							random_empty_neighbor_province = { 
								change_religion = event_target:native_move
								change_culture = event_target:native_move
								add_core = event_target:native_move			
								cede_province = event_target:native_move
							}
							clear_global_event_target = native_move
							change_religion = ROOT	
							change_culture = ROOT
							add_territorial_core = ROOT
						}	
					}
					2806 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						2806 = { owner = { is_colonizer_tech_group = yes } } 
					}
					2806 = { add_permanent_claim = ROOT }
				}
			}
		}
	}
	
	spa_colonize_colombia = {
		icon = mission_colonial
		required_missions = { spa_discover_colombia }
		position = 8
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_colombia
			}
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 12
				colonial_region = colonial_colombia
			}	
		}
	
		
		effect = {
			add_dip_power = 50
			831 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			venezuela_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			maracaibo_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			eastern_llanos = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
	
	spa_conquer_musica = {
		icon = mission_cannons_firing
		required_missions = { spa_colonize_colombia }
		position = 9
		
		provinces_to_highlight = {
			OR = {
				province_id = 832
				province_id = 825
				province_id = 2817
			}
		}
		
		trigger = {
			MCA = { exists = no }
			832 = { country_or_non_sovereign_subject_holds = ROOT }
			825 = { country_or_non_sovereign_subject_holds = ROOT }
			2817 = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {	
			define_conquistador = {
				name = "Francisco Pizzaro"
    			shock = 5
   				fire = 3
   				manuever = 5
    			siege = 2
			}
			835 = { 
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				} 
			}
			panama_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
	
	spa_pizarro = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_musica }
		position = 10
		
		provinces_to_highlight = {
			OR = {
				province_id = 2647
				province_id = 852
				province_id = 849
				province_id = 850
			}
		}
		
		trigger = { 
		
		}
	
		effect = {
			add_mil_power = 50
			2942 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			808 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			820 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			787 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			809 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_incas = {
		icon = mission_cannons_firing
		required_missions = { spa_pizarro }
		position = 11
		
		provinces_to_highlight = {
			OR = {
				area = kuntisuyu_area
				area = antisuyu_area
				area = potosi_area
				area = jujuy_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			antisuyu_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			kuntisuyu_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			potosi_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			jujuy_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 50
			2834 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			colonial_chile = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
	
	spa_bolivia = {
		icon = mission_colonial
		required_missions = { spa_incas }
		position = 12
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_bolivia
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 15
				colonial_region = colonial_bolivia
			}	
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			2621 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			colonial_bolivia = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			colonial_chile = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
}
#slot 7
spa_slot_7 = {
	
	slot = 7
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_hermandad = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { spa_juans_will }
		position = 2
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
		
		}
		
		effect = {
		}
	}
	
	spa_basque_naval = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { spa_hermandad }
		position = 3
		
		provinces_to_highlight = {
			country_or_non_sovereign_subject_holds = NAV
		}
		
		trigger = {
		
		}
		
		effect = {
		}
	}
	
	spa_colombus = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_catholic_monarchs }
		position = 6
		

		#provinces_to_highlight = {
		#}
		
		trigger = { 
			event_mission_trigger = {
				TOOLTIP=spa_columbus.tooltip
				EVENT=IR_explorers.1
				BYPASS_DATE=1492
			}
		}
		
		effect = {
			add_prestige = 25
		}
	}
	
	spa_puerto_rico = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_colombus }
		position = 7
		
		provinces_to_highlight = {
			province_id = 492
		}
		
		trigger = { 
			dip_power = 50
			treasury = 50
			492 = { has_discovered = ROOT }
			has_idea = quest_for_the_new_world
		}
	
		effect = {
			add_dip_power = -50
			discovery_mission_cede = {
				PROVINCE_ID = 492
				COST = 50
				TRADE_GOOD = ir_fruit
				MODIFIER = mark_of_discovery
				DURATION = 3650
			}
			define_conquistador = {
				name = "Juan Ponce de León"
   				shock = 3
   				fire = 1
   				manuever = 3
   				siege = 1
			}
		}
	}
	
	spa_chart_cuba = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_puerto_rico }
		position = 8
		
		provinces_to_highlight = {
			cuba_colonial_provinces = yes
		}
		
		trigger = { 
			treasury = 50
			discover_mission_trigger = {
				TOOLTIP=spa_chart_cuba.tooltip
				SCOPE=any
				PROVINCES=cuba_colonial_provinces
			}
		}
	
		effect = {
			discovery_mission_cede = {
				PROVINCE_ID = 2654
				COST = 50
				TRADE_GOOD = ir_fruit
				MODIFIER = mark_of_discovery
				DURATION = 3650
			}
		}
	}
	
	spa_settle_cuba = {
		icon = mission_colonial
		required_missions = { spa_chart_cuba }
		position = 9
		
		provinces_to_highlight = {
			cuba_colonial_provinces = yes
		}
		
		trigger = { 
			treasury = 50
			dip_power = 50
			
		}
	
		effect = {
			add_dip_power = -50
			discovery_mission_cede = {
				PROVINCE_ID = 484
				COST = 50
				TRADE_GOOD = sugar
				MODIFIER = mark_of_discovery
				DURATION = 3650
			}
			assign_group_prov_modifier = {
				PROVINCES = cuba_colonial_provinces
				TYPE = empty
				MODIFIER = spa_colony
				DURATION = -1
			}
		}
	}
	
	spa_cuba = {
		icon = mission_colonial
		required_missions = { spa_settle_cuba }
		position = 10
		
		provinces_to_highlight = {
			cuba_colonial_provinces = yes
		}
		
		trigger = { 
			treasury = 300
		}
	
		effect = {
			assign_group_prov_modifier = {
				PROVINCES = cuba_colonial_provinces
				TYPE = city
				MODIFIER = spa_colony
				DURATION = -1
			}
			assign_group_trade_goods = {
				PROVINCES = cuba_colonial_provinces #needs unique assignment
				TRADE_GOOD = sugar
			}
		}
	}
    spa_cortes = {
		icon = mission_cannons_firing
		required_missions = { spa_discover_yucatan }
		position = 11
		
		provinces_to_highlight = {
			OR = {
				province_id = 2647
				province_id = 852
				province_id = 849
				province_id = 850
			}
		}
		
		trigger = { 
			if = { 
				limit = { 2647 = { owner = { ai = yes } } }
				2647 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 2647 = { owner = { ai = no } } }
				2647 = { country_or_non_sovereign_subject_holds = ROOT }
			}
			if = { 
				limit = { 852 = { owner = { ai = yes } } }
				852 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 852 = { owner = { ai = no } } }
				852 = { country_or_non_sovereign_subject_holds = ROOT }
			}
			if = { 
				limit = { 849 = { owner = { ai = yes } } }
				849 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 849 = { owner = { ai = no } } }
				849 = { country_or_non_sovereign_subject_holds = ROOT }
			}
			if = { 
				limit = { 850 = { owner = { ai = yes } } }
				850 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 850 = { owner = { ai = no } } }
				850 = { country_or_non_sovereign_subject_holds = ROOT }
			}
		}
	
		effect = {
			every_province = {
				limit = {
					controller = { is_subject_of = ROOT }
					OR = {
						province_id = 852
						province_id = 2647
						province_id = 849
						province_id = 850
					}
				}
				change_controller = ROOT
			}
			add_mil_power = 50
			852 = {
			 	add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			colonial_mexico = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}	
		
	
	spa_mexico = {
		icon = mission_colonial
		required_missions = { spa_cortes }
		position = 12
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_mexico
				colonial_region = colonial_ngalicia
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 18
				colonial_region = colonial_mexico
			}	
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 3
				colonial_region = colonial_ngalicia
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			2621 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			colonial_mexico = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			colonial_ngalicia = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
	
	spa_colonize_coahuila = {
		icon = mission_colonial
		required_missions = { spa_mexico }
		position = 13
				
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_coahuila
				
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				colonial_region = colonial_coahuila
			}	
			
		}
	
		effect = {
			add_dip_power = 25
			colonial_coahuila = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
	
	spa_conquer_tejas = {
		icon = mission_colonial
		required_missions = { spa_colonize_coahuila }
		position = 14
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_texas
				
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 18
				colonial_region = colonial_texas
			}	
			
		}
	
		effect = {
			colonial_texas = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
	
	spa_conquer_louisiana = {
		icon = mission_colonial
		required_missions = { spa_conquer_tejas spa_form_mexico }
		position = 15
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_louisiana
				
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				colonial_region = colonial_louisiana
			}	
			
		}
	
		effect = {
			add_mil_power = 50
			colonial_louisiana = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
}

#slot 8
spa_slot_8 = {
	
	slot = 8
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_rein_in_bethencourt = {
		icon = mission_cannons_firing
		required_missions = { }
		position = 1
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			owned_by = CNR
		}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=spa_rein_in_bethencourt.tooltip
				EVENT=IR_flavor_POR.4
				BYPASS_DATE=1455
			}
		}
		
		effect = {
			if = {
				limit = { CNR = { is_subject_of = ROOT } }
				custom_tooltip = spa_rein_in_bethencourt_claims.tooltip
				assign_claim_core = {
					PROVINCES = spa_rein_in_bethencourt_claims_provinces
					TYPE = permanent_claim
				}
			}	
			else = {
				custom_tooltip = spa_rein_in_bethencourt_claims.tooltip
				assign_claim_core = {
					PROVINCES = canaries_core_provinces
					TYPE = permanent_claim
				}
			}
		}
	}
	
	spa_reclamar_lanzarote = {
		icon = mission_colonial
		required_missions = { spa_rein_in_bethencourt }
		position = 2
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			province_id = 10077
		}
		
		trigger = {
			10077 = { owned_by = ROOT }
		}
		
		effect = {
			
		}
	}
	
	spa_canaries_plantation = {
		icon = mission_colonial
		required_missions = { spa_reclamar_lanzarote spa_conquista_realenga }
		position = 3
		
		#ai_weight = {
		#	factor = 5
		#}
		#ai_priority = {
		#	factor = 5
		#}
	
		provinces_to_highlight = {
			canaries_core_provinces = yes
		}
		
		trigger = {
			dip_power = 50
			treasury = 300
			conquest_mission_trigger = {
				TOOLTIP=owned_by_highlighted 
				PROVINCES=canaries_core_provinces
				OWNER_TYPE=owned_by
			}
		}
		
		effect = {
			add_dip_power = -50
			add_treasury = -300
			if = {
				limit = { CNR = { is_subject_of = ROOT } }
				integrate_subject = {
					TOOLTIP = spa_rein_in_bethencourt_effect.tooltip
					TAG = CNR
				}
			}
			assign_group_prov_modifier = {
				PROVINCES = canaries_core_provinces
				TYPE = city
				MODIFIER = spa_plantation
				DURATION = -1
			}
			assign_group_trade_goods = {
				PROVINCES = spa_canaries_plantation_provinces
				TRADE_GOOD = sugar
			}
		}
	}
	
	spa_sardinia = {
		icon = mission_invade_island
		required_missions = { spa_iberian_wedding }
		position = 4
		provinces_to_highlight = {
			OR = { 
				area = sardinia_area 
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			sardinia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			corsica_sardinia_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_corsica = {
		icon = mission_invade_island
		required_missions = { spa_sardinia }
		position = 5
		provinces_to_highlight = {
			area = corsica_sardinia_area
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			corsica_sardinia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			eastern_mediterrenean_islands_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			cyprus_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_hispaniola = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_puerto_rico }
		position = 8
		
		provinces_to_highlight = {
			hispaniola_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_hispaniola.tooltip
				SCOPE=any
				PROVINCES=hispaniola_colonial_provinces
			}
			treasury = 50
			has_idea = quest_for_the_new_world
		}
	
		effect = {
			discovery_mission_cede = {
				PROVINCE_ID = 489
				COST = 50
				TRADE_GOOD = gold
				MODIFIER = mark_of_discovery
				DURATION = 3650
			}
			define_explorer = {
				name = "Bartolomew Columbus"
   				shock = 2
   				fire = 2
   				manuever = 4
   				siege = 1
			}
			add_country_modifier = {
				name = "spa_hispaniola_discovered"
				duration = 7300
			}
		}
	}
	
	
	spa_colonize_hispaniola = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_hispaniola }
		position = 9
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_hispaniola
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8
				colonial_region = colonial_hispaniola
				is_city = yes
			}	
		}
	
		effect = {
			add_dip_power = 25
			colonial_hispaniola = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
	
	spa_discover_yucatan = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_colonize_hispaniola }
		position = 10
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_yucatan
				province_id = 2637
				province_id = 840
				province_id = 843
				province_id = 2636
			}
		}
		
		trigger = { 
			colonial_yucatan = { type = all has_discovered = ROOT }
			840 = { has_discovered = ROOT }
			2637 = { has_discovered = ROOT }
			843 = { has_discovered = ROOT }
			2636 = { has_discovered = ROOT }
			has_idea = quest_for_the_new_world
		}
	
		effect = {
			add_dip_power = 25
			if = { 
				limit = { 840 = { is_empty = yes } }
				hidden_effect = {
					840 = {
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT	
					}
				}
				840 = { 
					cede_province = ROOT 
					add_province_modifier = {
						name = "spa_audiencia"
						duration = -1
					}
				}
			}
			if = { 
				limit = { 840 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						840 = { owner = { is_colonizer_tech_group = no } }
					}
					hidden_effect = {
						840 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					840 = { 
						cede_province = ROOT 
						add_province_modifier = {
							name = "spa_audiencia"
							duration = -1
						}
					}
				}
				else_if = {
					limit = { 
						840 = { owner = { is_colonizer_tech_group = yes } } 
					}
					840 = { add_permanent_claim = ROOT }
				}
			}
			if = { 
				limit = { 2637 = { is_empty = yes } }
				hidden_effect = {
					2637 = {
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT	
					}
				}
				2637 = { 
					cede_province = ROOT 
					add_province_modifier = {
						name = "spa_audiencia"
						duration = -1
					}
				}
			}
			if = { 
				limit = { 2637 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						2637 = { owner = { is_colonizer_tech_group = no } }
					}
					hidden_effect = {
						2637 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					2637 = { 
						cede_province = ROOT 
						add_province_modifier = {
							name = "spa_audiencia"
							duration = -1
						}
					}
				}
				else_if = {
					limit = { 
						2637 = { owner = { is_colonizer_tech_group = yes } } 
					}
					2637 = { add_permanent_claim = ROOT }
				}
			}
			colonial_mexico = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			colonial_yucatan = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			colonial_guatemala = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}	
	
	spa_conquer_yucatan = {
		icon = mission_cannons_firing
		required_missions = { spa_discover_yucatan }
		position = 11
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_yucatan
				colonial_region = colonial_guatemala
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			is_city = yes
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8
				colonial_region = colonial_yucatan
				is_city = yes
			}	
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 10
				colonial_region = colonial_guatemala
				is_city = yes
			}
		}
	
		effect = {
			tooltip = { honduras_area = { cede_province = ROOT } nicaragua_area = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { area = honduras_area area = nicaragua_area } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_if = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
		}
	}
	
	spa_upper_mexico = {
		icon = mission_colonial
		required_missions = { spa_mexico }
		position = 13
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_durango
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 6
				colonial_region = colonial_durango
			}	
		}
	
		effect = {
			add_dip_power = 25
			tooltip = { colonial_durango = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_durango } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_if = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
			2621 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_form_mexico = {
		icon = mission_alliances
		required_missions = { spa_upper_mexico spa_colonize_coahuila }
		position = 14
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_coahuila
				colonial_region = colonial_mexico
				colonial_region = colonial_ngalicia
				colonial_region = colonial_durango
				colonial_region = colonial_yucatan
				colonial_region = colonial_guatemala
			}
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 50
				OR = {
					colonial_region = colonial_coahuila
					colonial_region = colonial_mexico
					colonial_region = colonial_ngalicia
					colonial_region = colonial_durango
					colonial_region = colonial_yucatan
					colonial_region = colonial_guatemala
				}
				is_city = yes
			}
			
		}
		
		effect = {
			add_dip_power = 50
			colonial_mexico = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			colonial_ngalicia = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			colonial_coahuila = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			colonial_durango = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			colonial_yucatan = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			colonial_guatemala = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
	
	spa_colonize_taiwan = {
		icon = mission_colonial
		required_missions = { spa_discover_spice_isles }
		position = 17
		
		provinces_to_highlight = {
			area = taiwan_area
		}
		
		trigger = {
			taiwan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				is_city = yes
			}
		}
		
		effect = {
			add_dip_power = 25
			738 = { 
				add_province_modifier = {
					name = "spa_presidio"
					duration = -1
				}
			}
			add_country_modifier = {
				name = "taiwan_conquered"
				duration = 7300
			}
		}
	}
	
	spa_colonize_guam = {
		icon = mission_colonial
		required_missions = { spa_colonize_taiwan }
		position = 18
		
		provinces_to_highlight = {
			province_id = 1015
		}
		
		trigger = {
			1015 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			1015 = { 
				add_province_modifier = {
					name = "spa_presidio"
					duration = -1
				}
			}
		}
	}
	
	spa_colonize_australia = {
		icon = mission_colonial
		required_missions = { spa_circumnavigation }
		position = 19
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_australia
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 18
				OR = {
					colonial_region = colonial_australia
					is_city = yes 
				}
			}
		}
		
		effect = {
			add_dip_power = 50
			colonial_australia = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			add_country_modifier = {
				name = "eng_australian_colony"
				duration = 18250
			}
			
		}
	}
	
	spa_new_zeeland = {
		icon = mission_empire
		required_missions = { spa_colonize_australia }
		position = 20
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_nz
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 16
				OR = {
					colonial_region = colonial_nz
				}
				is_city = yes
			}
		}
		
		effect = {
			add_dip_power = 50
			colonial_nz = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
}

#slot 9
spa_slot_9 = {
	
	slot = 9
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_conquista_realenga = {
		icon = mission_colonial
		required_missions = { spa_rein_in_bethencourt }
		position = 2
		
		provinces_to_highlight = {
			spa_guanche_provinces = yes
		}
		
		trigger = {
			conquest_mission_trigger = {
				TOOLTIP=owned_by_highlighted
				PROVINCES=spa_guanche_provinces
				OWNER_TYPE=owned_by
			}
			GLD = { exists = no }
			TAO = { exists = no }
			BNR = { exists = no }
		}
		
		effect = {
			
		}
	}
	
	spa_christianize_canaries = {
		icon = mission_colonial
		required_missions = { spa_conquista_realenga }
		position = 3
	
		provinces_to_highlight = {
			spa_guanche_provinces = yes
			has_owner_religion = no 
			OR = {
				has_owner_culture  = no
				has_owner_accepted_culture = no
			}
		}
		
		trigger = {
			every_province = {
				limit = { spa_guanche_provinces = yes }
				has_owner_religion = yes 
				OR = {
					has_owner_culture  = yes
					has_owner_accepted_culture = yes
				}
			}
		}
		
		effect = {
			
		}
	}
	
	spa_sicily = {
		icon = mission_invade_island
		required_missions = { spa_iberian_wedding }
		position = 4
		provinces_to_highlight = {
			OR = { 
				area = sicily_area
				area = sardinia_area 
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			sardinia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			sicily_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			corsica_sardinia_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_east_med = {
		icon = mission_invade_island
		required_missions = { spa_sicily }
		position = 5
		provinces_to_highlight = {
			OR = { 
				area = eastern_mediterrenean_islands_area
				area = cyprus_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			eastern_mediterrenean_islands_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			cyprus_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			aegean_archipelago_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT	
			}
			3176 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT	
			}
			142 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT	
			}
		}
	}
	
	spa_aegean = {
		icon = mission_invade_island
		required_missions = { spa_east_med }
		position = 6
		provinces_to_highlight = {
			OR = { 
				area = aegean_archipelago_area
				province_id = 3176
				province_id = 142
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			aegean_archipelago_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			3176 = { country_or_non_sovereign_subject_holds = ROOT }
			142 = { country_or_non_sovereign_subject_holds = ROOT }
		}
		effect = {
			add_country_modifier = {
				name = "mare_nostrum"
				duration = 9125
			}
		}
	}
	


	spa_discover_florida = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_puerto_rico }
		position = 8
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_florida
			}
		}
		
		trigger = { 
			colonial_florida = { type = all has_discovered = ROOT }
			has_idea = quest_for_the_new_world
		}
	
		effect = {
			add_dip_power = 25
			if = { 
				limit = { 927 = { is_empty = yes } }
				hidden_effect = {
					927 = {
						change_religion = ROOT	
						change_culture = ROOT
						add_territorial_core = ROOT
					}
				}
				927 = { cede_province = ROOT }
			}
			if = { 
				limit = { 927 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						927 = { owner = { is_colonizer_tech_group = no } }
					}
					hidden_effect = {
						927 = {
							owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
							random_empty_neighbor_province = { 
								change_religion = event_target:native_move
								change_culture = event_target:native_move
								add_core = event_target:native_move			
								cede_province = event_target:native_move
							}
							clear_global_event_target = native_move
							change_religion = ROOT	
							change_culture = ROOT
							add_territorial_core = ROOT
						}	
					}
					927 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						927 = { owner = { is_colonizer_tech_group = yes } } 
					}
					if = { 
						limit = {
							2536 = { owner = { is_colonizer_tech_group = no } }
						}
						hidden_effect = {
							2536 = { 
								owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
								random_empty_neighbor_province = { 
									change_religion = event_target:native_move
									change_culture = event_target:native_move
									add_core = event_target:native_move			
									cede_province = event_target:native_move
								}
								clear_global_event_target = native_move
								change_religion = ROOT	
								change_culture = ROOT
								add_territorial_core = ROOT
							}
						}
						2536 = {
							cede_province = ROOT 
						}	
					}
					else_if = { 
						limit = {
							2535 = { owner = { is_colonizer_tech_group = no } }
						}
						hidden_effect = {
							2535 = { 
								owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
								random_empty_neighbor_province = { 
									change_religion = event_target:native_move
									change_culture = event_target:native_move
									add_core = event_target:native_move			
									cede_province = event_target:native_move
								}
								clear_global_event_target = native_move
								change_religion = ROOT	
								change_culture = ROOT
								add_territorial_core = ROOT
							}
						}
						2535 = {
							cede_province = ROOT 
						}	
					}
					927 = { add_permanent_claim = ROOT }
				}
			}
		}
	}
	
	spa_colonize_florida = {
		icon = mission_colonial
		required_missions = { spa_discover_florida }
		position = 8
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_florida
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				colonial_region = colonial_florida
				is_city = yes
			}	
		}
	
		effect = {
			add_dip_power = 50
			colonial_florida = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
	
	spa_west_indies = {
		icon = mission_rb_colonise_spice_islands
		required_missions = { spa_colonize_cuba spa_colonize_florida spa_colonize_hispaniola }
		position = 9
		
		provinces_to_highlight = {
			OR = {
				region = carribeans_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			carribeans_region = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				is_city = yes
			}
		}
		
		effect = {
			add_prestige = 25
			add_years_of_income = 5
			add_country_modifier = {
				name = "por_spice_trade"
				duration = 9125
			}
		}
	}
	
	spa_colonize_cali = {
		icon = mission_colonial
		required_missions = { spa_mexico }
		position = 13
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_california
				colonial_region = colonial_deseret
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				OR = {
					colonial_region = colonial_california
					colonial_region = colonial_deseret
				}
			}	
		}
	
		effect = {
			add_dip_power = 50
			tooltip = { colonial_california = { cede_province = ROOT } colonial_deseret = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_california colonial_region = colonial_deseret } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_if = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
		}
	}
	
	
	spa_contest_oregon = {
		icon = mission_colonial
		required_missions = { spa_colonize_cali }
		position = 14
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_oregon
				colonial_region = colonial_columbia
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 30
				OR = {
					colonial_region = colonial_oregon
					colonial_region = colonial_columbia
				}
			}	
		}
	
		effect = {
			add_dip_power = 50
			colonial_oregon = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			colonial_columbia = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
	
	
	spa_colonize_alaska = {
		icon = mission_colonial
		required_missions = { spa_contest_oregon }
		position = 15
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_alaska
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				colonial_region = colonial_alaska
			}	
		}
	
		effect = {
			add_dip_power = 50
			colonial_alaska = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
	
	spa_discover_spice_isles = {
		icon = mission_establish_high_seas_navy
		required_missions = {  }
		position = 16
		
		provinces_to_highlight = {
			OR = { 
				province_id = 2696
				province_id = 649
				province_id = 650
				
			}
		}
		
		trigger = { 
			649 = { has_discovered = ROOT }
			650 = { has_discovered = ROOT }
			2696 = { has_discovered = ROOT }
			has_idea = quest_for_the_new_world
		}
	
		effect = {
			add_dip_power = 25 
			hidden_effect = {
				discover_province = 645 
				discover_province = 2696 
				discover_province = 2717 
				discover_province = 2725
				discover_province = 1401
				discover_province = 1409
			}
			if = { 
				limit = { TID = { exist = yes ai = yes } 650 = { owned_by = TID } }
				create_subject = { 
					subject_type = colony
					subject = TID
				}
				TID = { country_event = { id = orion_colonial.5 days = 0 } }
			}
					
			if = { 
				limit = { 2696 = { is_empty = yes } }
				hidden_effect = {
					2696 = {
						change_trade_goods = spices
						add_territorial_core = ROOT
					}
				}
				2696 = { 
					cede_province = ROOT 
					add_province_modifier = {
						name = "spa_presidio"
						duration = -1
					}
				}
			}
			if = { 
				limit = { 2696 = { is_city = yes  NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						2696 = { owner = { is_colonizer_tech_group = no } }
					}
					hidden_effect = {
						2696 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }	
							change_trade_goods = spices
							add_territorial_core = ROOT	
						}	
					}
					2696 = { 
						cede_province = ROOT 
						add_province_modifier = {
							name = "spa_presidio"
							duration = -1
						}
					}
				}
				else_if = {
					limit = { 
						2696 = { owner = { is_colonizer_tech_group = yes } } 
					}
					2696 = { add_permanent_claim = ROOT }
				}
			}
			add_years_of_income = 2.5
		}
	}
	
	spa_colonize_samoa = {
		icon = mission_colonial
		required_missions = { spa_discover_spice_isles }
		position = 17
		
		provinces_to_highlight = {
			province_id = 1243
		}
		
		trigger = {
			1243 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_dip_power = 25
			1243 = { 
				add_province_modifier = {
					name = "spa_presidio"
					duration = -1
				}
			}
		}
	}
	
	spa_circumnavigation = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_colonize_samoa }
		position = 18
		
		provinces_to_highlight = {
			OR = {
				area = west_micronesia_area
				area = polynesia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			west_micronesia_area = { type = all has_discovered = ROOT }
			polynesia_area = { type = all has_discovered = ROOT }
			has_idea = quest_for_the_new_world	
		}
		
		effect = {
			add_country_modifier = {
				name = "circumnavigation"
				duration = 730
			}
			create_explorer = 80
		}
	}
	
	spa_colonize_hawaii = {
		icon = mission_colonial
		required_missions = { spa_circumnavigation }
		position = 19
		
		provinces_to_highlight = {
			OR = {
				province_id = 1240
				province_id = 5029 
				province_id = 5817 
				province_id = 5818 
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			1240 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
			5029 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
			5817 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
			5818 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
		}
		
		effect = {
			1240 = {
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
			5029 = {
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
			5817 = {
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
			5818 = {
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
			hidden_effect = {
				1240 = { change_trade_goods = coffee }
				5029 = { change_trade_goods = gems }
				5817 = { change_trade_goods = sugar }
				5818 = { change_trade_goods = tropical_wood }
			}
		}
	}
	
	spa_polynesia = {
		icon = mission_empire
		required_missions = { spa_colonize_hawaii spa_outpost_pacific }
		position = 20
		
		provinces_to_highlight = {
			OR = {
				region = oceanea_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			oceanea_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				is_city = yes
			}
		}
		
		effect = {
			add_prestige = 10
			add_years_of_income = 2
			add_country_modifier = {
				name = "sun_never_sets"
				duration = 36500
			}
		}
	}
}
