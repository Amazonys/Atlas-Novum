#IR Spanish mission overhaul
#slot 1
spa_slot_1 = {
	
	slot = 1
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_cuellar_convention = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { spa_defeat_infante }
		position = 2
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=spa_cuellar_convention.tooltip
				EVENT=IR_flavor_SPA.7
				BYPASS_DATE=1460
			}
		}
		
		effect = { 
			if = {
				limit = { GRA = { exists = yes is_subject_of = ROOT NOT = { religion_group = christian } } }
				hidden_effect = { GRA = { grant_independence = yes } }
				
			}
		}
	}
	
	spa_control_gibraltar = {
		icon = mission_unite_home_region
		required_missions = { spa_cuellar_convention spa_entrench_the_army }
		position = 3
		
		#ai_weight = {
		#	factor = 5
		#}
		#ai_priority = {
		#	factor = 5
		#}
		
		provinces_to_highlight = {
			spa_gibraltar_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_gibraltar_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			if = {	
				limit = { SEV = { exists = no } }
				control_mission_cede = { PROVINCES = spa_gibraltar_provinces }
			}
			else_if = {
				limit = { SEV = { exists = yes is_subject_of = ROOT } }
				every_province = {
					limit = { spa_gibraltar_provinces = yes }
					cede_province = SEV
				}
			}
			if = { 
				limit = { war_with = GRA }
				hidden_effect = { white_peace = GRA }
				create_subject = {
					subject_type = tributary_state
					subject = GRA
				}
			}
		}
	}
	
	spa_control_malaga = {
		icon = mission_unite_home_region
		required_missions = { spa_control_gibraltar }
		position = 4
		
		#ai_weight = {
		#	factor = 5
		#}
		#ai_priority = {
		#	factor = 5
		#}
		
		provinces_to_highlight = {
			spa_control_malaga_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_control_malaga_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			if = {	
				limit = { SEV = { exists = no } }
				control_mission_cede = { PROVINCES = spa_control_malaga_provinces }
			}
			else_if = {
				limit = { SEV = { exists = yes is_subject_of = ROOT } }
				every_province = {
					limit = { spa_control_malaga_provinces = yes }
					cede_province = SEV
				}
			}
			if = { 
				limit = { war_with = GRA }
				hidden_effect = { white_peace = GRA }
				create_subject = {
					subject_type = tributary_state
					subject = GRA
				}
			}
		}
	}
	
	spa_control_granada = {
		icon = mission_unite_home_region
		required_missions = { spa_control_malaga }
		position = 5
		
		#ai_weight = {
		#	factor = 5
		#}
		#ai_priority = {
		#	factor = 5
		#}
		
		provinces_to_highlight = {
			spa_control_granada_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_control_granada_provinces
			}
		}
		
		effect = {
			every_province = {
				limit = { gra_core_provinces = yes }
				if = {
					limit = { owned_by = GRA }
					hidden_effect = { add_core = GR4 }
					cede_province = GR4
				}
				else_if = { 
					limit = { country_or_non_sovereign_subject_holds = ROOT }
					hidden_effect = { add_core = GR4 remove_core = owner }
					cede_province = GR4
				}
				else = {
					add_core = GR4
				}
			}
			create_subject = {
				subject_type = coking
				subject = GR4
			}
		}
	}
	
	
	spa_control_melilla = {
		icon = mission_unite_home_region
		required_missions = { spa_reconquista }
		position = 7
		
		provinces_to_highlight = {
			spa_control_melilla_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_control_melilla_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = { PROVINCES = spa_control_melilla_provinces }
		}
	}
	
	spa_conquer_buffer_morocco = {
		icon = mission_cannons_firing
		required_missions = { spa_control_melilla spa_control_oran }
		position = 8
		
		
		provinces_to_highlight = {
			OR = { 
				province_id = 2465
				area = northern_morocco_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			2465 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			northern_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_mil_power = 25
			marrekesh_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			western_morocco_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_casablanca = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_buffer_morocco }
		position = 8
		
		provinces_to_highlight = {
			OR = {
				area = marrekesh_area
				area = western_morocco_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			marrekesh_area = { type = all country_or_non_sovereign_subject_holds = ROOT }
			western_morocco_area = { type = all country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			add_mil_power = 25 
			southern_morocco_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			sus_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			tagmudant_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			tafilalt_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_consolidate_morocco = {
		icon = mission_empire
		required_missions = { spa_conquer_casablanca }
		position = 9
		
		provinces_to_highlight = {
			OR = {
				area = western_morocco_area
				area = marrekesh_area
				area = sus_area
				area = southern_morocco_area
				area = northern_morocco_area
				area = tagmudant_area
				area = tafilalt_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			northern_morocco_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			western_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			marrekesh_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			sus_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			southern_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tagmudant_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tafilalt_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_stability = 1
			add_country_modifier = {
				name = "removed_mor_threat"
				duration = 7300
			}
			northern_morocco_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			western_morocco_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			marrekesh_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			sus_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			} 
		}
	}
	
	spa_conquer_luzon = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 21
		
		provinces_to_highlight = {
			OR = { 
				area = luzon_area
				area = southern_luzon_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			luzon_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			southern_luzon_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			every_province = {
				limit = { OR = { area = luzon_area area = southern_luzon_area } NOT = { has_province_modifier = spa_plantation } OR = { trade_goods = spices trade_goods = tea trade_goods = sugar trade_goods = coffee trade_goods = incense trade_goods = tobacco trade_goods = cotton trade_goods = dyes }}
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
		}
	}

	spa_discover_spice_isles = {
		icon = mission_establish_high_seas_navy
		required_missions = {  }
		position = 22
		
		provinces_to_highlight = {
			OR = { 
				province_id = 2696
				province_id = 649
				province_id = 650
				
			}
		}
		
		trigger = { 
			649 = { has_discovered = ROOT }
			650 = { has_discovered = ROOT }
			2696 = { has_discovered = ROOT }
			has_idea = quest_for_the_new_world
		}
	
		effect = {
			add_dip_power = 25 
			hidden_effect = {
				discover_province = 645 
				discover_province = 2696 
				discover_province = 2717 
				discover_province = 2725
				discover_province = 1401
				discover_province = 1409
			}
			if = { 
				limit = { TID = { exist = yes ai = yes } 650 = { owned_by = TID } }
				create_subject = { 
					subject_type = colony
					subject = TID
				}
				TID = { country_event = { id = orion_colonial.5 days = 0 } }
			}
					
			if = { 
				limit = { 2696 = { is_empty = yes } }
				hidden_effect = {
					2696 = {
						change_trade_goods = spices
						add_territorial_core = ROOT
					}
				}
				2696 = { 
					cede_province = ROOT 
					add_province_modifier = {
						name = "spa_presidio"
						duration = -1
					}
				}
			}
			if = { 
				limit = { 2696 = { is_city = yes  NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						2696 = { owner = { is_colonizer_tech_group = no } }
					}
					hidden_effect = {
						2696 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }	
							change_trade_goods = spices
							add_territorial_core = ROOT	
						}	
					}
					2696 = { 
						cede_province = ROOT 
						add_province_modifier = {
							name = "spa_presidio"
							duration = -1
						}
					}
				}
				else_if = {
					limit = { 
						2696 = { owner = { is_colonizer_tech_group = yes } } 
					}
					2696 = { add_permanent_claim = ROOT }
				}
			}
			add_years_of_income = 2.5
		}
	}
	
	spa_colonize_samoa = {
		icon = mission_colonial
		required_missions = { spa_discover_spice_isles }
		position = 23
		
		provinces_to_highlight = {
			province_id = 1243
		}
		
		trigger = {
			1243 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_dip_power = 25
			1243 = { 
				add_province_modifier = {
					name = "spa_presidio"
					duration = -1
				}
			}
		}
	}
	
	spa_circumnavigation = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_colonize_samoa }
		position = 24
		
		provinces_to_highlight = {
			OR = {
				area = west_micronesia_area
				area = polynesia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			west_micronesia_area = { type = all has_discovered = ROOT }
			polynesia_area = { type = all has_discovered = ROOT }
			has_idea = quest_for_the_new_world	
		}
		
		effect = {
			add_country_modifier = {
				name = "circumnavigation"
				duration = 730
			}
			create_explorer = 80
		}
	}
	
	spa_colonize_hawaii = {
		icon = mission_colonial
		required_missions = { spa_circumnavigation }
		position = 25
		
		provinces_to_highlight = {
			OR = {
				province_id = 1240
				province_id = 5029 
				province_id = 5817 
				province_id = 5818 
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			1240 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
			5029 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
			5817 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
			5818 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
		}
		
		effect = {
			1240 = {
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
			5029 = {
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
			5817 = {
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
			5818 = {
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
			hidden_effect = {
				1240 = { change_trade_goods = coffee }
				5029 = { change_trade_goods = gems }
				5817 = { change_trade_goods = sugar }
				5818 = { change_trade_goods = tropical_wood }
			}
		}
	}
	
	spa_polynesia = {
		icon = mission_empire
		required_missions = { spa_colonize_hawaii spa_outpost_pacific }
		position = 26
		
		provinces_to_highlight = {
			OR = {
				region = oceanea_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			oceanea_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				is_city = yes
			}
		}
		
		effect = {
			add_prestige = 10
			add_years_of_income = 2
			add_country_modifier = {
				name = "sun_never_sets"
				duration = 36500
			}
		}
	}
}


#slot 2
spa_slot_2 = {
	
	slot = 2
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_defeat_infante = {
		icon = mission_unite_home_region
		required_missions = { }
		position = 1
		
		provinces_to_highlight = {
			owned_by = ROOT
			controlled_by = REB
		}
		
		trigger = {
			NOT = { num_of_rebel_armies = 1 }
			NOT = { num_of_rebel_controlled_provinces = 1 }
		}
		
		effect = {
		}
	}
	
	spa_entrench_the_army = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { spa_defeat_infante }
		position = 2
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
		
		}
		
		effect = {
		}
	}
	
	spa_reconquista = {
		icon = mission_cannons_firing
		required_missions = { spa_control_granada spa_catholic_monarchs }
		
		position = 6
		
		provinces_to_highlight = {
			gra_core_provinces = yes
		}
		
		trigger = {
			conquest_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_holds_highlighted
				PROVINCES=gra_core_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			add_adm_power = 50
			add_mil_power = 50
			if = {
				limit = { NOT = { has_government_reform = reconquista_reform } }
				add_government_reform = reconquista_reform
			}
		}
	}
	
	spa_control_oran = {
		icon = mission_unite_home_region
		required_missions = { spa_reconquista }
		position = 7
		
		provinces_to_highlight = {
			spa_control_oran_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_control_oran_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = { PROVINCES = spa_control_oran_provinces }
		}
	}
	
	
	spa_control_algiers = {
		icon = mission_unite_home_region
		required_missions = { spa_control_oran }
		position = 8
		
		provinces_to_highlight = {
			spa_control_algiers_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_control_algiers_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = { PROVINCES = spa_control_algiers_provinces }
			if = {
				limit = { TLC = { exists = yes is_subject = no } }
				create_subject = {
					subject_type = dominion
					subject = TLC
				}
			}
		}
	}
	
	spa_control_bougie = {
		icon = mission_unite_home_region
		required_missions = { spa_control_algiers }
		position = 9
		
		provinces_to_highlight = {
			spa_control_bougie_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_control_bougie_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = { PROVINCES = spa_control_bougie_provinces }
		}
	}
	
	spa_conquer_algiers = {
		icon = mission_cannons_firing
		required_missions = { spa_control_bougie }
		position = 9
		
		
		provinces_to_highlight = {
			OR = { 
				area = oran_area
				area = algiers_area
				area = kabylia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			oran_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			algiers_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			kabylia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_mil_power = 25
			hautes_plaines_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			tagmudant_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			kabylia_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_algeria = {
		icon = mission_empire
		required_missions = { spa_conquer_algiers }
		position = 10
		
		
		provinces_to_highlight = {
			OR = { 
				area = tagmudant_area
				area = oran_area
				area = algiers_area
				area = hautes_plaines_area
				area = kabylia_area
				area = ouled_nail_area
				area = constantine_area
				area = ouled_nail_area
				area = north_saharan_area
				area = west_aures_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			oran_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			algiers_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			kabylia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			constantine_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tagmudant_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			hautes_plaines_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			west_aures_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			ouled_nail_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			north_saharan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_stability = 1
			add_mil_power = 50
			338 = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			339 = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
		}
	}
	

	
	spa_discover_east_indies = {
		icon = mission_establish_high_seas_navy
		required_missions = {  }
		position = 20
		
		provinces_to_highlight = {
			OR = { 
				area = visayas_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			visayas_area = { type = all has_discovered = ROOT }
			has_idea = quest_for_the_new_world
		}
	
		effect = {
			add_dip_power = 25
			if = { 
				limit = { 4352 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						4352 = { owner = { is_colonizer_tech_group = no } }
					}
					hidden_effect = {
						4352 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					4352 = { 
						cede_province = ROOT 
						add_province_modifier = {
							name = "spa_audiencia"
							duration = -1
						}
					}
				}
				else_if = {
					limit = { 
						4352 = { owner = { is_colonizer_tech_group = yes } } 
					}
					if = { 
						limit = {
							4355 = { owner = { is_colonizer_tech_group = no } }
						}
						hidden_effect = {
							4355 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						4355 = {
							cede_province = ROOT 

						}	
					}
					else_if = { 
						limit = {
							4353 = { owner = { is_colonizer_tech_group = no } }
						}
						hidden_effect = {
							4353 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						4353 = {
							cede_province = ROOT 
						}	
					}
					4352 = { add_permanent_claim = ROOT }
				}
			}
		}
	}
	
	spa_conquer_philip_isles = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 21
		
		provinces_to_highlight = {
			OR = { 
				area = visayas_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			visayas_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			4352 = { 
				add_province_modifier = {
					name = "spa_presidio"
					duration = -1
				}
			}
			every_province = {
				limit = { OR = { area = visayas_area } NOT = { has_province_modifier = spa_plantation } OR = { trade_goods = spices trade_goods = tea trade_goods = sugar trade_goods = coffee trade_goods = incense trade_goods = tobacco trade_goods = cotton trade_goods = dyes }}
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
		}
	}

	spa_colonize_taiwan = {
		icon = mission_colonial
		required_missions = { spa_discover_spice_isles }
		position = 23
		
		provinces_to_highlight = {
			area = taiwan_area
		}
		
		trigger = {
			taiwan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				is_city = yes
			}
		}
		
		effect = {
			add_dip_power = 25
			738 = { 
				add_province_modifier = {
					name = "spa_presidio"
					duration = -1
				}
			}
			add_country_modifier = {
				name = "taiwan_conquered"
				duration = 7300
			}
		}
	}
	
	spa_colonize_guam = {
		icon = mission_colonial
		required_missions = { spa_colonize_taiwan }
		position = 24
		
		provinces_to_highlight = {
			province_id = 1015
		}
		
		trigger = {
			1015 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			1015 = { 
				add_province_modifier = {
					name = "spa_presidio"
					duration = -1
				}
			}
		}
	}
	
	spa_colonize_australia = {
		icon = mission_colonial
		required_missions = { spa_circumnavigation }
		position = 25
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_australia
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 18
				OR = {
					colonial_region = colonial_australia
					is_city = yes 
				}
			}
		}
		
		effect = {
			add_dip_power = 50
			colonial_australia = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
			add_country_modifier = {
				name = "eng_australian_colony"
				duration = 18250
			}
			
		}
	}
	
	spa_new_zeeland = {
		icon = mission_empire
		required_missions = { spa_colonize_australia }
		position = 26
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_nz
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 16
				OR = {
					colonial_region = colonial_nz
				}
				is_city = yes
			}
		}
		
		effect = {
			add_dip_power = 50
			colonial_nz = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { OR = { has_province_modifier = soft_wasteland_1 has_province_modifier = soft_wasteland_2 has_province_modifier = soft_wasteland_3 }} is_empty = yes }
				add_permanent_province_modifier = {
					name = "spa_colony"
					duration = 3650
				}
			}
		}
	}
}

#slot 3
spa_slot_3 = {
	
	slot = 3
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_eleanor_navarra = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { spa_defeat_infante }
		position = 2
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=spa_eleanor_navarra.tooltip
				EVENT=IR_flavor_SPA.12
				BYPASS_DATE=1470
			}
		}
		
		effect = {
			add_dip_power = 50
		}
	}
	
	
	spa_secure_ne = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { spa_eleanor_navarra }
		position = 3
		
		provinces_to_highlight = {
			OR = {
				is_core = NAV
				is_core = VZC
			}
		}
		
		trigger = {
			adm_power = 200
			treasury = 200
			vassalize_mission_trigger = {
				TOOLTIP=spa_vassalize_VZC.tooltip
				TAG=VZC
			} 
			vassalize_mission_trigger = {
				TOOLTIP=spa_vassalize_NAV.tooltip
				TAG=NAV
			} 
		}
		
		effect = {
			add_adm_power = -200
			add_treasury = -200
			integrate_subject = {
				TOOLTIP = spa_secure_ne_1.tooltip
				TAG = VZC
			}
			integrate_subject = {
				TOOLTIP = spa_secure_ne_2.tooltip
				TAG = NAV
			}
			#integrate_subject = {
			#	TOOLTIP = spa_secure_ne_3.tooltip
			#	TAG = FOI
			#}
		}
	}

	spa_control_tripoli = {
		icon = mission_unite_home_region
		required_missions = { spa_control_algiers }
		position = 9
		
		provinces_to_highlight = {
			spa_control_tripoli_provinces = yes
		}
		
		trigger = {
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_control_tripoli_provinces
			}
		}
		
		effect = {
			#Amyzonis - NEEDED CODE for CONTROL missions
			control_mission_cede = { PROVINCES = spa_control_tripoli_provinces }
		}
	}
	
	spa_conquer_palawan = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 21
		
		provinces_to_highlight = {
			OR = { 
				area = palawan_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			palawan_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			every_province = {
				limit = { OR = { area = palawan_area } NOT = { has_province_modifier = spa_plantation } OR = { trade_goods = spices trade_goods = tea trade_goods = sugar trade_goods = coffee trade_goods = incense trade_goods = tobacco trade_goods = cotton trade_goods = dyes }}
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
			brunei_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT  } }
				add_permanent_claim = ROOT
			}
			brunei_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT  } }
				add_permanent_claim = ROOT
			}
			brunei_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT  } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_philippines = {
		icon = mission_empire
		required_missions = { spa_conquer_philip_isles spa_conquer_palawan spa_conquer_mindanao spa_conquer_luzon }
		position = 16
		
		provinces_to_highlight = {
			OR = { 
				area = visayas_area
				area = mindanao_area
				area = west_mindanao_area
				area = palawan_area
				area = luzon_area
				area = southern_luzon_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			luzon_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			southern_luzon_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			palawan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			visayas_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			mindanao_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			west_mindanao_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_dip_power = 50
			656 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_moluccas = {
		icon = mission_empire
		required_missions = { spa_conquer_philippines }
		position = 22
		
		provinces_to_highlight = {
			OR = { 
				area = lesser_sunda_islands_area
				area = ceram_area
				area = timor_area
				area = molluca_area
				area = spice_islands_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			lesser_sunda_islands_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			ceram_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			timor_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			molluca_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			spice_islands_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_dip_power = 50
			631 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			635 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_east_indies = {
		icon = mission_rb_colonise_spice_islands
		required_missions = { spa_moluccas spa_conquer_sumatra }
		position = 23
		
		provinces_to_highlight = {
			OR = {
				region = indonesia_region
				region = moluccas_region
				area = malacca_area
				area = malaya_area
				area = tenasserim_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			indonesia_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			moluccas_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			malacca_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			malaya_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			tenasserim_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_prestige = 25
			add_years_of_income = 5
			add_country_modifier = {
				name = "por_spice_trade"
				duration = 9125
			}
		}
	}
}

#slot 4
spa_slot_4 = {

	slot = 4
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_hermandad = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { spa_defeat_infante }
		position = 2
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			treasury = 100
			navy_tradition = 10
			navy_size_percentage = 0.9
		}
		
		effect = {
			add_treasury = -100
			add_navy_tradition = 5
			1745 = { add_building = shipyard }
			10023 = { add_building = shipyard }
		}
	}
	
	spa_basque_naval = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { spa_hermandad spa_eleanor_navarra }
		position = 3
		
		provinces_to_highlight = {
			country_or_non_sovereign_subject_holds = VZC
		}
		
		trigger = {
			dip_power = 100
			treasury = 50
			vassalize_mission_trigger = {
				TOOLTIP=spa_vassalize_VZC.tooltip
				TAG=VZC
			} 
		}
		
		effect = {
			add_dip_power = -100
			add_treasury = -50
			add_navy_tradition = 10
			add_country_modifier = {
				name = "spa_basque_sailors"
				duration = -1
			}
		}
	}
	
	spa_cumana = {
		icon = mission_colonial
		required_missions = { spa_discover_colombia }
		position = 9
		
		provinces_to_highlight = {
			spa_cumana_provinces = yes
		}
		
		
		trigger = {
			dip_power = 50
			treasury = 100
			831 = { has_discovered = ROOT }
		}
		
		effect = {
			add_dip_power = -50
			discovery_mission_cede = {
				PROVINCE_ID = 831
				COST = 100
				TRADE_GOOD = sugar
				MODIFIER = spa_presidio
				DURATION = -1
			}
			assign_colony_reserve = {
				PROVINCES = spa_cumana_provinces
				MODIFIER = spa_colony
				DURATION = 18250
			}
		}
	}

	spa_caracas = {
		icon = mission_colonial
		required_missions = { spa_cumana }
		position = 10
		
		provinces_to_highlight = {
			spa_caracas_provinces = yes
		}
		
		
		trigger = {
			dip_power = 50
			treasury = 100
			831 = { has_discovered = ROOT }
		}
		
		effect = {
			add_dip_power = -50
			discovery_mission_cede = {
				PROVINCE_ID = 831
				COST = 100
				TRADE_GOOD = sugar
				MODIFIER = spa_audiencia
				DURATION = -1
			}
			assign_colony_reserve = {
				PROVINCES = spa_caracas_provinces
				MODIFIER = spa_colony
				DURATION = 18250
			}
		}
	}

	spa_terra_firma = {
		icon = mission_colonial
		required_missions = { spa_caracas spa_colombia }
		position = 12
		
		provinces_to_highlight = {
			spa_terra_firma_provinces = yes
		}
		
		
		trigger = {
			adm_power = 50
			treasury = 50
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_terra_firma_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			add_adm_power = -50
			add_treasury = -50
			831 = {
				add_province_modifier = {
					name = spa_audiencia
					duration = -1 
				}
			}
		}
	}

	spa_orinoco = {
		icon = mission_colonial
		required_missions = { spa_terra_firma spa_conquer_musica }
		position = 13
		
		provinces_to_highlight = {
			spa_orinoco_provinces = yes
		}
		
		
		trigger = {
			adm_power = 50
			treasury = 50
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_orinoco_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			add_adm_power = -100
			add_treasury = -200
			assign_group_prov_modifier = {
				PROVINCES = spa_orinoco_provinces
				TYPE = city
				MODIFIER = spa_plantation
				DURATION = -1
			}
		}
	}

	spa_conquer_mindanao = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 21
		
		provinces_to_highlight = {
			OR = { 
				area = mindanao_area
				area = west_mindanao_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			mindanao_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			west_mindanao_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			every_province = {
				limit = { OR = { area = mindanao_area area = west_mindanao_area } NOT = { has_province_modifier = spa_plantation } OR = { trade_goods = spices trade_goods = tea trade_goods = sugar trade_goods = coffee trade_goods = incense trade_goods = tobacco trade_goods = cotton trade_goods = dyes }}
				add_province_modifier = {
					name = "spa_plantation"
					duration = -1
				}
			}
		}
	}
}

#slot 5
spa_slot_5 = {

	slot = 5
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_juans_will = {
		icon = mission_alliances
		required_missions = { }
		position = 1
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=spa_juans_will.tooltip
				EVENT=IR_flavor_SPA.3
				BYPASS_DATE=1456
			}
		}
		
		effect = {
			add_prestige = 5
		}
	}

	spa_farce_avila = {
		icon = mission_alliances
		required_missions = { spa_defeat_infante spa_juans_will }
		position = 2
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=spa_farce_avila.tooltip
				EVENT=IR_flavor_SPA.4
				BYPASS_DATE=1470
			}
		}
		
		effect = {
			
		}
	}
	
	spa_iberian_wedding = {
		icon = mission_alliances
		required_missions = { spa_farce_avila }
		position = 3
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=spa_iberian_wedding.tooltip
				EVENT=IR_marriages.1
				BYPASS_DATE=1472
			}
		}
		
		effect = {
			add_prestige = 5
			#DIP RELATIONS/REP MODIFIER
		}
	}
	
	spa_defeat_beltraneja = {
		icon = mission_alliances
		required_missions = { spa_iberian_wedding }
		position = 4
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=spa_defeat_beltraneja.tooltip
				EVENT=IR_marriages.23
				BYPASS_DATE=1485
			}
		}
		
		effect = {
			#stability cost modifier
		}
	}
	
	spa_catholic_monarchs = {
		icon = mission_alliances
		required_missions = { spa_defeat_beltraneja }
		position = 5
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
		#	event_mission_trigger = {
		#		TOOLTIP=spa_iberian_wedding.tooltip
		#		EVENT=IR_marriages.1
		#		BYPASS_DATE=1472
		#	}
		}
		
		effect = {
			add_prestige = 5
		}
	}
	
	spa_inquisition = {
		icon = mission_european_church
		required_missions = { spa_catholic_monarchs }
		position = 6
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
		#	event_mission_trigger = {
		#		TOOLTIP=spa_iberian_wedding.tooltip
		#		EVENT=IR_marriages.1
		#		BYPASS_DATE=1472
		#	}
		}
		
		effect = {
			add_prestige = 5
		}
	}
	

	spa_discover_colombia = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_puerto_rico }
		position = 8
		
		provinces_to_highlight = {
			spa_discover_colombia_provinces = yes
		}
		
		trigger = {
			treasury = 25
			discover_mission_trigger = {
				TOOLTIP=spa_discover_colombia.tooltip
				SCOPE=any
				PROVINCES=spa_discover_colombia_provinces
			}
		}
		
		effect = {
			discovery_mission_cede = {
				PROVINCE_ID = 5579
				COST = 25
				TRADE_GOOD = naval_supplies
				MODIFIER = mark_of_discovery
				DURATION = 3650
			}
		}	
	}

	spa_cabo_de_la_vela = {
		icon = mission_colonial
		required_missions = { spa_discover_colombia }
		position = 9
		
		provinces_to_highlight = {
			spa_guajira_provinces = yes
		}
		
		
		trigger = {
			discover_mission_trigger = {
				TOOLTIP=spa_guajira.tooltip
				SCOPE=any
				PROVINCES=spa_guajira_provinces
			}
			treasury = 50
		}
		
		effect = {
			discovery_mission_cede = {
				PROVINCE_ID = 2806
				COST = 50
				TRADE_GOOD = naval_supplies
				MODIFIER = spa_presidio
				DURATION = -1
			}
			assign_colony_reserve = {
				PROVINCES = spa_guajira_provinces
				MODIFIER = spa_colony
				DURATION = 9125
			}
		}	
	}
	
	spa_colombia = {
		icon = mission_colonial
		required_missions = { spa_cartagena spa_cabo_de_la_vela }
		position = 11
		
		provinces_to_highlight = {
			spa_castillo_de_oro_provinces = yes
		}
		
		
		trigger = {
			adm_power = 50
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_castillo_de_oro_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			adm_power = -50
			828 = {
				add_province_modifier = {
					name = spa_audiencia
					duration = -1 
				}
			}
			custom_tooltip = spa_colombia.tooltip
			assign_core_claim = {
				PROVINCES = spa_musica_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_conquer_musica = {
		icon = mission_cannons_firing
		required_missions = { spa_colombia }
		position = 12
		
		provinces_to_highlight = {
			spa_musica_provinces = yes
		}
		
		trigger = {
			MCA = { exists = no }
			conquest_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_holds_highlighted
				PROVINCES=spa_musica_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {	
			825 = {
				add_province_modifier = {
					name = spa_audiencia
					duration = -1
				}
			}
		}
	}
	
	spa_popayan = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_musica spa_panama }
		position = 13
		
		provinces_to_highlight = {
			spa_popayan_provinces = yes
		}
		
		trigger = { 
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_popayan_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
	
		effect = {
			custom_tooltip = spa_popayan_claims.tooltip
			assign_core_claim = {
				PROVINCES = spa_quito_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_control_quito = {
		icon = mission_unite_home_region
		required_missions = { spa_popayan }
		position = 14
		
		provinces_to_highlight = {
			spa_honduras_provinces = yes
		}
		
		trigger = { 
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_quito_provinces
			}
		}
	
		effect = {
			control_mission_cede = { PROVINCES = spa_quito_provinces }
			820 = {
				add_province_modifier = {
					name = spa_presidio
					duration = -1
				}
			}
			custom_tooltip = spa_quito_claims.tooltip
			assign_core_claim = {
				PROVINCES = spa_peru_coast_provinces
				TYPE = permanent_claim
			}
		}
	}	

	spa_control_peru_coast = {
		icon = mission_unite_home_region
		required_missions = { spa_control_quito }
		position = 15
		
		provinces_to_highlight = {
			spa_peru_coast_provinces = yes
		}
		
		trigger = { 
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted
				PROVINCES=spa_peru_coast_provinces
			}
		}
	
		effect = {
			control_mission_cede = { PROVINCES = spa_peru_coast_provinces }
			809 = {
				add_province_modifier = {
					name = spa_presidio
					duration = -1
				}
			}
			812 = {
				add_province_modifier = {
					name = spa_presidio
					duration = -1
				}
			}
			custom_tooltip = spa_peru_coast_claims.tooltip
			assign_core_claim = {
				PROVINCES = spa_cuzco_provinces
				TYPE = permanent_claim
			}
		}
	}	

	spa_cuzco = {
		icon = mission_unite_home_region
		required_missions = { spa_control_peru_coast }
		position = 16
		
		provinces_to_highlight = {
			spa_cuzco_provinces = yes
		}
		
		trigger = { 
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted
				PROVINCES=spa_cuzco_provinces
			}
		}
	
		effect = {
			control_mission_cede = { PROVINCES = spa_cuzco_provinces }
			every_country = {
				limit = { capital_scope = { OR = { region = peru_region region = upper_peru_region } } }
				country_event = { id = IR_flavor_SPA.34 days = 30 random = 15 }
			}
		}
	}

	spa_arequiba = {
		icon = mission_colonial
		required_missions = { spa_cuzco }
		position = 17
		
		provinces_to_highlight = {
			spa_atacama_provinces = yes
		}
		
		
		trigger = {
			dip_power = 100
			treasury = 100
			805 = { has_discovered = ROOT }
		}
		
		effect = {
			add_dip_power = -100
			discovery_mission_cede = {
				PROVINCE_ID = 805
				COST = 100
				TRADE_GOOD = ir_silver
				MODIFIER = spa_presidio
				DURATION = -1
			}
			805 = { center_of_trade = 1 }
			assign_colony_reserve = {
				PROVINCES = spa_atacama_provinces
				MODIFIER = spa_colony
				DURATION = 9125
			}
		}	
	}


	spa_atacama_coast = {
		icon = mission_colonial
		required_missions = { spa_arequiba }
		position = 18
		
		provinces_to_highlight = {
			spa_atacama_provinces = yes
		}
		
		trigger = { 
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_atacama_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
	
		effect = {

		}
	}

	spa_santiago = {
		icon = mission_colonial
		required_missions = { spa_atacama_coast }
		position = 19
		
		provinces_to_highlight = {
			spa_chile_provinces = yes
		}
		
		
		trigger = {
			dip_power = 100
			treasury = 100
			787 = { has_discovered = ROOT }
		}
		
		effect = {
			add_dip_power = -100
			discovery_mission_cede = {
				PROVINCE_ID = 787
				COST = 100
				TRADE_GOOD = naval_supplies
				MODIFIER = spa_presidio
				DURATION = -1
			}
			assign_colony_reserve = {
				PROVINCES = spa_chile_provinces
				MODIFIER = spa_colony
				DURATION = 9125
			}
		}	
	}

	spa_chile = {
		icon = mission_colonial
		required_missions = { spa_santiago }
		position = 20
		
		provinces_to_highlight = {
			spa_chile_provinces = yes
		}
		
		trigger = { 
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_chile_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
	
		effect = {
			784 = {
				add_province_modifier = {
					name = spa_audiencia
					duration = -1
				}
			}
		}
	}
}
#slot 6
spa_slot_6 = {

	slot = 6
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes

	spa_segovia_alcazar = {
		icon = mission_alliances
		required_missions = { spa_juans_will }
		position = 2
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			treasury = 100
			army_tradition = 20
			4552 = { owned_by = ROOT }
		}
		
		effect = {
			add_treasury = -100
			if = { 
				limit = { 4552 = { NOT = { has_province_modifier = spa_segovia_alcazar } } }
				4552 = {
					add_permanent_province_modifier = {
						name = "spa_segovia_alcazar"
						duration = -1
					}
				}
			}
		}
	}
	
	spa_madrid_alcazar = {
		icon = mission_alliances
		required_missions = { spa_segovia_alcazar }
		position = 3
		
		#provinces_to_highlight = {
			
		#}
		
		trigger = {
			treasury = 150
			mil_power = 50
			217 = { owned_by = ROOT }
		}
		
		effect = {
			add_treasury = -150
			add_mil_power = -50
			set_capital = 217
			if = { 
				limit = { 217 = { NOT = { has_province_modifier = spa_madrid_alcazar } } }
				217 = {
					add_permanent_province_modifier = {
						name = "spa_madrid_alcazar"
						duration = -1
					}
				}
			}
		}
	}

	spa_cartagena = {
		icon = mission_colonial
		required_missions = { spa_cabo_de_la_vela }
		position = 10
		
		provinces_to_highlight = {
			spa_cartagena_provinces = yes
		}
		
		
		trigger = {
			dip_power = 50
			treasury = 100
			828 = { has_discovered = ROOT }
		}
		
		effect = {
			add_dip_power = -50
			discovery_mission_cede = {
				PROVINCE_ID = 828
				COST = 100
				TRADE_GOOD = gold
				MODIFIER = spa_presidio
				DURATION = -1
			}
			assign_colony_reserve = {
				PROVINCES = spa_cartagena_provinces
				MODIFIER = spa_colony
				DURATION = 18250
			}
		}	
	}

	spa_uraba = {
		icon = mission_colonial
		required_missions = { spa_cartagena }
		position = 11
		
		provinces_to_highlight = {
			spa_uraba_provinces = yes
		}
		
		
		trigger = {
			adm_power = 50
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_uraba_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			adm_power = -50
			2819 = {
				add_province_modifier = {
					name = spa_presidio
					duration = -1 
				}
			}
		}	
	}

	spa_panama = {
		icon = mission_colonial
		required_missions = { spa_uraba }
		position = 12
		
		provinces_to_highlight = {
			OR = {
				province_id = 835
				spa_veragua_provinces = yes
			}
		}
		
		
		trigger = {
			dip_power = 50
			treasury = 100
			835 = { has_discovered = ROOT }
		}
		
		effect = {
			add_dip_power = -50
			discovery_mission_cede = {
				PROVINCE_ID = 835
				COST = 100
				TRADE_GOOD = naval_supplies
				MODIFIER = spa_presidio
				DURATION = -1
			}
			assign_colony_reserve = {
				PROVINCES = spa_veragua_provinces
				MODIFIER = spa_colony
				DURATION = 18250
			}
		}	
	}
	
	spa_veragua = {
		icon = mission_colonial
		required_missions = { spa_panama }
		position = 13
		
		provinces_to_highlight = {
			spa_veragua_provinces = yes
		}
		
		
		trigger = {
		
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_veragua_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			
		}	
	}

	spa_costa_rica = {
		icon = mission_colonial
		required_missions = { spa_veragua }
		position = 14
		
		provinces_to_highlight = {
			spa_costa_rica_provinces = yes
		}
		
		
		trigger = {
		
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_costa_rica_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			
		}
	}

	spa_nicaragua = {
		icon = mission_colonial
		required_missions = { spa_costa_rica spa_honduras }
		position = 15
		
		provinces_to_highlight = {
			spa_nicaragua_provinces = yes
		}
		
		
		trigger = {
		
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_nicaragua_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
		
		effect = {
			
		}
	}

	spa_potosi = {
		icon = mission_cannons_firing
		required_missions = { spa_cuzco }
		position = 17
		
		provinces_to_highlight = {
			spa_honduras_provinces = yes
		}
		
		trigger = { 
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_honduras_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
	
		effect = {

		}
	}

	spa_antofagasta = {
		icon = mission_cannons_firing
		required_missions = { spa_potosi spa_atacama_coast }
		position = 19
		
		provinces_to_highlight = {
			spa_honduras_provinces = yes
		}
		
		trigger = { 
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_honduras_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
	
		effect = {

		}
	}

	spa_settle_bolivia = {
		icon = mission_cannons_firing
		required_missions = { spa_antofagasta }
		position = 20
		
		provinces_to_highlight = {
			spa_honduras_provinces = yes
		}
		
		trigger = { 
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_honduras_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
	
		effect = {

		}
	}
}
#slot 7
spa_slot_7 = {
	
	slot = 7
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_colombus = {
		icon = mission_establish_high_seas_navy
		required_missions = { }
		position = 6
		

		#provinces_to_highlight = {
		#}
		
		trigger = { 
			event_mission_trigger = {
				TOOLTIP=spa_columbus.tooltip
				EVENT=IR_explorers.1
				BYPASS_DATE=1492
			}
		}
		
		effect = {
			add_prestige = 25
		}
	}
	
	spa_puerto_rico = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_colombus }
		position = 7
		
		provinces_to_highlight = {
			province_id = 492
		}
		
		trigger = { 
			dip_power = 50
			treasury = 50
			492 = { has_discovered = ROOT }
			has_idea = quest_for_the_new_world
		}
	
		effect = {
			add_dip_power = -50
			discovery_mission_cede = {
				PROVINCE_ID = 492
				COST = 50
				TRADE_GOOD = ir_fruit
				MODIFIER = mark_of_discovery
				DURATION = 3650
			}
			define_conquistador = {
				name = "Juan Ponce de Len"
   				shock = 3
   				fire = 1
   				manuever = 3
   				siege = 1
			}
		}
	}

	spa_chart_cuba = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_puerto_rico }
		position = 8
		
		provinces_to_highlight = {
			cuba_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_chart_cuba.tooltip
				SCOPE=any
				PROVINCES=cuba_colonial_provinces
			}
			treasury = 100
			has_idea = quest_for_the_new_world
		}
	
		effect = {
			discovery_mission_cede = {
				PROVINCE_ID = 2654
				COST = 50
				TRADE_GOOD = ir_fruit
				MODIFIER = mark_of_discovery
				DURATION = 3650
			}
			discovery_mission_cede = {
				PROVINCE_ID = 486
				COST = 50
				TRADE_GOOD = sugar
				MODIFIER = spa_presidio
				DURATION = 3650
			}
			#discovery_mission_cede = {
			#	PROVINCE_ID = 484 # HAVANA disabling for now
			#	COST = 50
			#	TRADE_GOOD = sugar
			#	MODIFIER = mark_of_discovery
			#	DURATION = 3650
			#}
			assign_colony_reserve = {
				PROVINCES = cuba_colonial_provinces
				MODIFIER = spa_colony
				DURATION = 9125
			}
		}
	}
	
	spa_settle_cuba = {
		icon = mission_colonial
		required_missions = { spa_chart_cuba }
		position = 9
		
		provinces_to_highlight = {
			cuba_colonial_provinces = yes
		}
		
		trigger = { 
		#	dip_power = 50
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=cuba_colonial_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
	
		effect = {
		#	add_dip_power = -50
			assign_group_prov_modifier = {
				PROVINCES = cuba_colonial_provinces
				TYPE = city
				MODIFIER = spa_plantation
				DURATION = -1
			}
		}
	}

	spa_discover_yucatan = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_settle_cuba }
		position = 10
		
		provinces_to_highlight = {
			spa_discover_yucatan_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=spa_discover_yucatan_provinces
			}
		}
	
		effect = {
			define_conquistador = {
				name = "Hernn Cortes"
				shock = 5
				fire = 1
				manuever = 3
				siege = 2
			}
			#claims on yucatan
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = spa_yucatan_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_seize_merida = {
		icon = mission_unite_home_region
		required_missions = { spa_discover_yucatan }
		position = 11
		
		provinces_to_highlight = {
			spa_merida_provinces = yes
		}
		
		trigger = { 
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted
				PROVINCES=spa_merida_provinces
			}
		}
	
		effect = {
			control_mission_cede = {
				PROVINCES = spa_merida_provinces
			}
			2633 = {
				add_province_modifier = {
					name = spa_presidio
					duration = -1
				}
			}
		}
	}	

	spa_yucatan = {
		icon = mission_cannons_firing
		required_missions = { spa_seize_merida }
		position = 12
		
		provinces_to_highlight = {
			spa_yucatan_provinces = yes
		}
		
		trigger = { 
			conquest_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_holds_highlighted
				PROVINCES=spa_yucatan_provinces
				OWNER_TYPE=country_or_non_sovereign_holds
			}
		}
	
		effect = {
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = spa_kiche_provinces
				TYPE = permanent_claim
			}
		}
	}	

	spa_conquer_kiche = {
		icon = mission_cannons_firing
		required_missions = { spa_yucatan }
		position = 13
		
		provinces_to_highlight = {
			spa_kiche_provinces = yes
		}
		
		trigger = { 
			conquest_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_holds_highlighted
				PROVINCES=spa_kiche_provinces
				OWNER_TYPE=country_or_non_sovereign_holds
			}
		}
	
		effect = {

		}
	}

	spa_honduras = {
		icon = mission_colonial
		required_missions = { spa_conquer_kiche }
		position = 14
		
		provinces_to_highlight = {
			spa_honduras_provinces = yes
		}
		
		trigger = { 
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_honduras_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
	
		effect = {

		}
	}

	spa_baja_cali = {
		icon = mission_colonial
		required_missions = { spa_sinaloa }
		position = 16
		
		provinces_to_highlight = {
			spa_baja_provinces = yes
		}
		
		trigger = { 
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_baja_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
	
		effect = {

		}
	}

	spa_s_cali = {
		icon = mission_colonial
		required_missions = { spa_baja_cali }
		position = 17
		
		provinces_to_highlight = {
			spa_s_cali_provinces = yes
		}
		
		trigger = { 
			num_colonized_mission_trigger = {
				TOOLTIP=spa_s_cali.tooltip
				NUM=10
				PROVINCES=spa_s_cali_provinces
			}
		}
	
		effect = {

		}
	}

	spa_san_francisco = {
		icon = mission_colonial
		required_missions = { spa_s_cali }
		position = 18
		
		provinces_to_highlight = {
			spa_central_valley_provinces = yes
		}
		
		trigger = {
			dip_power = 50
			treasury = 200
			2021 = { has_discovered = ROOT }
			2021 = { has_discovered = ROOT }
		}
		
		effect = {
			add_dip_power = -50
			discovery_mission_cede = {
				PROVINCE_ID = 2021
				COST = 100
				TRADE_GOOD = naval_supplies
				MODIFIER = spa_presidio
				DURATION = -1
			}
			discovery_mission_cede = {
				PROVINCE_ID = 5030
				COST = 100
				TRADE_GOOD = wine
				MODIFIER = mark_of_discovery
				DURATION = 3650
			}
			assign_colony_reserve = {
				PROVINCES = spa_central_valley_provinces
				MODIFIER = spa_colony
				DURATION = 9125
			}
		}
	}

	spa_central_valley = {
		icon = mission_colonial
		required_missions = { spa_san_francisco }
		position = 19
			
		provinces_to_highlight = {
			spa_central_valley_provinces = yes
		}

		trigger = { 
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_central_valley_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
	
		effect = {

		}
	}

	spa_n_cali = {
		icon = mission_colonial
		required_missions = { spa_central_valley }
		position = 20
		
		provinces_to_highlight = {
			spa_n_cali_provinces = yes
		}
		
		trigger = { 
			num_colonized_mission_trigger = {
				TOOLTIP=spa_n_cali.tooltip
				NUM=16
				PROVINCES=spa_n_cali_provinces
			}
		}
	
		effect = {
			assign_colony_reserve = {
				PROVINCES = spa_n_cali_provinces
				MODIFIER = spa_colony
				DURATION = 9125
			}
		}
	}

	spa_oregon = {
		icon = mission_colonial
		required_missions = { spa_n_cali spa_great_basin }
		position = 21
		
		provinces_to_highlight = {
			oregon_colonial_provinces = yes
		}
		
		trigger = { 
			num_colonized_mission_trigger = {
				TOOLTIP=spa_oregon.tooltip
				NUM=20
				PROVINCES=oregon_colonial_provinces
			}
		}
	
		effect = {
			assign_colony_reserve = {
				PROVINCES = oregon_colonial_provinces
				MODIFIER = spa_colony
				DURATION = 9125
			}
		}
	}
	
	spa_pacifico_norte = {
		icon = mission_colonial
		required_missions = { spa_oregon }
		position = 22
		
		provinces_to_highlight = {
			spa_pacifico_norte_provinces = yes
		}
		
		trigger = { 
			num_colonized_mission_trigger = {
				TOOLTIP=spa_pacifico_norte.tooltip
				NUM=30
				PROVINCES=spa_pacifico_norte_provinces
			}
		}
	
		effect = {
			assign_colony_reserve = {
				PROVINCES = spa_pacifico_norte_provinces
				MODIFIER = spa_colony
				DURATION = 18250
			}
		}	
	}
}

#slot 8
spa_slot_8 = {
	
	slot = 8
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_rein_in_bethencourt = {
		icon = mission_cannons_firing
		required_missions = { }
		position = 1
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
	
		provinces_to_highlight = {
			owned_by = CNR
		}
		
		trigger = {
			event_mission_trigger = {
				TOOLTIP=spa_rein_in_bethencourt.tooltip
				EVENT=IR_flavor_POR.4
				BYPASS_DATE=1455
			}
		}
		
		effect = {
			if = {
				limit = { CNR = { is_subject_of = ROOT } }
				custom_tooltip = spa_rein_in_bethencourt_claims.tooltip
				assign_claim_core = {
					PROVINCES = spa_rein_in_bethencourt_claims_provinces
					TYPE = permanent_claim
				}
			}	
			else = {
				custom_tooltip = spa_rein_in_bethencourt_claims.tooltip
				assign_claim_core = {
					PROVINCES = canaries_core_provinces
					TYPE = permanent_claim
				}
			}
		}
	}
	
	spa_conquista_realenga = {
		icon = mission_colonial
		required_missions = { spa_rein_in_bethencourt }
		position = 2
		
		provinces_to_highlight = {
			spa_guanche_provinces = yes
		}
		
		trigger = {
			conquest_mission_trigger = {
				TOOLTIP=owned_by_highlighted
				PROVINCES=spa_guanche_provinces
				OWNER_TYPE=owned_by
			}
			GLD = { exists = no }
			TAO = { exists = no }
			BNR = { exists = no }
		}
		
		effect = {
			
		}
	}
	
	spa_christianize_canaries = {
		icon = mission_colonial
		required_missions = { spa_conquista_realenga }
		position = 3
	
		provinces_to_highlight = {
			spa_guanche_provinces = yes
			has_owner_religion = no 
			OR = {
				has_owner_culture  = no
				has_owner_accepted_culture = no
			}
		}
		
		trigger = {
			every_province = {
				limit = { spa_guanche_provinces = yes }
				has_owner_religion = yes 
				OR = {
					has_owner_culture  = yes
					has_owner_accepted_culture = yes
				}
			}
		}
		
		effect = {
			
		}
	}
	
	spa_sardinia = {
		icon = mission_invade_island
		required_missions = { spa_iberian_wedding }
		position = 4
		provinces_to_highlight = {
			OR = { 
				area = sardinia_area 
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			sardinia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			corsica_sardinia_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_corsica = {
		icon = mission_invade_island
		required_missions = { spa_sardinia }
		position = 5
		provinces_to_highlight = {
			area = corsica_sardinia_area
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			corsica_sardinia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			
		}
	}
	
	spa_hispaniola = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_puerto_rico }
		position = 8
		
		provinces_to_highlight = {
			hispaniola_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_hispaniola.tooltip
				SCOPE=any
				PROVINCES=hispaniola_colonial_provinces
			}
			treasury = 50
			has_idea = quest_for_the_new_world
		}
	
		effect = {
			discovery_mission_cede = {
				PROVINCE_ID = 489
				COST = 50
				TRADE_GOOD = gold
				MODIFIER = spa_presidio
				DURATION = -1
			}
			add_country_modifier = {
				name = "spa_hispaniola_discovered"
				duration = 7300
			}
			define_explorer = {
				name = "Bartolomew Columbus"
   				shock = 2
   				fire = 2
   				manuever = 3
   				siege = 1
			}
			assign_colony_reserve = {
				PROVINCES = hispaniola_colonial_provinces
				MODIFIER = spa_colony
				DURATION = 9125
			}
		}
	}
	
	
	spa_colonize_hispaniola = {
		icon = mission_colonial
		required_missions = { spa_hispaniola }
		position = 9
		
		provinces_to_highlight = {
			hispaniola_colonial_provinces = yes
		}
		
		trigger = { 
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=hispaniola_colonial_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}	
		}
	
		effect = {
			assign_group_prov_modifier = {
				PROVINCES = hispaniola_colonial_provinces
				TYPE = city
				MODIFIER = spa_plantation
				DURATION = -1
			}
		}
	}
	
	spa_west_indies = {
		icon = mission_rb_colonise_spice_islands
		required_missions = { spa_settle_cuba spa_colonize_florida spa_colonize_hispaniola }
		position = 10
		
		provinces_to_highlight = {
			caribbean_colonial_provinces = yes
		}
		
		trigger = {
			dip_power = 100
		}
		
		effect = {
			add_dip_power = -100 
			add_prestige = 10
			assign_colony_reserve = {
				PROVINCES = caribbean_colonial_provinces
				MODIFIER = spa_colony
				DURATION = 3650
			}
		}
	}

	spa_veracruz = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_yucatan }
		position = 11
		
		provinces_to_highlight = {
			spa_veracruz_provinces = yes
		}
		
		trigger = { 
			treasury = 100
			discover_mission_trigger = {
				TOOLTIP=spa_veracruz.tooltip
				SCOPE=any
				PROVINCES=spa_veracruz_provinces
			}
		}
	
		effect = {
			discovery_mission_cede = {
				PROVINCE_ID = 2647
				COST = 100
				TRADE_GOOD = sugar
				MODIFIER = spa_presidio
				DURATION = -1
			}
			custom_tooltip = spa_veracruz_claims.tooltip
			assign_core_claim = {
				PROVINCES = spa_tlaxcala_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_tlaxcala = {
		icon = mission_unite_home_region
		required_missions = { spa_veracruz }
		position = 12
		
		provinces_to_highlight = {
			spa_tlaxcala_provinces = yes
		}
		
		trigger = { 
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_tlaxcala_provinces
			}
		}
	
		effect = {
			control_mission_cede = { PROVINCES = spa_tlaxcala_provinces }
			custom_tooltip = spa_tlaxcala_claims.tooltip
			assign_core_claim = {
				PROVINCES = spa_cortes_provinces
				TYPE = permanent_claim
			}
		}
	}	

	spa_cortes = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_tlaxcala }
		position = 13
		
		provinces_to_highlight = {
			spa_cortes_provinces = yes
		}
		
		trigger = { 
			control_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_controls_highlighted 
				PROVINCES=spa_cortes_provinces
			}
		}
	
		effect = {
			control_mission_cede = { PROVINCES = spa_cortes_provinces }
			every_country = {
				limit = { religion = nahuatl capital_scope = { region = mexico_region NOT = { OR = { spa_tarascans_provinces = yes coahuila_colonial_provinces = yes sonora_colonial_provinces = yes durango_colonial_provinces = yes }}}}
				country_event = { id = IR_flavor_SPA.33 days = 30 random = 15 }
			}
			custom_tooltip = spa_cortes_claims.tooltip
			assign_core_claim = {
				PROVINCES = spa_tarascans_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_tarascans = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_cortes }
		position = 14
		
		provinces_to_highlight = {
			spa_tarascans_provinces = yes
		}
		
		trigger = { 
			conquest_mission_trigger = {
				TOOLTIP=country_holds_or_non_sovereign_subject_holds_highlighted
				PROVINCES=spa_tarascans_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}
		}
	
		effect = {
			
		}
	}

	spa_sinaloa = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_tarascans }
		position = 15
		
		provinces_to_highlight = {
			spa_sinaloa_provinces = yes
		}
		
		trigger = { 
			
		}
	
		effect = {
			assign_colony_reserve = {
				PROVINCES = spa_central_valley_provinces
				MODIFIER = spa_colony
				DURATION = 9125spa_central_valley_provinces
			}
		}
	}

	spa_sonora = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_sinaloa }
		position = 16
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_colorado_river = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_sonora }
		position = 17
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_arizona = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_colorado_river spa_el_paso }
		position = 18
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_great_salt_lake = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_arizona }
		position = 19
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_great_basin = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_great_salt_lake }
		position = 20
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_new_orleans = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_texas }
		position = 22
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}
	
	spa_louisiana = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_new_orleans }
		position = 23
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}
}

#slot 9
spa_slot_9 = {
	
	slot = 9
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes


	spa_reclamar_lanzarote = {
		icon = mission_colonial
		required_missions = { spa_rein_in_bethencourt }
		position = 2
		
		ai_weight = {
			factor = 5
		}
		ai_priority = {
			factor = 5
		}
		
		provinces_to_highlight = {
			province_id = 10077
		}
		
		trigger = {
			10077 = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			add_prestige = 5
		}
	}
	
	spa_canaries_plantation = {
		icon = mission_colonial
		required_missions = { spa_reclamar_lanzarote spa_conquista_realenga }
		position = 3
		
		#ai_weight = {
		#	factor = 5
		#}
		#ai_priority = {
		#	factor = 5
		#}
	
		provinces_to_highlight = {
			canaries_core_provinces = yes
		}
		
		trigger = {
			dip_power = 50
			treasury = 300
			conquest_mission_trigger = {
				TOOLTIP=owned_by_highlighted 
				PROVINCES=canaries_core_provinces
				OWNER_TYPE=owned_by
			}
		}
		
		effect = {
			add_dip_power = -50
			add_treasury = -300
			if = {
				limit = { CNR = { is_subject_of = ROOT } }
				integrate_subject = {
					TOOLTIP = spa_rein_in_bethencourt_effect.tooltip
					TAG = CNR
				}
			}
			assign_group_prov_modifier = {
				PROVINCES = canaries_core_provinces
				TYPE = city
				MODIFIER = spa_plantation
				DURATION = -1
			}
			assign_group_trade_goods = {
				PROVINCES = spa_canaries_plantation_provinces
				TRADE_GOOD = sugar
			}
		}
	}
	
	spa_sicily = {
		icon = mission_invade_island
		required_missions = { spa_iberian_wedding }
		position = 4
		provinces_to_highlight = {
			OR = { 
				area = sicily_area
				area = sardinia_area 
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			sardinia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			sicily_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			corsica_sardinia_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_east_med = {
		icon = mission_invade_island
		required_missions = { spa_sicily }
		position = 5
		provinces_to_highlight = {
			OR = { 
				area = eastern_mediterrenean_islands_area
				area = cyprus_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			eastern_mediterrenean_islands_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			cyprus_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			aegean_archipelago_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT	
			}
			3176 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT	
			}
			142 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT	
			}
		}
	}
	
	spa_aegean = {
		icon = mission_invade_island
		required_missions = { spa_east_med }
		position = 6
		provinces_to_highlight = {
			OR = { 
				area = aegean_archipelago_area
				province_id = 3176
				province_id = 142
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			aegean_archipelago_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			3176 = { country_or_non_sovereign_subject_holds = ROOT }
			142 = { country_or_non_sovereign_subject_holds = ROOT }
		}
		effect = {
			add_country_modifier = {
				name = "mare_nostrum"
				duration = 9125
			}
		}
	}
	
	spa_discover_florida = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_puerto_rico }
		position = 8
		
		provinces_to_highlight = {
			spa_florida_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_florida.tooltip
				SCOPE=any
				PROVINCES=spa_florida_provinces
			}
			treasury = 75
			has_idea = quest_for_the_new_world
		}
	
		effect = {
			discovery_mission_cede = {
				PROVINCE_ID = 927
				COST = 75
				TRADE_GOOD = gold
				MODIFIER = spa_presidio
				DURATION = -1
			}
			assign_colony_reserve = {
				PROVINCES = spa_florida_provinces
				MODIFIER = spa_colony
				DURATION = 9125
			}
		}
	}

	spa_colonize_florida = {
		icon = mission_colonial
		required_missions = { spa_discover_florida }
		position = 8
		
		provinces_to_highlight = {
			spa_florida_provinces = yes
		}
		
		trigger = { 
			colonize_mission_trigger = {
				TOOLTIP=colonize_every_highlighted
				PROVINCES=spa_florida_provinces
				OWNER_TYPE=country_or_non_sovereign_subject_holds
			}	
		}
	
		effect = {
			assign_group_prov_modifier = {
				PROVINCES = spa_florida_provinces
				TYPE = city
				MODIFIER = spa_plantation
				DURATION = -1
			}
		}
	}
	
	
	spa_zacatecas = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_tarascans }
		position = 15
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_durango = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_zacatecas }
		position = 16
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_el_paso = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_durango }
		position = 17
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_cross_rio_grande = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_el_paso }
		position = 18
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_galveston = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_cross_rio_grande }
		position = 19
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_san_antonio = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_galveston }
		position = 20
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}

	spa_texas = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_san_antonio }
		position = 21
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}
	
	spa_upper_texas = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_texas }
		position = 22
		
		provinces_to_highlight = {
			yucatan_colonial_provinces = yes
		}
		
		trigger = { 
			discover_mission_trigger = {
				TOOLTIP=spa_discover_yucatan.tooltip
				SCOPE=any
				PROVINCES=yucatan_colonial_provinces
			}
		}
	
		effect = {
			
			custom_tooltip = spa_yucatan_claims.tooltip
			assign_core_claim = {
				PROVINCES = yucatan_colonial_provinces
				TYPE = permanent_claim
			}
		}
	}
}
