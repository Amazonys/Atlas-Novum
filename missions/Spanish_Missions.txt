#Orion Spanish mission overhaul
#slot 1
spa_slot_1 = {

	slot = 1
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	iberian_wedding = {
		icon = mission_alliances
		required_missions = { spa_good_heir }
		position = 2
		
		trigger = {
			OR = {
				CAS = { overlord_of = ARA }
			}
		}
		
		effect = {
			upper_andalucia_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_territorial_core = ROOT
			}
			if = {
				limit = {
					exists = NAV
					is_subject = no
					NAV = {
						is_subject = no
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 600
					target = NAV
				}
			}
		}
	}
	
	prevail_cas_succession = {
		icon = mission_have_two_subjects
		required_missions = { iberian_wedding }
		position = 3
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = prevail_cas_succession.tooltip
				OR = {
					has_country_flag = had_cas_civil_war
					NOT = {
						current_age = age_of_discovery
					}
				}
				CAS = { overlord_of = ARA }
			}	
		}
		
		effect = {
			if = { 
				limit = { current_age = age_of_discovery CAS = { overlord_of = LON } }
				inherit = LON
				add_prestige = 25
			}
			if = { 
				limit = { NOT = { current_age = age_of_discovery } }
				stability = 2
			}
		}
	}
	
	cas_ally_habsburgs = {
		icon = mission_alliances
		required_missions = { prevail_cas_succession }
		position = 4
		
		trigger = {
			alliance_with = HAB
			marriage_with = HAB
		}
		
		effect = {
			ROOT = { country_event = { id = flavor_spa.13 days = 1 } }
		}
	}
	
	spa_acquire_lowlands = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { cas_ally_habsburgs }
		position = 5
		
		
		provinces_to_highlight = {
			OR = { 
				region = low_countries_region
				area = picardy_area
			}
			country_or_non_sovereign_subject_holds = HAB
		}
		
		trigger = {	
			any_province = {
				limit = { OR = { region = low_countries_region area = picardy_area } }
				country_or_non_sovereign_subject_holds = HAB
			}
		}
		
		effect = {
			HAB = {
				country_event = { id = flavor_spa.14 days = 0 }
			}
		}
	}
	
	spa_keep_lowlands = {
		icon = mission_empire
		required_missions = { spa_acquire_lowlands }
		position = 6
		
		
		provinces_to_highlight = {
			OR = { 
				region = low_countries_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			low_countries_region = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			NED = { exists = no }
			OR = { 
				current_age = age_of_absolutism
				current_age = age_of_revolutions
			}
		}
		
		effect = {
			add_mil_power = 100
		}
	}
	
	spa_sardinia_sicily = {
		icon = mission_cannons_firing
		required_missions = {  }
		position = 7
		provinces_to_highlight = {
			OR = { 
				area = sicily_area
				area = sardinia_area 
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			sardinia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			sicily_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			corsica_sardinia_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_corsica = {
		icon = mission_cannons_firing
		required_missions = { spa_sardinia_sicily }
		position = 8
		provinces_to_highlight = {
			area = corsica_sardinia_area
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			corsica_sardinia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			eastern_mediterrenean_islands_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			cyprus_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_east_med = {
		icon = mission_cannons_firing
		required_missions = { spa_corsica }
		position = 9
		provinces_to_highlight = {
			OR = { 
				area = eastern_mediterrenean_islands_area
				area = cyprus_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			eastern_mediterrenean_islands_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			cyprus_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			aegean_archipelago_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT	
			}
			3176 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT	
			}
			142 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT	
			}
		}
	}
	
	spa_aegean = {
		icon = mission_cannons_firing
		required_missions = { spa_east_med }
		position = 10
		provinces_to_highlight = {
			OR = { 
				area = aegean_archipelago_area
				province_id = 3176
				province_id = 142
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			aegean_archipelago_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			3176 = { country_or_non_sovereign_subject_holds = ROOT }
			142 = { country_or_non_sovereign_subject_holds = ROOT }
		}
		effect = {
			add_country_modifier = {
				name = "mare_nostrum"
				duration = 9125
			}
		}
	}
	
	
	spa_discover_laplata = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_pizarro }
		position = 11
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_la_plata

			}
		}
		
		trigger = {
			buenos_aires_area = { type = all has_discovered = ROOT }
			misiones_area = { type = all has_discovered = ROOT }
			paraguay_area = { type = all has_discovered = ROOT }
		}
		
		effect = {
			if = { 
				limit = { 775 = { is_empty = yes } }
				hidden_effect = {
					775 = {
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT
					}
				}
				775 = { cede_province = ROOT }
			}
			if = { 
				limit = { 775 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						775 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						775 = {
							owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
							random_empty_neighbor_province = { 
								change_religion = event_target:native_move
								change_culture = event_target:native_move
								add_core = event_target:native_move			
								cede_province = event_target:native_move
							}
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					775 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						775 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					if = { 
						limit = {
							761 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							761 = { 
								owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
								random_empty_neighbor_province = { 
									change_religion = event_target:native_move
									change_culture = event_target:native_move
									add_core = event_target:native_move			
									cede_province = event_target:native_move
								}
								clear_global_event_target = native_move
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						761 = {
							cede_province = ROOT 
						}	
					}
					775 = { add_permanent_claim = ROOT }
				}
			}
			if = { 
				limit = { 778 = { is_empty = yes } }
				hidden_effect = {
					778 = {
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT
					}
				}
				778 = { cede_province = ROOT }
			}
			if = { 
				limit = { 778 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						778 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						778 = {
							owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
							random_empty_neighbor_province = { 
								change_religion = event_target:native_move
								change_culture = event_target:native_move
								add_core = event_target:native_move			
								cede_province = event_target:native_move
							}
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					778 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						778 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					if = { 
						limit = {
							761 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							761 = { 
								owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
								random_empty_neighbor_province = { 
									change_religion = event_target:native_move
									change_culture = event_target:native_move
									add_core = event_target:native_move			
									cede_province = event_target:native_move
								}
								clear_global_event_target = native_move
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						761 = {
							cede_province = ROOT 
						}	
					}
					778 = { add_permanent_claim = ROOT }
				}
			}
		}
	}
	
	spa_colonize_laplata = {
		icon = mission_colonial
		required_missions = { spa_discover_laplata }
		position = 12
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_la_plata
				colonial_region = colonial_chile
				colonial_region = colonial_paraguay
			}
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				OR = {
					colonial_region = colonial_la_plata
					colonial_region = colonial_chile
					colonial_region = colonial_paraguay
				}
			}	
		}
		
		effect = {
			778 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			776 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			add_dip_power = 25 
			tooltip = { colonial_la_plata = { cede_province = ROOT } colonial_chile = { cede_province = ROOT } colonial_paraguay = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_la_plata colonial_region = colonial_chile colonial_region = colonial_paraguay } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
		}
	}
	
	spa_form_laplata = {
		icon = mission_alliances
		required_missions = { spa_colonize_laplata spa_bolivia }
		position = 13
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_la_plata
				colonial_region = colonial_chile
				colonial_region = colonial_uruguay
				colonial_region = colonial_paraguay
				colonial_region = colonial_bolivia
				colonial_region = colonial_peru
			}
		}
		
		trigger = {
			NOT = { overlord_of = PEU }
			NOT = { overlord_of = PRG }
			NOT = { overlord_of = LAP }
			NOT = { overlord_of = CHL }
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 60
				OR = {
					colonial_region = colonial_la_plata
					colonial_region = colonial_chile
					colonial_region = colonial_uruguay
					colonial_region = colonial_paraguay
					colonial_region = colonial_bolivia
					colonial_region = colonial_peru
				}
				is_city = yes
			}
			
		}
		
		effect = {
			add_dip_power = 100
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_la_plata colonial_region = colonial_uruguay } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = LAP	
						cede_province = LAP
						remove_core = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						if = { 
							limit = { owned_by = ROOT }
							cede_province = LAP
						}
						add_colonysize = 999
					}
					else_if = { 
						limit = { is_city = yes country_or_non_sovereign_subject_holds = ROOT }
						add_territorial_core = LAP	
						cede_province = LAP
						remove_core = ROOT
					}
					else_if = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = LAP
					}
				}
				LAP = {
					add_liberty_desire = -50
					set_capital = 778
				}	
				every_province = {
					limit = { OR = { colonial_region = colonial_bolivia colonial_region = colonial_peru } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = PEU	
						cede_province = PEU
						remove_core = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						if = { 
							limit = { owned_by = ROOT }
							cede_province = PEU
						}
						add_colonysize = 999
					}
					else_if = { 
						limit = { is_city = yes country_or_non_sovereign_subject_holds = ROOT }
						add_territorial_core = PEU	
						cede_province = PEU
						remove_core = ROOT
					}
					else_if = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = PEU
					}
				}
				PEU = {
					add_liberty_desire = -50
					set_capital = 809
				}
				every_province = {
					limit = { OR = { colonial_region = colonial_chile } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = CHL	
						cede_province = CHL
						remove_core = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						if = { 
							limit = { owned_by = ROOT }
							cede_province = CHL
						}
						add_colonysize = 999
					}
					else_if = { 
						limit = { is_city = yes country_or_non_sovereign_subject_holds = ROOT }
						add_territorial_core = CHL	
						cede_province = CHL
						remove_core = ROOT
					}
					else_if = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = CHL
					}
				}
				CHL = {
					add_liberty_desire = -50
					set_capital = 787
				}
				every_province = {
					limit = { OR = { colonial_region = colonial_paraguay } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = PRG	
						cede_province = PRG
						remove_core = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						if = { 
							limit = { owned_by = ROOT }
							cede_province = PRG
						}
						add_colonysize = 999
					}
					else_if = { 
						limit = { is_city = yes country_or_non_sovereign_subject_holds = ROOT }
						add_territorial_core = PRG	
						cede_province = PRG
						remove_core = ROOT
					}
					else_if = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = PRG
					}
				}
				PRG = {
					add_liberty_desire = -50
					set_capital = 775
				}	
			}
			create_subject = {
				subject_type = colony
				subject = LAP
			}
			create_subject = {
				subject_type = colony
				subject = PEU
			}
			create_subject = {
				subject_type = colony
				subject = CHL
			}
			create_subject = {
				subject_type = colony
				subject = PRG
			}
		}
	}

	spa_conquer_palawan = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 14
		
		provinces_to_highlight = {
			OR = { 
				area = mindanao_area
				area = west_mindanao_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			palawan_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			brunei_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT  } }
				add_permanent_claim = ROOT
			}
			brunei_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT  } }
				add_permanent_claim = ROOT
			}
			brunei_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT  } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_borneo = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_palawan }
		position = 15
		
		provinces_to_highlight = {
			OR = {
				area = brunei_area
				area = kutai_area
				area = kalimantan_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			brunei_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			kutai_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			kalimantan_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_mil_power = 25
			2709 = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			malacca_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			malaya_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			tenasserim_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			west_java_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			central_java_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			east_java_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	
	spa_conquer_malaysia = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_borneo }
		position = 16
		
		provinces_to_highlight = {
			OR = {
				area = malacca_area
				area = malaya_area
				area = tenasserim_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			malacca_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			malaya_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			tenasserim_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_mil_power = 25 
			596 = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			
			north_sumatra_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}	
			batak_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}	
			central_sumatra_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_embrace_enlightenment = {
		icon = mission_rb_monopolize_the_channel
		required_missions = {  }
		position = 17
		
		
		
		trigger = {
			ROOT = { has_institution = enlightenment }
		}
		
		effect = {
			add_adm_power = 100
			add_dip_power = 100
			add_mil_power = 100
		}
	}
	
	spa_form_iberia = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { spa_embrace_enlightenment }
		position = 18
		
		
		trigger = {
			tag = IBE
		}
		
		effect = {	
			add_adm_power = 100
			add_dip_power = 100
			add_mil_power = 100
		}
	}
}
#slot 2
spa_slot_2 = {

	slot = 2
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_good_heir = {
		icon = mission_have_two_subjects
		required_missions = { }
		position = 1
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = good_heir.tooltip
				heir_adm = 3
				heir_dip = 3
				heir_mil = 3
			}
		}
		
		effect = {
		}
	}
	
	develop_castile = {
		icon = mission_early_game_buildings
		required_missions = { spa_good_heir }
		position = 2
		
		
		trigger = {
			temple = 5
			workshop = 5
			total_development = 300
		}
		
		effect = {
			add_adm_power = 25
			add_country_modifier = {
				name = "building_spree"
				duration = 9125
			}
		}
	}
	
	
	subjugate_navarra = {
		icon = mission_monarch_in_throne_room
		required_missions = { iberian_wedding }
		position = 3
		
		provinces_to_highlight = {
			if = { 
				limit = { NAV = { exists = yes } }
				owned_by = NAV
			}
			else_if = { 
				limit = { NAV = { exists = no } }
				province_id = 210
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			if = { 
				limit = { NAV = { exists = yes } }
				NAV = { 
					is_subject_of = ROOT 
					OR = {
						junior_union_with = ROOT
						is_subject_of_type = fief 
					}
				}	
			}
			else_if = {
				limit = { NAV = { exists = no } }
				210 = { country_or_non_sovereign_subject_holds = ROOT }
			}
		}
		
		effect = {
			
		}
	}
	
	form_spain = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { prevail_cas_succession }
		position = 4
		
		
		trigger = {
			tag = SPA	
		}
		
		effect = {
			add_adm_power = 50
		}
	}
	
	spa_lead_iberian_union = {
		icon = mission_have_two_subjects
		required_missions = { form_spain }
		position = 5
		
		trigger = {
			if = {
				limit = { POR = { exists = yes } }
				senior_union_with = POR
			}
			else_if = {
				limit = { POR = { exists = no } }
				beieras_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
				alentejo_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
			
		}
		
		effect = {
			add_adm_power = 50
		}
	}
	
	imperio_espana = {
		icon = mission_empire
		required_missions = { spa_lead_iberian_union }
		position = 6
		
		#provinces_to_highlight = {
		#}
		
		trigger = {
			government_rank	= 3
			else = {
				total_development = 1000
			}
		}
		
		effect = {
			add_country_modifier = {
				name = "spa_empire"
				duration = -1
			}
		}
	}
	
	spa_discover_colombia = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_puerto_rico }
		position = 7
		
		provinces_to_highlight = {
			OR = { 
				area = venezuela_area
				area = leeward_antilles_area
			}
		}
		
		trigger = {
			venezuela_area = { type = all has_discovered = ROOT }
			leeward_antilles_area = { type = all has_discovered = ROOT }
		}
		
		effect = {
			add_dip_power = 25
			if = { 
				limit = { 5579 = { is_empty = yes } }
				hidden_effect = {
					5579 = {
						change_religion = ROOT	
						change_culture = ROOT
						add_territorial_core = ROOT
					}
				}
				5579 = { cede_province = ROOT }
			}
			if = { 
				limit = { 5579 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						5579 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						5579 = {
							owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
							random_empty_neighbor_province = { 
								change_religion = event_target:native_move
								change_culture = event_target:native_move
								add_core = event_target:native_move			
								cede_province = event_target:native_move
							}
							clear_global_event_target = native_move
							change_religion = ROOT	
							change_culture = ROOT
							add_territorial_core = ROOT
						}	
					}
					5579 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						5579 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					5579 = { add_permanent_claim = ROOT }
				}
			}
			if = { 
				limit = { 831 = { is_empty = yes } }
				hidden_effect = {
					831 = {
						change_religion = ROOT	
						change_culture = ROOT
						add_territorial_core = ROOT
					}
				}
				831 = { cede_province = ROOT }
			}
			if = { 
				limit = { 831 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						831 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						831 = {
							owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
							random_empty_neighbor_province = { 
								change_religion = event_target:native_move
								change_culture = event_target:native_move
								add_core = event_target:native_move			
								cede_province = event_target:native_move
							}
							clear_global_event_target = native_move
							change_religion = ROOT	
							change_culture = ROOT
							add_territorial_core = ROOT
						}	
					}
					831 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						831 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					831 = { add_permanent_claim = ROOT }
				}
			}
			if = { 
				limit = { 2806 = { is_empty = yes } }
				hidden_effect = {
					2806 = {
						change_religion = ROOT	
						change_culture = ROOT
						add_territorial_core = ROOT
					}
				}
				2806 = { cede_province = ROOT }
			}
			if = { 
				limit = { 2806 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						2806 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						2806 = {
							owner = { save_global_event_target_as = native_move country_event = { id = orion_seize.1 days = 0 } }
							random_empty_neighbor_province = { 
								change_religion = event_target:native_move
								change_culture = event_target:native_move
								add_core = event_target:native_move			
								cede_province = event_target:native_move
							}
							clear_global_event_target = native_move
							change_religion = ROOT	
							change_culture = ROOT
							add_territorial_core = ROOT
						}	
					}
					2806 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						2806 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					2806 = { add_permanent_claim = ROOT }
				}
			}
		}
	}
	
	spa_colonize_colombia = {
		icon = mission_colonial
		required_missions = { spa_discover_colombia }
		position = 8
		
		provinces_to_highlight = {
			OR = { 
				area = venezuela_area
				area = maracaibo_area
				area = eastern_llanos
			}
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 12
				colonial_region = colonial_colombia
			}	
		}
	
		
		effect = {
			add_dip_power = 25
			tooltip = { bogota_area = { cede_province = ROOT } coquivacoa_area = { cede_province = ROOT }  }
			hidden_effect = {
				every_province = {
					limit = { OR = { area = bogota_area area = coquivacoa_area } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
			831 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_conquer_musica = {
		icon = mission_cannons_firing
		required_missions = { spa_colonize_colombia }
		position = 9
		
		provinces_to_highlight = {
			OR = {
				province_id = 832
				province_id = 825
				province_id = 2817
			}
		}
		
		trigger = {
			MCA = { exists = no }
			832 = { country_or_non_sovereign_subject_holds = ROOT }
			825 = { country_or_non_sovereign_subject_holds = ROOT }
			2817 = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {	
			define_conquistador = {
				name = "Francisco Pizzaro"
    			shock = 5
   				fire = 3
   				manuever = 5
    			siege = 2
			}
			tooltip = { panama_area = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { area = panama_area province_id = 2818 province_id = 823 } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
			835 = { 
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				} 
			}
		}
	}
	
	spa_pizarro = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_musica }
		position = 10
		
		provinces_to_highlight = {
			OR = {
				province_id = 2647
				province_id = 852
				province_id = 849
				province_id = 850
			}
		}
		
		trigger = { 
			if = { 
				limit = { 808 = { owner = { ai = yes } } }
				808 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 808 = { owner = { ai = no } } }
				808 = { country_or_non_sovereign_subject_holds = ROOT }
			}
			if = { 
				limit = { 809 = { owner = { ai = yes } } }
				809 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 809 = { owner = { ai = no } } }
				809 = { country_or_non_sovereign_subject_holds = ROOT }
			}
			if = { 
				limit = { 812 = { owner = { ai = yes } } }
				812 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 812 = { owner = { ai = no } } }
				812 = { country_or_non_sovereign_subject_holds = ROOT }
			}
			if = { 
				limit = { 802 = { owner = { ai = yes } } }
				802 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 802 = { owner = { ai = no } } }
				802 = { country_or_non_sovereign_subject_holds = ROOT }
			}
			if = { 
				limit = { 795 = { owner = { ai = yes } } }
				795 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 795 = { owner = { ai = no } } }
				795 = { country_or_non_sovereign_subject_holds = ROOT }
			}
		}
	
		effect = {
			every_province = {
				limit = {
					controller = { is_subject_of = ROOT }
					OR = {
						province_id = 808
						province_id = 809
						province_id = 812
						province_id = 802
						province_id = 795
					}
				}
				change_controller = ROOT
			}
			add_mil_power = 50
			tooltip = { colonial_colombia = { cede_province = ROOT } colonial_peru = { cede_province = ROOT } colonial_chile = { cede_province = ROOT }}
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_colombia colonial_region = colonial_peru  } }
					if = { 
						limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_empty = yes }
						add_permanent_claim = ROOT
					}
				}	
			}
			2942 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			808 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			820 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			787 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			809 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			colonial_bolivia = {
				limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_incas = {
		icon = mission_cannons_firing
		required_missions = { spa_pizarro }
		position = 11
		
		provinces_to_highlight = {
			OR = {
				area = kuntisuyu_area
				area = antisuyu_area
				area = potosi_area
				area = jujuy_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			antisuyu_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			kuntisuyu_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			potosi_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			jujuy_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 50
			tooltip = { peruan_coast = { cede_province = ROOT } 2834 = { cede_province = ROOT } 801 = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { area = peruan_coast province_id = 2834 province_id = 801 } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
			2834 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_bolivia = {
		icon = mission_colonial
		required_missions = { spa_incas }
		position = 12
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_bolivia
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 15
				colonial_region = colonial_bolivia
			}	
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			tooltip = { colonial_bolivia = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_bolivia } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
			2621 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	
	spa_discover_east_indies = {
		icon = mission_establish_high_seas_navy
		required_missions = {  }
		position = 13
		
		provinces_to_highlight = {
			OR = { 
				area = visayas_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			visayas_area = { type = all has_discovered = ROOT }
			has_idea_group = exploration_ideas
		}
	
		effect = {
			add_dip_power = 25
			if = { 
				limit = { 4352 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						4352 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						4352 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					4352 = { 
						cede_province = ROOT 
						add_province_modifier = {
							name = "spa_audiencia"
							duration = -1
						}
					}
				}
				else_if = {
					limit = { 
						4352 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					if = { 
						limit = {
							4355 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							4355 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						4355 = {
							cede_province = ROOT 

						}	
					}
					else_if = { 
						limit = {
							4353 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							4353 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						4353 = {
							cede_province = ROOT 
						}	
					}
					4352 = { add_permanent_claim = ROOT }
				}
			}
		}
	}
	
	spa_conquer_luzon = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 14
		
		provinces_to_highlight = {
			OR = { 
				area = luzon_area
				area = southern_luzon_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			luzon_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			southern_luzon_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			
		}
	}
	
	spa_conquer_sulawesi = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_palawan }
		position = 15
		
		provinces_to_highlight = {
			OR = {
				area = sulawesi_area
				area = south_sulawesi_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			sulawesi_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			south_sulawesi_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_mil_power = 25
			2716 = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	
	spa_conquer_java = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_borneo }
		position = 16
		
		provinces_to_highlight = {
			OR = {
				area = east_java_area
				area = central_java_area
				area = west_java_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			628 = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			east_java_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			central_java_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			west_java_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_mil_power = 25	
			indonesian_islands_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}	
			minangkabau_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}	
			south_sumatra_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}		
		}
	}
	
	spa_conquer_sumatra = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_java spa_conquer_malaysia }
		position = 17
		
		provinces_to_highlight = {
			OR = {
				area = north_sumatra_area
				area = minangkabau_area
				area = batak_area
				area = indonesian_islands_area
				area = central_sumatra_area
				area = south_sumatra_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			north_sumatra_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			batak_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			central_sumatra_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			minangkabau_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			south_sumatra_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			indonesian_islands_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_mil_power = 25 
			622 = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				add_province_modifier = {
					name = "por_feitoria"
					duration = -1
				}
			}
			hidden_effect = {
				if = {
					PSA = { exists = yes ai = yes }
					ATJ = { inherit = PSA }
				}
				if = {
					SAK = { exists = yes ai = yes }
					ATJ = { inherit = SAK }
				}
				if = {
					PGR = { exists = yes ai = yes }
					ATJ = { inherit = PGR }
				}
			}
			east_java_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			central_java_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			west_java_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
}
#slot 3
spa_slot_3 = {
	
	slot = 3
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_colonize_canaries_culture = {
		icon = mission_colonial
		required_missions = { spa_colonize_canaries }
		position = 2
		
		provinces_to_highlight = {
			OR = { 
				province_id = 5096
				province_id = 366
			}
			NOT = { culture_group = ROOT }
		}
		
		trigger = { 
			5096 = { country_or_non_sovereign_subject_holds = ROOT culture_group = ROOT }
			366 = { country_or_non_sovereign_subject_holds = ROOT culture_group = ROOT }
		}
		
		effect = {
			add_dip_power = 25
			add_prestige = 10
		}
	}
	
	spa_inquisition = {
		icon = mission_european_church
		required_missions = { iberian_wedding }
		position = 3
		
		trigger = {
			OR = {
				religion = protestant
				religion = reformed
				religion = anglican
				AND = {
					religion = catholic
					has_country_modifier = "counter_reformation"
				}
			}
		}
		
		effect = {
			if = {
				limit = { religion = protestant }
				custom_tooltip = churchpower.tooltip
				hidden_effect = {
					add_church_power = 50
				}
			}
			if = {
				limit = { religion = reformed }
				custom_tooltip = fervor.tooltip
				hidden_effect = {
					add_fervor = 50
				}
			}
			if = {
				limit = { religion = anglican }
				custom_tooltip = churchpower.tooltip
				hidden_effect = {
					add_church_power = 50
				}
			}
			if = {
				limit = { religion = catholic }
				add_papal_influence = 20
			}
			add_country_modifier = {
				name = "eng_rb_state_religion_mod"
				duration = 7300
			}
		}
	}
	
	spa_discover_america = {
		icon = mission_establish_high_seas_navy
		required_missions = { }
		position = 4
		
		provinces_to_highlight = {
			OR = { 
				continent = north_america
				continent = south_america
			}
		}
		
		trigger = { 
			OR = {
				north_america = { type = any has_discovered = ROOT }
				south_america = { type = any has_discovered = ROOT }
			}
		}
		
		effect = {
			add_dip_power = 25
			add_prestige = 25
			define_explorer = {
				name = "Bartolomew Columbus"
   				shock = 2
   				fire = 2
   				manuever = 5
   				siege = 2
			}
		}
	}
	
	spa_discover_hispaniola = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_america }
		position = 5
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_hispaniola
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			colonial_hispaniola = { type = any has_discovered = ROOT }
		}
	
		effect = {
			add_dip_power = 25
			if = { 
				limit = { 489 = { is_empty = yes } }
				hidden_effect = {
					489 = {
						change_trade_goods = sugar
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT	
					}
				}
				489 = { cede_province = ROOT }
			}
			if = { 
				limit = { 489 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						489 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						489 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_trade_goods = sugar
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					489 = { cede_province = ROOT }
				}
				else_if = {
					limit = { 
						489 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					if = { 
						limit = {
							2659 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							2659 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_trade_goods = sugar
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						2659 = {
							cede_province = ROOT 
						}	
					}
					else_if = { 
						limit = {
							5566 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							5566 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_trade_goods = sugar
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						5566 = {
							cede_province = ROOT 
						}	
					}
					489 = { add_permanent_claim = ROOT }
				}
			}
			add_country_modifier = {
				name = "spa_hispaniola_discovered"
				duration = 7300
			}
		}
	}
	
	
	
	spa_discover_puerto_rico = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_hispaniola }
		position = 6
		
		provinces_to_highlight = {
			OR = { 
				province_id = 492
				province_id = 5568
			}
		}
		
		trigger = { 
			492 = { has_discovered = ROOT }
			5568 = { has_discovered = ROOT }
		}
	
		effect = {
			add_dip_power = 25
			if = { 
				limit = { 492 = { is_empty = yes } }
				hidden_effect = {
					492 = {
						change_trade_goods = sugar
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT	
					}
				}
				492 = { cede_province = ROOT }
			}
			if = { 
				limit = { 492 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						492 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						492 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_trade_goods = sugar
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					492 = {
						cede_province = ROOT
					}
				}
				else_if = {
					limit = { 
						492 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					492 = { add_permanent_claim = ROOT }
				}
			}
			if = { 
				limit = { 5568 = { is_empty = yes } }
				hidden_effect = {
					5568 = {
						change_trade_goods = sugar
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT	
					}
				}
				5568 = { 
					cede_province = ROOT 
					add_province_modifier = {
						name = "spa_audiencia"
						duration = -1
					}
				}
			}
			if = { 
				limit = { 5568 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						5568 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						5568 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_trade_goods = sugar
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					5568 = { 
						cede_province = ROOT 
						add_province_modifier = {
							name = "spa_audiencia"
							duration = -1
						}
					}
				}
				else_if = {
					limit = { 
						5568 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					if = { 
						limit = {
							490 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							490 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_trade_goods = sugar
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						490 = {
							cede_province = ROOT 
							add_province_modifier = {
								name = "spa_audiencia"
								duration = -1
							}
						}	
					}
					else_if = { 
						limit = {
							2658 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							2658 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_trade_goods = sugar
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT
							}
						}
						2658 = {
							cede_province = ROOT 
							add_province_modifier = {
								name = "spa_audiencia"
								duration = -1
							}
						}	
					}
					5568 = { add_permanent_claim = ROOT }
				}
			}
		}
	}
	
	
	spa_colonize_hispaniola = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_puerto_rico }
		position = 7
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_hispaniola
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 6
				colonial_region = colonial_hispaniola
			}	
		}
	
		effect = {
			add_dip_power = 25
			tooltip = { colonial_hispaniola = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_hispaniola } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
		}
	}
	
	spa_discover_yucatan = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_colonize_hispaniola }
		position = 8
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_yucatan
				province_id = 2637
				province_id = 840
				province_id = 843
				province_id = 2636
			}
		}
		
		trigger = { 
			colonial_yucatan = { type = all has_discovered = ROOT }
			840 = { has_discovered = ROOT }
			2637 = { has_discovered = ROOT }
			843 = { has_discovered = ROOT }
			2636 = { has_discovered = ROOT }
		}
	
		effect = {
			add_dip_power = 25
			if = { 
				limit = { 840 = { is_empty = yes } }
				hidden_effect = {
					840 = {
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT	
					}
				}
				840 = { 
					cede_province = ROOT 
					add_province_modifier = {
						name = "spa_audiencia"
						duration = -1
					}
				}
			}
			if = { 
				limit = { 840 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						840 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						840 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					840 = { 
						cede_province = ROOT 
						add_province_modifier = {
							name = "spa_audiencia"
							duration = -1
						}
					}
				}
				else_if = {
					limit = { 
						840 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					840 = { add_permanent_claim = ROOT }
				}
			}
			if = { 
				limit = { 2637 = { is_empty = yes } }
				hidden_effect = {
					2637 = {
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT	
					}
				}
				2637 = { 
					cede_province = ROOT 
					add_province_modifier = {
						name = "spa_audiencia"
						duration = -1
					}
				}
			}
			if = { 
				limit = { 2637 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						2637 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						2637 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT
						}	
					}
					2637 = { 
						cede_province = ROOT 
						add_province_modifier = {
							name = "spa_audiencia"
							duration = -1
						}
					}
				}
				else_if = {
					limit = { 
						2637 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					2637 = { add_permanent_claim = ROOT }
				}
			}
			colonial_mexico = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			colonial_yucatan = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			colonial_guatemala = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}	
	
	spa_conquer_yucatan = {
		icon = mission_cannons_firing
		required_missions = { spa_discover_yucatan }
		position = 9
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_yucatan
				colonial_region = colonial_guatemala
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			is_city = yes
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8
				colonial_region = colonial_yucatan
			}	
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 10
				colonial_region = colonial_guatemala
			}
		}
	
		effect = {
			tooltip = { honduras_area = { cede_province = ROOT } nicaragua_area = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { area = honduras_area area = nicaragua_area } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
		}
	}
	
	spa_form_colombia = {
		icon = mission_alliances
		required_missions = { spa_conquer_musica }
		position = 10
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_colombia
			}
		}
		
		trigger = {
			NOT = { overlord_of = COL }
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 30
				colonial_region = colonial_colombia
				is_city = yes
			}
			
		}
		
		effect = {
			add_dip_power = 50
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_colombia } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = COL	
						cede_province = COL
						remove_core = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						if = { 
							limit = { owned_by = ROOT }
							cede_province = COL
						}
						add_colonysize = 999
					}
					else_if = { 
						limit = { is_city = yes country_or_non_sovereign_subject_holds = ROOT }
						add_territorial_core = COL	
						cede_province = COL
						remove_core = ROOT
					}
					else_if = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = COL
					}
				}
				COL = {
					add_liberty_desire = -50
					set_capital = 858
				}	
			}
			create_subject = {
				subject_type = colony
				subject = COL
			}
		}
	}
	
	
	
	spa_upper_mexico = {
		icon = mission_colonial
		required_missions = { spa_mexico }
		position = 11
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_durango
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 6
				colonial_region = colonial_durango
			}	
		}
	
		effect = {
			add_dip_power = 25
			tooltip = { colonial_durango = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_durango } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
			2621 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_form_mexico = {
		icon = mission_alliances
		required_missions = { spa_upper_mexico spa_colonize_coahuila }
		position = 12
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_coahuila
				colonial_region = colonial_mexico
				colonial_region = colonial_ngalicia
				colonial_region = colonial_durango
				colonial_region = colonial_yucatan
				colonial_region = colonial_guatemala
			}
		}
		
		trigger = {
			NOT = { overlord_of = MEX }
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 50
				OR = {
					colonial_region = colonial_coahuila
					colonial_region = colonial_mexico
					colonial_region = colonial_ngalicia
					colonial_region = colonial_durango
					colonial_region = colonial_yucatan
					colonial_region = colonial_guatemala
				}
				is_city = yes
			}
			
		}
		
		effect = {
			add_dip_power = 100
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_coahuila colonial_region = colonial_mexico colonial_region = colonial_ngalicia colonial_region = colonial_durango colonial_region = colonial_yucatan colonial_region = colonial_guatemala } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = MEX	
						cede_province = MEX
						remove_core = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						if = { 
							limit = { owned_by = ROOT }
							cede_province = MEX
						}
						add_colonysize = 999
					}
					else_if = { 
						limit = { is_city = yes country_or_non_sovereign_subject_holds = ROOT }
						add_territorial_core = MEX	
						cede_province = MEX
						remove_core = ROOT
					}
					else_if = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = MEX
					}
				}
				MEX = {
					add_liberty_desire = -50
					set_capital = 852
				}	
			}
			create_subject = {
				subject_type = colony
				subject = MEX
			}
		}
	}
	
	
	spa_conquer_philip_isles = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 14
		
		provinces_to_highlight = {
			OR = { 
				area = visayas_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			visayas_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			
		}
	}
		
	spa_conquer_philippines = {
		icon = mission_empire
		required_missions = { spa_conquer_philip_isles spa_conquer_palawan spa_conquer_mindanao spa_conquer_luzon }
		position = 15
		
		provinces_to_highlight = {
			OR = { 
				area = visayas_area
				area = mindanao_area
				area = west_mindanao_area
				area = palawan_area
				area = luzon_area
				area = southern_luzon_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			luzon_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			southern_luzon_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			palawan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			visayas_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			mindanao_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			west_mindanao_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_dip_power = 50
			656 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_moluccas = {
		icon = mission_empire
		required_missions = { spa_conquer_philippines spa_conquer_java }
		position = 17
		
		provinces_to_highlight = {
			OR = { 
				area = lesser_sunda_islands_area
				area = ceram_area
				area = timor_area
				area = molluca_area
				area = spice_islands_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			lesser_sunda_islands_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			ceram_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			timor_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			molluca_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			spice_islands_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_dip_power = 50
			631 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			635 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_east_indies = {
		icon = mission_rb_colonise_spice_islands
		required_missions = { spa_moluccas spa_conquer_sumatra }
		position = 18
		
		provinces_to_highlight = {
			OR = {
				region = indonesia_region
				region = moluccas_region
				area = malacca_area
				area = malaya_area
				area = tenasserim_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			indonesia_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			moluccas_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			malacca_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			malaya_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			tenasserim_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_prestige = 25
			add_years_of_income = 5
			add_country_modifier = {
				name = "por_spice_trade"
				duration = 9125
			}
		}
	}
	
}

#slot 4
spa_slot_4 = {
	
	slot = 4
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_colonize_canaries = {
		icon = mission_colonial
		required_missions = { }
		
		trigger = {
			5096 = { country_or_non_sovereign_subject_holds = ROOT }
			366 = { country_or_non_sovereign_subject_holds = ROOT }
			CNR = { exists = no }
		}
		
		effect = {
			add_mil_power = 25
			5096 = {
				add_building = fort_15th
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
				hidden_effect = { 
					change_trade_goods = sugar
				}
			}
			upper_andalucia_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT	
			}
		}
	}
	
	finish_reconqista = {
		icon = mission_cannons_firing
		required_missions = { spa_colonize_canaries }
		
		position = 2
		
		provinces_to_highlight = {
			OR = {
				area = upper_andalucia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			upper_andalucia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_mil_power = 50
			add_country_modifier = {
				name = "completing_the_reconquista"
				duration = 7300
			}
			upper_andalucia_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			335 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			337 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	control_melilla = {
		icon = mission_unite_home_region
		required_missions = { finish_reconqista }
		position = 3
		
		provinces_to_highlight = {
			province_id = 335
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			if = { 
				limit = { 335 = { owner = { ai = yes } } }
				335 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 335 = { owner = { ai = no } } }
				335 = { country_or_non_sovereign_subject_holds = ROOT }
			}
		}
		
		effect = {
			every_province = {
				limit = {
					controller = { is_subject_of = ROOT }
					OR = {
						province_id = 335
					}
				}
				change_controller = ROOT
			}
			add_mil_power = 25
			335 = { 
				cede_province = ROOT 
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			} 
			2465 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			northern_morocco_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_buffer_morocco = {
		icon = mission_cannons_firing
		required_missions = { control_melilla }
		position = 4
		
		
		provinces_to_highlight = {
			OR = { 
				province_id = 2465
				area = northern_morocco_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			2465 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			northern_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_mil_power = 25
			marrekesh_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			western_morocco_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_casablanca = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_buffer_morocco }
		position = 5
		
		provinces_to_highlight = {
			OR = {
				area = marrekesh_area
				area = western_morocco_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			marrekesh_area = { type = all country_or_non_sovereign_subject_holds = ROOT }
			western_morocco_area = { type = all country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			add_mil_power = 25 
			southern_morocco_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			sus_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			tagmudant_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			tafilalt_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_consolidate_morocco = {
		icon = mission_empire
		required_missions = { spa_conquer_casablanca }
		position = 6
		
		provinces_to_highlight = {
			OR = {
				area = western_morocco_area
				area = marrekesh_area
				area = sus_area
				area = southern_morocco_area
				area = northern_morocco_area
				area = tagmudant_area
				area = tafilalt_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			northern_morocco_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			western_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			marrekesh_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			sus_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			southern_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tagmudant_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tafilalt_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_stability = 1
			add_country_modifier = {
				name = "removed_mor_threat"
				duration = 7300
			}
			northern_morocco_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			western_morocco_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			marrekesh_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			sus_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			} 
		}
	}
	
	spa_discover_cuba = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_puerto_rico }
		position = 7
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_cuba
			}
		}
		
		trigger = { 
			colonial_cuba = { type = all has_discovered = ROOT }
		}
	
		effect = {
			add_dip_power = 25
			if = { 
				limit = { 2654 = { is_empty = yes } }
				hidden_effect = {
					2654 = {
						owner = { country_event = { id = orion_seize.1 days = 0 } }
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT	
					}
				}
				2654 = { 
					cede_province = ROOT 
				}
			}
			if = { 
				limit = { 2654 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						2654 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						2654 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT	
						}	
					}
					2654 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						2654 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					if = { 
						limit = {
							486 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							486 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT	
							}
						}
						486 = {
							cede_province = ROOT 
						}		
					}
					else_if = { 
						limit = {
							5572 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							5572 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT	
							}
						}
						5572 = {
							cede_province = ROOT 
						}	
					}
					2654 = { add_permanent_claim = ROOT }
				}
			}
			if = { 
				limit = { 2655 = { is_empty = yes } }
				hidden_effect = {
					2655 = {
						owner = { country_event = { id = orion_seize.1 days = 0 } }
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT	
					}
				}
				2655 = { 
					cede_province = ROOT 
				}
			}
			if = { 
				limit = { 2655 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						2655 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						2655 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT	
						}	
					}
					2655 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						2655 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					if = { 
						limit = {
							2656 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							2656 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT	
							}
						}
						2656 = {
							cede_province = ROOT 
						}		
					}
					else_if = { 
						limit = {
							485 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							485 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT	
							}
						}
						485 = {
							cede_province = ROOT 
						}	
					}
					2655 = { add_permanent_claim = ROOT }
				}
			}
			if = { 
				limit = { 484 = { is_empty = yes } }
				hidden_effect = {
					484 = {
						owner = { country_event = { id = orion_seize.1 days = 0 } }
						change_religion = ROOT	
						change_culture = castillian
						add_territorial_core = ROOT	
					}
				}
				484 = { 
					cede_province = ROOT 
				}
			}
			if = { 
				limit = { 484 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						484 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						484 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_religion = ROOT	
							change_culture = castillian
							add_territorial_core = ROOT	
						}	
					}
					484 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						484 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					if = { 
						limit = {
							5569 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							5569 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT	
							}
						}
						5569 = {
							cede_province = ROOT 
						}		
					}
					else_if = { 
						limit = {
							5570 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							5570 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								change_culture = castillian
								add_territorial_core = ROOT	
							}
						}
						5570 = {
							cede_province = ROOT 
						}	
					}
					484 = { add_permanent_claim = ROOT }
				}
			}
		}
	}
	
	spa_colonize_cuba = {
		icon = mission_colonial
		required_missions = { spa_discover_cuba }
		position = 8
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_cuba
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 6
				colonial_region = colonial_cuba
				is_city = yes
			}	
		}
	
		effect = {
			tooltip = { colonial_cuba = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_cuba } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
		}
	}
    spa_cortes = {
		icon = mission_cannons_firing
		required_missions = { spa_discover_yucatan }
		position = 9
		
		provinces_to_highlight = {
			OR = {
				province_id = 2647
				province_id = 852
				province_id = 849
				province_id = 850
			}
		}
		
		trigger = { 
			if = { 
				limit = { 2647 = { owner = { ai = yes } } }
				2647 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 2647 = { owner = { ai = no } } }
				2647 = { country_or_non_sovereign_subject_holds = ROOT }
			}
			if = { 
				limit = { 852 = { owner = { ai = yes } } }
				852 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 852 = { owner = { ai = no } } }
				852 = { country_or_non_sovereign_subject_holds = ROOT }
			}
			if = { 
				limit = { 849 = { owner = { ai = yes } } }
				849 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 849 = { owner = { ai = no } } }
				849 = { country_or_non_sovereign_subject_holds = ROOT }
			}
			if = { 
				limit = { 850 = { owner = { ai = yes } } }
				850 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 850 = { owner = { ai = no } } }
				850 = { country_or_non_sovereign_subject_holds = ROOT }
			}
		}
	
		effect = {
			every_province = {
				limit = {
					controller = { is_subject_of = ROOT }
					OR = {
						province_id = 852
						province_id = 2647
						province_id = 849
						province_id = 850
					}
				}
				change_controller = ROOT
			}
			add_mil_power = 50
			tooltip = { mexico_area = { cede_province = ROOT } eastern_mexico_area = { cede_province = ROOT }}
			hidden_effect = {
				every_province = {
					limit = { OR = { area = mexico_area area = eastern_mexico_area } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
			852 = {
			 	add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}	
		
	
	spa_mexico = {
		icon = mission_colonial
		required_missions = { spa_cortes }
		position = 10
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_mexico
				colonial_region = colonial_ngalicia
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				colonial_region = colonial_mexico
			}	
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 3
				colonial_region = colonial_ngalicia
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			tooltip = { colonial_mexico = { cede_province = ROOT } colonial_ngalicia = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_mexico colonial_region = colonial_ngalicia } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
			2621 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_colonize_coahuila = {
		icon = mission_colonial
		required_missions = { spa_mexico }
		position = 11
				
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_coahuila
				
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				colonial_region = colonial_coahuila
			}	
			
		}
	
		effect = {
			hidden_effect = {
				colonial_coahuila = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
			}
			colonial_coahuila = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
		}
	}
	
	spa_conquer_tejas = {
		icon = mission_colonial
		required_missions = { spa_colonize_coahuila }
		position = 12
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_texas
				
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 18
				colonial_region = colonial_texas
			}	
			
		}
	
		effect = {
			hidden_effect = {
				colonial_texas = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
				colonial_arizona = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
				
			}
			colonial_texas = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
			colonial_arizona = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
		}
	}
	
	spa_conquer_louisiana = {
		icon = mission_colonial
		required_missions = { spa_conquer_tejas spa_form_mexico }
		position = 13
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_louisiana
				
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				colonial_region = colonial_louisiana
			}	
			
		}
	
		effect = {
			hidden_effect = {
				colonial_louisiana = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}	
			}
			colonial_louisiana = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
		}
	}
	
	spa_conquer_mindanao = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 14
		
		provinces_to_highlight = {
			OR = { 
				area = mindanao_area
				area = west_mindanao_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			mindanao_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			west_mindanao_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			
		}
	}
	
	spa_colonize_taiwan = {
		icon = mission_colonial
		required_missions = { spa_discover_spice_isles }
		position = 15
		
		provinces_to_highlight = {
			area = taiwan_area
		}
		
		trigger = {
			taiwan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				is_city = yes
			}
		}
		
		effect = {
			add_dip_power = 25
			add_country_modifier = {
				name = "taiwan_conquered"
				duration = 7300
			}
		}
	}
	
	spa_colonize_guam = {
		icon = mission_colonial
		required_missions = { spa_colonize_taiwan }
		position = 16
		
		provinces_to_highlight = {
			province_id = 1015
		}
		
		trigger = {
			1015 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_dip_power = 25
			add_mil_power = 25
		}
	}
	
	spa_colonize_australia = {
		icon = mission_colonial
		required_missions = { spa_circumnavigation }
		position = 17
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_australia
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 18
				OR = {
					colonial_region = colonial_australia
					is_city = yes 
				}
			}
		}
		
		effect = {
			tooltip = { colonial_australia = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_australia } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
			add_country_modifier = {
				name = "eng_australian_colony"
				duration = 18250
			}
			
		}
	}
	
	spa_new_zeeland = {
		icon = mission_empire
		required_missions = { spa_colonize_australia }
		position = 18
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_nz
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 16
				OR = {
					colonial_region = colonial_nz
				}
				is_city = yes
			}
		}
		
		effect = {
			tooltip = { colonial_nz = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_nz } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
		}
	}
}

#slot 5
spa_slot_5 = {
	
	slot = 5
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_navy_build = {
		icon = mission_galleys_in_port
		required_missions = { spa_colonize_canaries }
		position = 2
		
		trigger = {
			navy_size_percentage = 0.9
			224 = {
				owned_by = ROOT
			}
		}
		
		effect = {
			add_dip_power = 25
			add_navy_tradition = 15
			add_country_modifier = {
				name = "naval_enthusiasm_mission"
				duration = 9125 #25 years
			}
		}
	}
	
	
	control_oran = {
		icon = mission_unite_home_region
		required_missions = { finish_reconqista }
		position = 3
		
		provinces_to_highlight = {
			province_id = 337
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			if = { 
				limit = { 337 = { owner = { ai = yes } } }
				337 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 337 = { owner = { ai = no } } }
				337 = { country_or_non_sovereign_subject_holds = ROOT }
			}
		}
		
		effect = {
			every_province = {
				limit = {
					controller = { is_subject_of = ROOT }
					OR = {
						province_id = 337
					}
				}
				change_controller = ROOT
			}
			add_mil_power = 25
			337 = { 
				cede_province = ROOT 
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			} 
			338 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	control_algiers = {
		icon = mission_unite_home_region
		required_missions = { control_oran }
		position = 4
		
		provinces_to_highlight = {
			province_id = 338
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			if = { 
				limit = { 338 = { owner = { ai = yes } } }
				338 = {
					OR = {
						country_or_non_sovereign_subject_holds = ROOT
						custom_trigger_tooltip = {
							tooltip = control_prov.tooltip
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
			else_if = { 
				limit = { 338 = { owner = { ai = no } } }
				338 = { country_or_non_sovereign_subject_holds = ROOT }
			}
		}
		
		effect = {
			every_province = {
				limit = {
					controller = { is_subject_of = ROOT }
					OR = {
						province_id = 338
					}
				}
				change_controller = ROOT
			}
			add_mil_power = 25
			338 = { 
				cede_province = ROOT 
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			} 
			oran_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			algiers_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			kabylia_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_algiers = {
		icon = mission_cannons_firing
		required_missions = { control_algiers }
		position = 5
		
		
		provinces_to_highlight = {
			OR = { 
				area = oran_area
				area = algiers_area
				area = kabylia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			oran_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			algiers_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			kabylia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_mil_power = 25
			hautes_plaines_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			tagmudant_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			kabylia_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_algeria = {
		icon = mission_empire
		required_missions = { spa_conquer_algiers }
		position = 6
		
		
		provinces_to_highlight = {
			OR = { 
				area = tagmudant_area
				area = oran_area
				area = algiers_area
				area = hautes_plaines_area
				area = kabylia_area
				area = ouled_nail_area
				area = constantine_area
				area = ouled_nail_area
				area = north_saharan_area
				area = west_aures_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			oran_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			algiers_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			kabylia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			constantine_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tagmudant_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			hautes_plaines_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			west_aures_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			ouled_nail_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			north_saharan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_stability = 1
			add_mil_power = 50
			338 = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			339 = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
		}
	}
	

	
	spa_discover_florida = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_puerto_rico }
		position = 7
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_florida
			}
		}
		
		trigger = { 
			colonial_florida = { type = all has_discovered = ROOT }
		}
	
		effect = {
			add_dip_power = 25
			hidden_effect = {
				927 = {
					change_religion = ROOT	
					change_culture = castillian
					add_territorial_core = ROOT	
				}
			}
			927 = { cede_province = ROOT }	
		}
	}
	
	spa_colonize_florida = {
		icon = mission_colonial
		required_missions = { spa_discover_florida }
		position = 8
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_florida
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 3
				colonial_region = colonial_florida
			}	
		}
	
		effect = {
			hidden_effect = {
				colonial_florida = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { province_id = 2533 province_id = 923 province_id = 922 province_id = 2530 } }
					add_territorial_core = ROOT
				}
			}
			colonial_florida = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { province_id = 2533 province_id = 923 province_id = 922 province_id = 2530 } }
				cede_province = ROOT
			}
		}
	}
	
	spa_west_indies = {
		icon = mission_rb_colonise_spice_islands
		required_missions = { spa_colonize_cuba spa_colonize_florida spa_discover_yucatan }
		position = 9
		
		provinces_to_highlight = {
			OR = {
				region = carribeans_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			carribeans_region = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				is_city = yes
			}
		}
		
		effect = {
			add_prestige = 25
			add_years_of_income = 5
			add_country_modifier = {
				name = "por_spice_trade"
				duration = 9125
			}
		}
	}
	
	spa_colonize_cali = {
		icon = mission_colonial
		required_missions = { spa_mexico }
		position = 11
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_california
				colonial_region = colonial_deseret
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				OR = {
					colonial_region = colonial_california
					colonial_region = colonial_deseret
				}
			}	
		}
	
		effect = {
			add_dip_power = 50
			tooltip = { colonial_california = { cede_province = ROOT } colonial_deseret = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_california colonial_region = colonial_deseret } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
		}
	}
	
	
	spa_contest_oregon = {
		icon = mission_colonial
		required_missions = { spa_colonize_cali }
		position = 12
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_oregon
				colonial_region = colonial_columbia
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 30
				OR = {
					colonial_region = colonial_oregon
					colonial_region = colonial_columbia
				}
			}	
		}
	
		effect = {
			add_dip_power = 50
			tooltip = { colonial_columbia = { cede_province = ROOT } colonial_oregon = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_columbia colonial_region = colonial_oregon } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
		}
	}
	
	
	spa_colonize_alaska = {
		icon = mission_colonial
		required_missions = { spa_contest_oregon }
		position = 13
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_alaska
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 30
				colonial_region = colonial_alaska
			}	
		}
	
		effect = {
			add_dip_power = 50
			tooltip = { colonial_alaska = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = colonial_alaska } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
		}
	}
	
	spa_discover_spice_isles = {
		icon = mission_establish_high_seas_navy
		required_missions = {  }
		position = 14
		
		provinces_to_highlight = {
			OR = { 
				province_id = 2696
				province_id = 649
				province_id = 650
				
			}
		}
		
		trigger = { 
			649 = { has_discovered = ROOT }
			650 = { has_discovered = ROOT }
			2696 = { has_discovered = ROOT }
			has_idea_group = exploration_ideas
		}
	
		effect = {
			add_dip_power = 25 
			hidden_effect = {
				discover_province = 645 
				discover_province = 2696 
				discover_province = 2717 
				discover_province = 2725
				discover_province = 1401
				discover_province = 1409
			}
			if = { 
				limit = { TID = { exist = yes ai = yes } 650 = { owned_by = TID } }
				create_subject = { 
					subject_type = subject
					subject = TID
				}
				TID = { country_event = { id = orion_colonial.5 days = 0 } }
			}
					
			if = { 
				limit = { 2696 = { is_empty = yes } }
				hidden_effect = {
					2696 = {
						change_trade_goods = spices
						add_territorial_core = ROOT
					}
				}
				2696 = { 
					cede_province = ROOT 
				}
			}
			if = { 
				limit = { 2696 = { is_city = yes  NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						2696 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						2696 = {
							province_event = { id = orion_seize.1 days = 0 } 
							change_trade_goods = spices
							add_territorial_core = ROOT	
						}	
					}
					2696 = { 
						cede_province = ROOT 
					}
				}
				else_if = {
					limit = { 
						2696 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					2696 = { add_permanent_claim = ROOT }
				}
			}
			add_years_of_income = 2.5
		}
	}
	
	spa_colonize_samoa = {
		icon = mission_colonial
		required_missions = { spa_discover_spice_isles }
		position = 15
		
		provinces_to_highlight = {
			province_id = 1243
		}
		
		trigger = {
			1243 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_dip_power = 25
		}
	}
	
	spa_circumnavigation = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_colonize_samoa }
		position = 16
		
		provinces_to_highlight = {
			OR = {
				area = west_micronesia_area
				area = polynesia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			west_micronesia_area = { type = all has_discovered = ROOT }
			polynesia_area = { type = all has_discovered = ROOT }
			has_idea_group = exploration_ideas	
		}
		
		effect = {
			add_country_modifier = {
				name = "circumnavigation"
				duration = 730
			}
			create_explorer = 80
		}
	}
	
	spa_colonize_hawaii = {
		icon = mission_colonial
		required_missions = { spa_circumnavigation }
		position = 17
		
		provinces_to_highlight = {
			OR = {
				province_id = 1240
				province_id = 5029 
				province_id = 5817 
				province_id = 5818 
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			1240 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
			5029 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
			5817 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
			5818 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
		}
		
		effect = {
			1240 = {
				add_province_modifier = {
					name = "por_plantation"
					duration = -1
				}
			}
			5029 = {
				add_province_modifier = {
					name = "por_plantation"
					duration = -1
				}
			}
			5817 = {
				add_province_modifier = {
					name = "por_plantation"
					duration = -1
				}
			}
			5818 = {
				add_province_modifier = {
					name = "por_plantation"
					duration = -1
				}
			}
			hidden_effect = {
				1240 = { change_trade_goods = coffee }
				5029 = { change_trade_goods = gems }
				5817 = { change_trade_goods = sugar }
				5818 = { change_trade_goods = tropical_wood }
			}
		}
	}
	
	spa_polynesia = {
		icon = mission_empire
		required_missions = { spa_colonize_hawaii spa_outpost_pacific }
		position = 18
		
		provinces_to_highlight = {
			OR = {
				region = oceanea_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			oceanea_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				is_city = yes
			}
		}
		
		effect = {
			add_prestige = 10
			add_years_of_income = 2
			add_country_modifier = {
				name = "sun_never_sets"
				duration = 36500
			}
		}
	}
	
}
