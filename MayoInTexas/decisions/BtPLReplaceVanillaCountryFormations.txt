country_decisions = {

#Moving the 1001 different files into this one, mostly for my sanity, easier ctrl-f, and because I'm slowly overhauling them all anyway to a hopefully more dynamic system with fewer assumptions, limitations, and more dynamic possibilities. Playing checkers to get that one required province to form a country 
#really isn't the point, I think, so in general I'm moving away from specific provinces requirments and moving towards percentage of the provinces in the general area.
#Note that, as a general rule, I'm removing religion requirements, most capital switching, most non-specific culture flipping, most government type switching, and most anything else that limits the decision to a certain historical path. With the current system of primary tags and cultures,
#Everything is far too linked with culture for some of this clutter, and I don't want to establish a precedent of making a new, different religion or differnt gov type versions for every tag in the game. If people want a new capital, they can set it themselves, if people want to change culture, unless
#it is a very logical switch, they can do so manually, if people want to reform their gov type and it isn't prevented by the tag's starting type, they can also do that manually.
#I'm also making allow requirements more consistant and stable. General 2 to 3 specific provinces for the main capitals of the tag and 2/3rds of the kingdom's traditional territory, plus 150 dev (50% discount from default 300 to achieve rank 2), and 25 prestige (also 50% discount).
#For empires, I'm typically going for 3 to 5 specific provinces and 3/4ths of the empire's traditional territory, as well as 500 dev (50% discount from default 1000 to achieve rank 3) and 40 prestige (default 75). Note I am making a few exceptions to all these rules on a case by case basis.

#Note this is the file specifically for vanilla decisions which are replaced in BT. New tags and vanilla tags which lack a vanilla decision are instead moved to BtPLNewCountryFormations.txt and a couple really odd or unique new ones are going in BtPLNewCountryFormationsSpecial.txt.

###################################################################################################
################################			Algeria			 ##############################################
###################################################################################################
	algiers_nation = { #MaghrebiCountryFormations.txt
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_algiers_flag }
			NOT = { tag = MOR }
			NOT = { tag = TUN }
			NOT = { tag = TLC }
			NOT = { tag = ALG }
			NOT = { tag = TRP }
			NOT = { tag = OTN }
			OR = {
				primary_culture = tunisian
				AND = {
					OR = {
						culture_group = turko_semitic
						culture_group = berber_group
					}
					OR = {
						capital_scope = { area = hautes_plaines_area }
						capital_scope = { area = ouled_nail_area }
						capital_scope = { area = kabylia_area }
						capital_scope = { area = north_saharan_area }
						capital_scope = { area = west_aures_area }
						capital_scope = { area = constantine_area }
						capital_scope = { area = barbary_coast_area }
					}
				}
			}
			any_owned_province = {
				OR = {
					area = hautes_plaines_area
					area = ouled_nail_area
					area = kabylia_area
					area = north_saharan_area
					area = west_aures_area
					area = constantine_area
					area = barbary_coast_area
				}
			}
		}
		provinces_to_highlight = {
			OR = {
				area = hautes_plaines_area
				area = ouled_nail_area
				area = kabylia_area
				area = north_saharan_area
				area = west_aures_area
				area = constantine_area
				area = barbary_coast_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = ALG }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 338			# Algiers´
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = hautes_plaines_area
					area = ouled_nail_area
					area = kabylia_area
					area = north_saharan_area
					area = west_aures_area
					area = constantine_area
					area = barbary_coast_area
				}
				value = 19			#At least 2/3 of Algeria's 28 provinces
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = ALG
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			north_saharan_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ALG
			}
			hautes_plaines_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ALG
			}
			ouled_nail_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ALG
			}
			kabylia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ALG
			}
			west_aures_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ALG
			}
			constantine_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ALG
			}
			barbary_coast_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ALG
			}
			if = {
				limit = { government = tribal }
				change_government_to_monarchy = yes
				#set_legacy_government = despotic_monarchy
			}
			add_prestige = 25
			swap_ideas = yes
			set_country_flag = formed_algiers_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

###################################################################################################
################################			Andalusia			 ##############################################
###################################################################################################
	andalusian_nation = { #AndalusianNation.txt
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_andalusia_flag }
			NOT = { tag = ADU }
			OR = {
				primary_culture = andalusi_culture
				AND = {
					culture_group = maghrebi
					any_owned_province = { region = iberia_region }
				}
				AND = {
					culture_group = turko_semitic
					any_owned_province = { region = iberia_region }
				}
			}
		}
		provinces_to_highlight = {
			region = iberia_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = ADU }
			is_nomad = no
			is_free_or_tributary_trigger = yes
			is_at_war = no
			#religion_group = muslim
			owns_core_province = 223			# Granada
			owns_core_province = 224			# Andalucia
			owns_core_province = 225			# Cordoba
			owns_core_province = 221			# Murcia
			owns_core_province = 220			# Valencia
			if = {
				limit = {
					NOT = { #Any tags that end up with the Granadan mission tree.
						has_mission = gra_restore_the_andalusian_caliphate
					}
				}
				num_of_owned_provinces_with = {
					is_core = ROOT
					region = iberia_region
					value = 103			#At least 2/3 of Iberia's 153 provinces. This is Portugal plus 72 other provinces, roughly half of non Portuguese Iberia.
				}
			}
			else = { #Taifa tags get discount, because their mission tree will not continue unless they form Andalusia, which entails 40 provinces. Hence, the formation of the tag needs to be done earlier.
				num_of_owned_provinces_with = {
					is_core = ROOT
					region = iberia_region
					value = 40			#All provinces in the three Andalusia areas (27) + Murcia (7) & Valencia (6) areas, which the missions give claims to.
				}
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			hidden_effect = {
				if = {
					limit = { 
						tag = MOR 
						has_dlc = "Golden Century"
					}
					complete_mission = gra_overcome_internal_strife
				}
			}
			hidden_effect = {
				if = {
					limit = { 
						tag = MOR 
						has_dlc = "Golden Century"
					}
					complete_mission = gra_friends_in_high_places
				}
			}
			change_tag = ADU
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					NOT = { #Any tags that end up with the Granadan mission tree.
						has_mission = gra_restore_the_andalusian_caliphate
					}
				}
				iberia_region = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ADU
				}
			}
			else = { #You have the above mission, therefore you have GC as well, hence you potentially have the ability to complete the below missions.
				if = { #Portuguese mission claims
					limit = {
						mission_completed = gra_reconquer_sevilla
						has_dlc = "Golden Century"
					}
					#Claims
					custom_tooltip = adu_conquer_portugal_claims
					hidden_effect = {
						every_province = {
							limit = {
								gc_cas_spa_reconquista_two_provinces = yes
								NOT = { is_core = ROOT }
								NOT = { owned_by = ROOT }
							}
							add_permanent_claim = ROOT
						}
					}
				}
				if = { #Sardinian-Corsican mission claims
					limit = {
						mission_completed = gra_restore_trade_superiority
						has_dlc = "Golden Century"
					}
					#Claims
					custom_tooltip = adu_conquer_med_islands_claims
					hidden_effect = {
						every_province = {
							limit = {
								adu_conquer_med_islands_provinces = yes
								NOT = { is_core = ROOT }
								NOT = { owned_by = ROOT }
							}
							add_permanent_claim = ROOT
						}
					}
				}
				if = { #Tunisian-Moroccan mission claims
					limit = {
						mission_completed = gra_restore_faith_in_the_throne
						has_dlc = "Golden Century"
					}
					#Claims
					custom_tooltip = adu_moroccan_conquest_claims
					hidden_effect = {
						every_province = {
							limit = {
								adu_moroccan_conquest_provinces = yes
								NOT = { is_core = ROOT }
								NOT = { owned_by = ROOT }
							}
							add_permanent_claim = ROOT
						}
					}
					#Claims
					custom_tooltip = adu_own_tunisia_1_claims
					hidden_effect = {
						every_province = {
							limit = {
								adu_own_tunisia_1_provinces = yes
								NOT = { is_core = ROOT }
								NOT = { owned_by = ROOT }
							}
							add_permanent_claim = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					culture_group = turko_semitic
					NOT = { primary_culture = andalusi_culture }
				}
				change_primary_culture = andalusi_culture
			}
			if = {
				limit = { government = tribal }
				change_government_to_monarchy = yes #Desert tribes settling down, theocracies become monarchies.
				#set_legacy_government = despotic_monarchy
			}
			set_country_flag = formed_andalusia_flag
			swap_ideas = yes
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				num_of_owned_provinces_with = {				#Will not form if already owns over half of North Africa's 93 provinces
					value = 47
					region = maghreb_region
				}
			}
			modifier = {
				factor = 0
				NOT = { capital_scope = { region = iberia_region } }			#Capital not in Iberia
			}
		}
		ai_importance = 400 #
	}
	
###################################################################################################
################################			Arabia			 ##############################################
###################################################################################################
	arab_nation = { #ArabNation.txt
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_arabia_flag }
			NOT = { tag = ARB }
			culture_group = turko_semitic
			any_owned_province = { region = arabia_region }
		}
		provinces_to_highlight = {
			region = arabia_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = ARB }
			is_free_or_tributary_trigger = yes
			is_at_war = no
			owns_core_province = 384			#Medina
			owns_core_province = 385			#Mecca
			num_of_owned_provinces_with = {
				is_core = ROOT
				region = arabia_region
				value = 50			#At least 2/3 of Arabia's 74 provinces
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = ARB
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			arabia_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ARB
			}
			if = {
				limit = {
					NOT = { has_idea_group = arabian_ideas }
				}
				swap_ideas = yes
			}
			set_country_flag = formed_arabia_flag
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { capital_scope = { region = arabia_region } }			#Capital not in Iberia
			}
		}
		ai_importance = 400 #
	}

###################################################################################################
################################			Armenia			 ##############################################
###################################################################################################
	armenia_nation = { #ArmeniaNation.txt
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_armenia_flag }
			NOT = { tag = ARM }
			primary_culture = armenian
		}
		provinces_to_highlight = {
			OR = {
				area = armenia_area
				area = north_kurdistan_area
				area = erzurum_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = ARM }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			#religion_group = christian
			owns_core_province = 419			#Yerivan
			owns_core_province = 3254			#Ararat 
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = armenia_area
					area = north_kurdistan_area
					area = erzurum_area
				}
				value = 12			#At least 2/3 of Greater Armenia's 18 provinces (approximate)
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted Note base in Greater Armenia alone is about 168.
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = ARM
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			armenia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ARM
			}
			north_kurdistan_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ARM
			}
			erzurum_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ARM
			}
			if = {
				limit = {
					NOT = { has_idea_group = ARM_ideas }
				}
				swap_ideas = yes
			}
			set_country_flag = formed_armenia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

###################################################################################################
################################			Bavaria			 ##############################################			#Note needs work
###################################################################################################
	bavaria_nation = {
		major = yes
		potential = {
			normal_or_historical_nations = yes
			was_never_end_game_tag_trigger = yes
			was_never_german_regional_tag_trigger = yes
			NOT = { has_country_flag = formed_bavaria_flag }
			OR = {
				ai = no
				is_playing_custom_nation = no
			}
			NOT = { exists = BAV }
			primary_culture = bavarian
		}
		provinces_to_highlight = {
			OR = {
				#other claimants are gone
				AND = {
					ROOT = { NOT = { tag = LBV } }
					LBV = {
						OR = {
							num_of_cities = 5
							NOT = { is_subject_of = ROOT }
						}
					}
					owned_by = LBV
				}
				AND = {
					ROOT = { NOT = { tag = ING } }
					ING = {
						OR = {
							num_of_cities = 5
							NOT = { is_subject_of = ROOT }
						}
					}
					owned_by = ING
				}
				AND = {
					ROOT = { NOT = { tag = UBV } }
					UBV = {
						OR = {
							num_of_cities = 5
							NOT = { is_subject_of = ROOT }
						}
					}
					owned_by = UBV
				}
				#make sure you are not benefitting from others' conquests
				AND = {
					province_id = 65
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				AND = {
					province_id = 64
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				AND = {
					province_id = 2955
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
			}
		}
		allow = {
			is_free_or_tributary_trigger = yes
			is_at_war = no

			if = {
				limit = { NOT = { tag = UBV } }
				OR = {
					NOT = { exists = UBV }
					UBV = {
						NOT = { num_of_cities = 5 }
						is_subject_of = ROOT
					}
				}
			}
			if = {
				limit = { NOT = { tag = LBV } }
				OR = {
					NOT = { exists = LBV }
					LBV = {
						NOT = { num_of_cities = 5 }
						is_subject_of = ROOT
					}
				}
			}
			if = {
				limit = { NOT = { tag = ING } }
				OR = {
					NOT = { exists = ING }
					ING = {
						NOT = { num_of_cities = 5 }
						is_subject_of = ROOT
					}
				}
			}

			owns_or_non_sovereign_subject_of = 65			#Munich
			owns_or_non_sovereign_subject_of = 64			#Landshut
			owns_or_non_sovereign_subject_of = 2955			#Ingolstadt
		}
		effect = {
			change_tag = BAV
			restore_country_name_effect = yes
			if = {
				limit = {
					UBV = { is_subject_of = ROOT }
				}
				inherit = UBV
			}
			if = {
				limit = {
					LBV = { is_subject_of = ROOT }
				}
				inherit = LBV
			}
			if = {
				limit = {
					ING = { is_subject_of = ROOT }
				}
				inherit = ING
			}
			lower_bavaria_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = root
			}
			upper_bavaria_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = root
			}
			east_bavaria_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = root
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			set_capital = 65
			65 = { add_base_tax = 2 }
			set_country_flag = formed_bavaria_flag

			if = {
				limit = {
					NOT = { tag = UBV }
					NOT = { tag = LBV }
					NOT = { tag = ING }
					NOT = { was_tag = UBV }
					NOT = { was_tag = LBV }
					NOT = { was_tag = ING }
				}
				swap_non_generic_missions = yes
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

###################################################################################################
################################		Britain (miltary)			 ##############################################
###################################################################################################
	british_nation = { #BritishNation.txt
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_great_britain_flag }
			NOT = { tag = GBR }
			OR = {
				tag = ENG
				tag = SCO
				AND = {
					culture_group = british
					num_of_cities = 25			#At least 1/2 of Britain's 49 provinces to see, if not ENG or SCO
				}
			}
		}
		provinces_to_highlight = {
			region = british_isles_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = GBR }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 236			#London
			owns_core_province = 241			#Glamorgan
			owns_core_province = 248			#Lothian
			num_of_owned_provinces_with = {
				is_core = ROOT
				region = british_isles_region
				value = 63	#At least 3/4 of Britain's 84 provinces ##OUTDATED##(Note England has 26 in 1444 with 7 more under subjects, so this is rather easy)##END OUTDATED##
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			hidden_effect = {
				complete_mission = eng_rb_war_of_roses
			}
			hidden_effect = {
				if = {
					limit = { tag = SCO }
					complete_mission = eng_mighty_army
					complete_mission = conquer_scotland
				}	
			}
			hidden_effect = {
				if = {
					limit = { tag = IRE }			#sounds moot with BtP formables, but putting in 1.26 update just for the sake of it.
					complete_mission = eng_mighty_army
					complete_mission = conquer_scotland
					complete_mission = conquer_ireland
				}	
			}
			change_tag = GBR
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			british_isles_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = GBR
			}
			add_prestige = 25
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			swap_ideas = yes
			set_country_flag = formed_great_britain_flag
			#Cutting new 1.25 mission related claims. Free permanent and non permanent claims all over the place just for forming one of the easiest tags to form? I don't think so =p
			#Draiocht, you daft? It's so that you get the claims for the missions that unlock from forming Great Britain. >.>
			if = {
				limit = {
					mission_completed = conquer_scotland
					has_dlc = "Rule Britannia"
				}
				give_permaclaims_for_mission = { mission=eng_rb_take_shetland_and_faro_isles }
				iceland_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_claim = ROOT }
					}
					add_claim = ROOT
				}
			}
			if = {
				limit = {
					mission_completed = eng_rb_spice_islands
					has_dlc = "Rule Britannia"
				}
				give_permaclaims_for_mission = { mission=gbr_rb_india_landfall }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}
	
###################################################################################################
################################		Britain (diplomatic)		 ##############################################
###################################################################################################
	british_nation_diplomatically = { #BritishNation.txt
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_great_britain_flag }
			NOT = { tag = GBR }
			OR = {
				tag = ENG
				tag = SCO
				AND = {
					culture_group = british
					num_of_cities = 42			#At least 1/2 of Britain's 84 provinces to see, if not ENG or SCO
				}
			}
		}
		provinces_to_highlight = {
			region = british_isles_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = GBR }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			if = {
				limit = { government = monarchy }
				legitimacy = 100
			}
			adm_tech = 10			#Diplo tech requirement
			owns_or_vassal_of = 236		# London
			owns_or_vassal_of = 242		# Gwynedd
			owns_or_vassal_of = 250		# Fife
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				region = british_isles_region
				is_core = owner
				value = 76			#At least 90 percent of Britain's 84 provinces
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			every_subject_country = {
				limit = {
					ai = yes
					capital_scope = { 
						region = british_isles_region 
						NOT = { province_id = 4365 } #Excluding Mann
					}
					OR = {
						NOT = { num_of_cities = 12 }
						AND = {
							tag = SCO
							NOT = { num_of_cities = 36 } #Has flippin' 27 now.
						}
					}
				}
				ROOT = { inherit = PREV }
			}
			hidden_effect = {
				complete_mission = eng_rb_war_of_roses
			}
			hidden_effect = {
				if = {
					limit = {
						tag = SCO
					}
					complete_mission = eng_mighty_army
					complete_mission = conquer_scotland
					complete_mission = eng_rb_war_of_roses
				}	
			}
			change_tag = GBR
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			british_isles_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = GBR
			}
			add_prestige = 25
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			swap_ideas = yes
			set_country_flag = formed_great_britain_flag
			#Adding mission claims here as well, even though they're mysteriously missing from vanilla.
			if = {
				limit = {
					mission_completed = conquer_scotland
					has_dlc = "Rule Britannia"
				}
				give_permaclaims_for_mission = { mission=eng_rb_take_shetland_and_faro_isles }
				iceland_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_claim = ROOT }
					}
					add_claim = ROOT
				}
			}
			if = {
				limit = {
					mission_completed = eng_rb_spice_islands
					has_dlc = "Rule Britannia"
				}
				give_permaclaims_for_mission = { mission=gbr_rb_india_landfall }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 200
		do_not_integrate = ENG
		do_not_integrate = SCO
		do_not_integrate = WLS
	}
	
###################################################################################################
################################			Croatia			 ##############################################			#Note needs work
###################################################################################################
	croatian_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_croatia_flag_btp }
			NOT = { tag = CRO }
			NOT = { tag = ILY }
			OR = {
				primary_culture = croatian
				primary_culture = dalmatian
			}
		}
		provinces_to_highlight = {
			OR = {
				area = croatia_area #7
				area = east_adriatic_coast_area #8
				area = slavonia_area #6
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = CRO }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 131			# Zagreb
			owns_core_province = 136			# Split. Knin may have been an old capital, but going with Split because major city. Plus point of contention due to Venice
			owns_core_province = 152			# Varazdin. Probably most important city in in-game Slavonia
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = croatia_area #7
					area = east_adriatic_coast_area #8
					area = slavonia_area #6
				}
				value = 14			#At least 2/3 of Croatia's 21 provinces (approximate)
			}
			total_development = 100			#Normal requirement for rank 2 is 500 dev, so this is 80 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = CRO
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			croatia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = CRO
			}
			east_adriatic_coast_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = CRO
			}
			slavonia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = CRO
			}
			if = {
				limit = {
					NOT = { primary_culture = croatian }
					NOT = { accepted_culture = croatian }
				}
				add_accepted_culture = croatian
			}
			if = {
				limit = {
					NOT = { primary_culture = dalmatian }
					NOT = { accepted_culture = dalmatian }
				}
				add_accepted_culture = dalmatian
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					government = republic
				}
				change_government_to_monarchy = yes
				#set_legacy_government = feudal_monarchy
			}
			swap_ideas = yes
			set_country_flag = formed_croatia_flag_btp
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}
	
###################################################################################################
################################			England			 ##############################################
###################################################################################################
	english_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_england_flag }
			NOT = { tag = ENG }
			NOT = { tag = GBR }
			OR = {
				primary_culture = english
				primary_culture = northumbrian
				AND = {
					primary_culture = anglo_irish
					any_owned_province = { region = british_isles_region }
				}
			}
		}
		provinces_to_highlight = {
			region = british_isles_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = ENG }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 236		# London
			owns_core_province = 234		# Wessex
			num_of_owned_provinces_with = {
				is_core = ROOT
				region = british_isles_region
				value = 37			#2/3 of England-Wales' 56 provinces
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted Note base dev in 1444 for southern Britain is around 420.
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = ENG
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			northern_england_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ENG
			}
			east_midlands_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ENG
			}
			east_anglia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ENG
			}
			wessex_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ENG
			}
			home_counties_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ENG
			}
			yorkshire_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ENG
			}
			west_midlands_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ENG
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					NOT = { has_idea_group = ENG_ideas }
				}
				swap_ideas = yes
			}
			set_country_flag = formed_england_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

###################################################################################################
################################			France			 ##############################################
###################################################################################################
	french_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_france_flag }
			NOT = { tag = FRA }
			NOT = { tag = CEL }
			NOT = { tag = SPA }
			OR = {
				culture_group = french
				primary_culture = basque
				primary_culture = breton
			}
		}
		provinces_to_highlight = {
			region = france_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = FRA }
			is_nomad = no
			is_free_or_tributary_trigger = yes
			is_at_war = no
			owns_core_province = 183			# Paris
			owns_core_province = 186			# Rheims, coronation site
			owns_core_province = 203			# Lyon
			owns_core_province = 4389			# Tours
			num_of_owned_provinces_with = {
				is_core = ROOT
				region = france_region
				value = 111			#At least 2/3 of France's 166 provinces
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = FRA
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			france_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
					NOT = { area = brittany_area }
					NOT = { area = lower_brittany_area }
				}
				add_permanent_claim = FRA
			}
			brittany_area = {
				limit = {
					NOT = { is_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_claim = FRA
			}
			lower_brittany_area = {
				limit = {
					NOT = { is_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_claim = FRA
			}
			if = {
				limit = {
					NOT = { has_idea_group = FRA_ideas }
				}
				swap_ideas = yes
			}
			set_country_flag = formed_france_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

###################################################################################################
################################			Franconia			 ##############################################			#Note needs work
###################################################################################################
	franconia_nation = {
		major = yes
		potential = {
			normal_or_historical_nations = yes
			was_never_end_game_tag_trigger = yes
			was_never_german_regional_tag_trigger = yes
			NOT = { has_country_flag = formed_franconia_flag }
			OR = {
				ai = no
				is_playing_custom_nation = no
			}
			NOT = { exists = FKN }
			is_colonial_nation = no
			OR = {
				is_former_colonial_nation = no
				AND = {
					is_former_colonial_nation = yes
					ai = no
				}
			}
			primary_culture = franconian
		}
		provinces_to_highlight = {
			OR = {
				province_id = 79
				AND = {
					NOT = { ROOT = { owns_core_province = 71 } }
					province_id = 67
				}
				AND = {
					NOT = { ROOT = { owns_core_province = 67 } }
					province_id = 71
				}
				AND = {
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 6
								culture = franconian
								continent = europe
								is_core = root
							}
						}
						owns_core_province = 79
						OR = {
							owns_core_province = 71
							owns_core_province = 67
						}
					}
					culture = franconian
				}
				AND = {
					owned_by = WBG
					ROOT = {
						NOT = { tag = WBG }
						owns_core_province = 79
						OR = {
							owns_core_province = 71
							owns_core_province = 67
						}
					}
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}

		allow = {
			is_free_or_tributary_trigger = yes
			is_at_war = no
#			adm_tech = 10
			OR = { #Wurzburg was the theoretical holder of the title
				tag = WBG
				NOT = { exists = WBG }
			}
			owns_core_province = 79			#Wurzburg
			OR = {
				owns_core_province = 71			#Ansbach
				owns_core_province = 67			#Nurnberg
			}
			num_of_owned_provinces_with = {
				value = 6
				culture = franconian
				continent = europe
				is_core = root
			}
			OR = { #just to make it not so easy (owning 6 provinces is really not so hard; Franconia is 70 development at start, so this is that +5)
				total_development = 150 #BT Dev Doubling
				is_elector = yes
			}
		}
		effect = {
			change_tag = FKN
			restore_country_name_effect = yes
			franconia_area = {
				limit = {
					NOT = { owned_by = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			upper_franconia_area = {
				limit = {
					NOT = { owned_by = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			set_country_flag = formed_franconia_flag

			if = {
				limit = {
					total_development = 200
					OR = {
						is_elector = yes
						is_part_of_hre = no
					}
				}
				set_government_rank = 2
			}

			swap_non_generic_missions = yes
			
			if = {
				limit = {
					is_playing_custom_nation = no
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

###################################################################################################
################################			Greece			 ##############################################
###################################################################################################
	greek_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_greece_flag }
			NOT = { tag = GRE }
			NOT = { tag = BYZ }
			NOT = { tag = TUR }
			primary_culture = greek
		}
		provinces_to_highlight = {
			bt_trigger_modern_greece_areas = yes
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = GRE }
			is_nomad = no
			is_free_or_tributary_trigger = yes
			is_at_war = no
			owns_core_province = 145
			owns_core_province = 146
			owns_core_province = 1773
			owns_core_province = 3175
			num_of_owned_provinces_with = {
				is_core = ROOT
				bt_trigger_modern_greece_areas = yes
				value = 23			#At least 40 percent of Greece's 56 provinces, per historical Kingdom of Greece borders
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = GRE
			#swap_non_generic_missions = yes #Greece no missions yet has.
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			hidden_effect = {
				balkan_region = {
					limit = {
						bt_trigger_historical_greece_areas = yes
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = GRE
				}
			}
			hidden_effect = {
				balkan_region = {
					limit = {
						bt_trigger_modern_greece_areas = yes
						NOT = { is_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_claim = GRE
				}
			}
			if = {
				limit = {
					NOT = { has_idea_group = greek_ideas } 
				}
				swap_ideas = yes
			}
			set_country_flag = formed_greece_flag
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				government = republic
			}
		}
		ai_importance = 400 #
	}

###################################################################################################
################################			Haiti			 ##############################################
###################################################################################################
	haiti_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = changed_from_colonial_nation }
			is_nomad = no
			is_random_new_world = no
			NOT = { tag = HLR }
			NOT = { tag = PAP }
			OR = {
				is_former_colonial_nation = yes
				is_colonial_nation = yes
				AND = {
					NOT = {
						OR = {
							technology_group = north_american
							technology_group = mesoamerican
							technology_group = andean
							technology_group = high_american
							technology_group = south_american
						}
					}
					capital_scope = {
						colonial_region = colonial_the_carribean
						is_core = ROOT
					}
				}
			}
			colonial_hispaniola = { owned_by = ROOT }
			OR = {
				ai = no
				AND = {
					ai = yes
					num_of_cities = 3	
				}
			}
		}
		provinces_to_highlight = {
			colonial_region = colonial_hispaniola
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
				is_city = no
			}
		}
		allow = {
			NOT = { exists = HAT }
			is_free_or_tributary_trigger = yes
			is_at_war = no
			capital_scope = {
				colonial_region = colonial_hispaniola
				is_core = ROOT
			}
		}
		effect = {
			change_tag = HAT
			remove_non_electors_emperors_from_empire_effect = yes
			colonial_hispaniola = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = HAT
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 3650
			}
			add_prestige = 10
			if = {
				limit = {
					NOT = {
						OR = {
							technology_group = north_american
							technology_group = mesoamerican
							technology_group = andean
							technology_group = high_american
							technology_group = south_american
						}
					}
				}
				set_country_flag = changed_from_colonial_nation
			}
		}
		ai_will_do = {
			factor = 1
		}
	}

###################################################################################################
################################			Hannover			 ##############################################
###################################################################################################
	hannoverian_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			was_never_german_regional_tag_trigger = yes
			NOT = { has_country_flag = formed_hannover_flag }
			NOT = { tag = HAN }
			NOT = { tag = GER }
			NOT = { tag = PRU }
			NOT = { tag = HSA }
			NOT = { tag = SAX } #Saxe-Lauenburg should form either Saxony or Hannover, not both
			NOT = { exists = HAN }
			primary_culture = lower_saxon #Westphalian
		}
		provinces_to_highlight = {
			OR = {
				province_id = 53	# Luneburg
				province_id = 1758	# Hannover
				AND = {
					culture = lower_saxon
					region = north_german_region
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 8 #out of 13 i.e. you can leave out Holstein or the FCs
								culture = lower_saxon
								region = north_german_region
								is_core = root
							}
						}
						owns_core_province = 53
						owns_core_province = 1758
					}
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 53	# Luneburg
			owns_core_province = 1758	# Hannover
			num_of_owned_provinces_with = {
				value = 8 #out of 13 i.e. you can leave out Holstein and stuff
				culture = lower_saxon
				region = north_german_region
				is_core = root
			}
			total_development = 200 #BT Dev Doubling
		}
		effect = {
			1758 = {
				move_capital_effect = yes
			}
			change_tag = HAN
			restore_country_name_effect = yes
			1758 = { 
				add_base_tax = 1 
				add_base_production = 1 
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 3650
			}
			add_prestige = 10
			braunschweig_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = HAN
			}
			weser_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = HAN
			}
			if = {
				limit = {
					NOT = { government_rank = 2 }
					OR = {
						is_elector = yes
						is_part_of_hre = no
					}
				}
				set_government_rank = 2
			}
			swap_non_generic_missions = yes
			swap_ideas = yes
			set_country_flag = formed_hannover_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

###################################################################################################
################################			Iceland			 ##############################################
###################################################################################################
	icelandic_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_iceland }
			NOT = { tag = ICE }
			NOT = { tag = SCA }
			NOT = { tag = NOR }
			NOT = { tag = DAN }
			NOT = { tag = SWE }
			OR = {
				primary_culture = icelandic
				AND = {
					culture_group = scandinavian
					any_owned_province = { area = iceland_area }
				}
			}
			NOT = { num_of_cities = 40 }			#I was tired of looking at this =p
		}
		provinces_to_highlight = {
			area = iceland_area
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = ICE }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			num_of_owned_provinces_with = {
				is_core = ROOT
				area = iceland_area
				value = 3			#3 of Iceland's 4 provinces
			}
		}
		effect = {
			hidden_effect = {
				every_province = {
					limit = {
						is_core = ROOT
						NOT = { owned_by = ROOT }
					}
					remove_core = ROOT
					if = {
						limit = { ROOT = { tag = NOR } }
						set_province_flag = norwegian_core
					}
					if = {
						limit = { ROOT = { tag = DAN } }
						set_province_flag = danish_core
					}
					if = {
						limit = { ROOT = { tag = SWE } }
						set_province_flag = swedish_core
					}					
				}
			}
			change_tag = ICE
			remove_non_electors_emperors_from_empire_effect = yes
			hidden_effect = {
				every_province = {
					if = {
						limit = {
							has_province_flag = norwegian_core
						}
						add_core = NOR
						clr_province_flag = norwegian_core					
					}
					if = {
						limit = {
							has_province_flag = danish_core
						}
						add_core = DAN
						clr_province_flag = danish_core					
					}
					if = {
						limit = {
							has_province_flag = swedish_core
						}
						add_core = SWE
						clr_province_flag = swedish_core					
					}					
				}
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 3650
			}
			add_prestige = 10
			swap_ideas = yes
			set_country_flag = formed_iceland
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				capital_scope = { NOT = { area = iceland_area } }
			}
		}
		ai_importance = 400 #
	}
	
###################################################################################################
################################			Ireland			 ##############################################
###################################################################################################
	irish_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_ireland_flag }
			NOT = { tag = IRE }
			NOT = { tag = SCO }
			NOT = { tag = ANI }
			NOT = { tag = TNA }
			OR = {
				primary_culture = irish
				AND = {
					culture_group = gaelic
					any_owned_province = { region = ireland_area }
				}
			}
			OR = {
				tag = LEI
				tag = ULS
				tag = MNS
				tag = CNN
				num_of_owned_provinces_with = {
					is_core = ROOT
					region = ireland_area
					value = 16			#over half of Ireland to see if not one of the four primary provincial kingdoms Mun 9 Lei 7 Con 6 Uls 8
				}
			}
			#NOT = { has_reform = irish_clann_reform }			#Clans and Lordships need to create provincial kingdom
			#NOT = { has_reform = norman_lordship_reform }			#Clans and Lordships need to create provincial kingdom
		}
		provinces_to_highlight = {
			region = ireland_area
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = IRE }
			hidden_trigger = { NOT = { exists = ANI } }			#Hidden because it shows up in UI as doubled Ireland
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 4120			# Kildare, stand in for Tara
			num_of_owned_provinces_with = {
				is_core = ROOT
				region = ireland_area
				value = 20			#requires roughly two thirds of Ireland to form, so ANI can be formed without the west or IRE can be formed without the Pale and the NE plantations
			}
			total_development = 150			#Normal requirement for rank 2 is 500 dev, so this is 70 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = IRE
			if = {
				limit = { has_dlc = "Dharma" }
				remove_government_reform = irish_clann_reform
				add_government_reform = tanistry_reform
			}
			if = {
				limit = { NOT = { has_dlc = "Dharma" } }
				set_legacy_government = high_kingship_legacy
			}
			remove_non_electors_emperors_from_empire_effect = yes
			hidden_effect = { country_event = { id = BeyondTypusCelticFlavour.1 days = 1 } }			#Fires new BT Tanistry succession
			custom_tooltip = tooltip_bt_starts_tanistry_succession
			ireland_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = IRE
			}
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			if = {
				limit = {
					exists = ENG
					NOT = { historical_friend_with = ENG }
					NOT = { historical_rival_with = ENG }
					NOT = { has_opinion = { who = ENG value = 0 } }
				}
				add_historical_rival = ENG
			}			#Add England as a historical rival if relations are negative (and not already rivals or friends)
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			#I decided to remove the development bonus from forming altogether. With the ability to build up provinces already there, this isn't really needed and can get out of hand quickly. Plus capital should move to Dublin anyway.
			add_prestige = 25
			if = {
				limit = {
					NOT = { has_idea_group = irish_ideas }
				}
				swap_ideas = yes
			}
			swap_non_generic_missions = yes
			set_country_flag = formed_ireland_flag
		}
		ai_will_do = {
			factor = 1
		}
	}

###################################################################################################
################################			Italy			 ##############################################
###################################################################################################
	italian_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_italy_flag }
			NOT = { tag = ITL }
			NOT = { tag = ITA }
			culture_group = latin
		}
		provinces_to_highlight = {
			region = italy_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = ITA }
			hidden_trigger  = { NOT = { exists = ITA } }
			is_nomad = no
			is_free_or_tributary_trigger = yes
			is_at_war = no
			owns_core_province = 104	# Milan
			owns_core_province = 116	# Florence
			owns_core_province = 112	# Venice
			owns_core_province = 101	# Genoa
			owns_core_province = 109	# Mantova
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				region = italy_region
				is_core = owner
				value = 106			#At least 65 percent of N Italy's 163 provinces. Also note this is 90 percent of continental, non-Neapolitan Italy's 118 provinces. (Italy has 34 in Naples-Sicily and 11 in Sardinia-Corsica)
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = ITA
			remove_non_electors_emperors_from_empire_effect = yes
			swap_non_generic_missions = yes #Moved down so that it removes HRE missions properly.
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			hidden_effect = {
				italy_region = {
					limit = {
						bt_trigger_italy_areas = yes
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
						NOT = { owned_by = PAP }
					}
					add_permanent_claim = ITA
				}
			}
			hidden_effect = {
				italy_region = {
					limit = {
						OR = {
							bt_trigger_central_italy_areas = yes
							bt_trigger_sicily_areas = yes
							area = corsica_sardinia_area
							area = sardinia_area
							area = cagliari_area
						}
						NOT = { is_claim = ROOT }
						NOT = { is_core = ROOT }
						NOT = { owned_by = PAP }
					}
					add_claim = ITA
				}
			}
			swap_ideas = yes
			swap_non_generic_missions = yes
			set_country_flag = formed_italy_flag
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				government = republic
			}
		}
		ai_importance = 400 #
	}

###################################################################################################
################################			Jerusalem			 ##############################################			#Not actually done, other than to prevent end-game tags from forming it
###################################################################################################
	kingdom_of_jerusalem = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_jerusalem }
			NOT = { exists = KOJ }
			normal_or_historical_nations = yes
			OR = {
				ai = no
				is_playing_custom_nation = no
			}
			religion = catholic
			NOT = { government = republic }
			NOT = { has_reform = celestial_empire }
			OR = {
				owns = 379
				AND = {
					ai = no
					tag = KNI
				}
				AND = {
					ai = no
					tag = CYP
				}
				AND = {
					ai = no
					tag = PRO
				}
			}
			OR = {
				current_age = age_of_discovery
				current_age = age_of_reformation
			}
		}
		provinces_to_highlight = {
			OR = {
				province_id = 364 #Gazzah
				province_id = 379 #Jerusalem
				province_id = 1854 #Jaffa
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			owns_core_province = 364 #Gazzah
			owns_core_province = 379 #Jerusalem
			owns_core_province = 1854 #Jaffa
			379 = {
				is_state = yes
			}
			if = {
				limit = {
					OR = {
						tag = KNI
						tag = CYP
						tag = PRO
						has_mission = EMP_crusader_antioch
					}
					was_never_end_game_tag_trigger = yes
				}
				is_emperor = no
			}
		}
		effect = {
			add_prestige = 25
			every_province = {
				limit = {
					OR = {
						area = trans_jordan_area
						area = palestine_area
						province_id = 378 #County of Tripoli
						province_id = 1855 #Sayda
						province_id = 4268 #Aqaba
					}
				}
				add_core = KOJ
			}
			if = {
				limit = {
					OR = {
						AND = {
							NOT = { tag = KNI }
							NOT = { tag = CYP }
							NOT = { tag = PRO }
							NOT = { has_mission = EMP_crusader_antioch }
							NOT = { capital_scope = { region = arabia_region } }
							NOT = { capital_scope = { region = egypt_region } }
						}
						was_never_end_game_tag_trigger = no
					}
				}
				release = KOJ
				KOJ = { change_primary_culture = ROOT }
			}
			if = {
				limit = {
					OR = {
						tag = KNI
						tag = CYP
						tag = PRO
						has_mission = EMP_crusader_antioch
						capital_scope = { region = arabia_region }
						capital_scope = { region = egypt_region }
					}
					was_never_end_game_tag_trigger = yes
				}
				if = {
					limit = {
						is_part_of_hre = yes
					}
					set_in_empire = no
				}
				change_tag = KOJ
				swap_ideas = yes
			}
			if = {
				limit = { tag = KNI }
				set_country_flag = knights_formed_jerusalem
			}
			KOJ = {
				set_capital = 379 #Jerusalem
				change_religion = catholic
				if = {
					limit = {
						NOT = { government = theocracy }
					}
					change_government_to_monarchy = yes
					add_government_reform = holy_state_reform
					#set_legacy_government = holy_state_legacy
				}
				else_if = {
					limit = {
						government = theocracy
					}
					add_government_reform = holy_state_reform
					#set_legacy_government = holy_state_theocracy
				}
				if = {
					limit = {
						NOT = { government_rank = 2 }
					}
					set_government_rank = 2
				}
				swap_non_generic_missions = yes
				set_country_flag = formed_jerusalem
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
###################################################################################################
################################			Morocco			 ##############################################
###################################################################################################
	moroccan_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_morocco_flag }
			NOT = { tag = MOR }
			NOT = { tag = TUN }
			NOT = { tag = TLC }
			NOT = { tag = ALG }
			NOT = { tag = ADU }
			NOT = { tag = TRP }
			NOT = { tag = OTN }
			OR = {
				primary_culture = moroccan
				AND = {
					OR = {
						culture_group = turko_semitic
						culture_group = berber_group
					}
					capital_scope = {
						OR = {
							area = northern_morocco_area
							area = western_morocco_area
							area = southern_morocco_area
							area = marrekesh_area
							area = sus_area
							area = tafilalt_area
							area = tagmudant_area
						}
					}
				}
			}
		}
		provinces_to_highlight = {
			OR = {
				area = northern_morocco_area
				area = western_morocco_area
				area = southern_morocco_area
				area = marrekesh_area
				area = sus_area
				area = tafilalt_area
				area = tagmudant_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = MOR }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 343 #Fez
			owns_core_province = 344 #Marrekech
			owns_core_province = 2467 #Meknes
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = northern_morocco_area
					area = western_morocco_area
					area = southern_morocco_area
					area = marrekesh_area
					area = sus_area
					area = tafilalt_area
					area = tagmudant_area
				}
				value = 19			#At least 2/3 of Morocco's 28 provinces
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = MOR
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			tafilalt_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = MOR
			}
			sus_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = MOR
			}
			marrekesh_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = MOR
			}
			southern_morocco_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = MOR
			}
			northern_morocco_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = MOR
			}
			western_morocco_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = MOR
			}
			tagmudant_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = MOR
			}
			add_prestige = 25
			if = {
				limit = { government = tribal }
				change_government_to_monarchy = yes #Desert tribes settling down, theocracies become monarchies.
				#set_legacy_government = despotic_monarchy
			}
			swap_ideas = yes
			set_country_flag = formed_morocco_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

###################################################################################################
################################			Netherlands			 ##############################################			#Note needs work
###################################################################################################
	netherlands_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_netherlands_flag }
			NOT = { tag = NED }
			NOT = { tag = BEL }
			OR = {
				primary_culture = dutch
				primary_culture = flemish
				primary_culture = frisian
				tag = BUR
			}
		}
		provinces_to_highlight = {
			OR = {
				province_id = 95 # Breda
				province_id = 97 # Amsterdam
				province_id = 98 # Utrecht
				province_id = 99 # Gelre
				province_id = 4383 # Den Haag
				AND = {
					region = low_countries_region
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 10
								region = low_countries_region
								is_core = root
							}
						}
						owns_core_province = 95
						owns_core_province = 97
						owns_core_province = 98
						owns_core_province = 99
						owns_core_province = 4383
					}
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = NED }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 95 # Breda
			owns_core_province = 97 # Amsterdam
			owns_core_province = 98 # Utrecht
			owns_core_province = 99 # Gelre
			owns_core_province = 4383 # Den Haag
			num_of_owned_provinces_with = {
				value = 10
				region = low_countries_region
				is_core = root
			}
			if = {
				limit = {
					tag = BUR
				}
				NOT = { has_disaster = dutch_revolt_disaster }
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
	  		if = {
	  			limit = { tag = BUR }
	  			change_primary_culture = dutch
			}
			if = {
				limit = {
					tag = BUR
					exists = FRA
				}
	  			france_region = {
					limit = { owned_by = BUR }
	  				remove_core = BUR
	  				add_core = FRA
	  				cede_province = FRA
	  			}
	  		}
			if = {
				limit = {
					tag = BUR
					exists = FRA
					BUR = { any_subject_country = { france_region = { owned_by = PREV } } }
				}
				every_subject_country = {
					limit = { france_region = { owned_by = PREV } }
					france_region = {
						limit = { owned_by = PREV }
						remove_core = BUR
						remove_core = PREV
						add_core = FRA
						cede_province = FRA
					}
				}
	  		}
			change_tag = NED
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			low_countries_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = NED
			}
			picardy_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = NED
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					NOT = { has_idea_group = NED_ideas }
				}
				swap_ideas = yes
			}
			set_country_flag = formed_netherlands_flag
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				tag = BUR
			}
		}
		ai_importance = 400
	}

###################################################################################################
################################			Poland			 ##############################################
###################################################################################################
	polish_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_poland_flag }
			NOT = { tag = PLC }
			NOT = { tag = POL }
			NOT = { tag = GMV  }
			NOT = { tag = TUS } #Tuscany...?
			NOT = { tag = EMR } #Emilia-Romagna?!
			NOT = { tag = LMV } #FUCKING LOMBARDY-VENETIA?! Draiocht, stop smoking, please.
			OR = {
				primary_culture = polish
				#primary_culture = pommeranian
				primary_culture = schlesian
				tag = DNZ
			}
		}
		provinces_to_highlight = {
			region = poland_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = POL }
			is_nomad = no
			is_free_or_tributary_trigger = yes
			is_at_war = no
			owns_core_province = 262	# Krakow
			owns_core_province = 257	# Warszawa
			owns_core_province = 260	# Lublin
			num_of_owned_provinces_with = {
				is_core = ROOT
				region = poland_region
				#Note that the below value claims it's Greece's. Not sure if this makes any sense, might just be Draiocht fucking up.
				value = 24			#At least 67 percent of Greece's 36 provinces, per historical Kingdom of Greece borders
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = POL
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			poland_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = POL
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			swap_ideas = yes
			set_country_flag = formed_poland_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

###################################################################################################
################################			Pomerania			 ##############################################			#Done by JP 2019-4 & adjusted a bit by Draiocht
###################################################################################################
	pomerania_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			bt_hre_stem_duchy_check = yes			#prevents lateral progression. Must not be or have been a stem duchy already
			NOT = { has_country_flag = bt_formed_stem_duchy } 			#prevents lateral progression. All Stem Duchies should give this and check for this.
			NOT = { has_country_flag = formed_pomerania_flag_btp } 
			NOT = { num_of_cities = 30 }	#With more than 30 cities, tag should be aiming to form Prussia or Germany
			OR = {
				#Tags which we want to see the decision by default
				tag = WOL
				tag = STE
				tag = STP
				tag = KMI
				tag = RUG
				AND = {
					capital_scope = {
						OR = {
							area = vorpommern_area
							area = hinter_pommern_area
						}
					}
					OR = {
						culture_group = germanic
						primary_culture = polabian_culture
						primary_culture = kashubian_culture
					}
					NOT = { government_rank = 2 }
				}	#Some contingencies for odd situations. So long as the tag is a reasonable culture, it isn't too large, and has a capital in Pomerania, then why not? Note the num of city check should ensure no quirks with giant tags switching who shouldn't
			}
		}
		provinces_to_highlight = {
			OR = { 
				area = vorpommern_area
				area = hinter_pommern_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = POM } 
			is_at_war = no 
			is_free_or_tributary_trigger = yes 
			is_nomad = no 
			OR = {
				custom_trigger_tooltip = {
					tooltip = bt_sole_pomeranian_duchy_tooltip
					OR = {
						AND = {
							tag = WOL
							NOT = { exists = STE }
							NOT = { exists = STP }
							NOT = { exists = RUG }
						}
						AND = {
							tag = STE
							NOT = { exists = WOL }
							NOT = { exists = STP }
							NOT = { exists = RUG }
						}
						AND = {
							tag = STP
							NOT = { exists = WOL }
							NOT = { exists = STE }
							NOT = { exists = RUG }
						}
						AND = {
							tag = RUG
							NOT = { exists = STP }
							NOT = { exists = WOL }
							NOT = { exists = STE }
						}
					}
				}
				AND  = {
					custom_trigger_tooltip = {
						tooltip = bt_no_other_surviving_pomeranian_minors
						NOT = { exists = WOL }
						NOT = { exists = STE }
						NOT = { exists = STP }
						NOT = { exists = RUG }
					}
					num_of_owned_provinces_with = {
						is_core = ROOT
						OR = {
							area = vorpommern_area
							area = hinter_pommern_area
						}
						value = 10			#At least 2/3 of Pomerania's 15 provinces
					}
					owns_core_province = 1858			#Stettin
					owns_core_province = 2994			#Griefswald
					owns_core_province = 2995			#Stolp
				}
			}
		}
		effect = {
			change_tag = POM
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 5
			vorpommern_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = POM
			}
			hinter_pommern_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = POM
			}
			custom_tooltip = bt_reunifies_duchy_of_pomerania
			hidden_effect = {
				every_province = {
					limit = {
						continent = europe
						is_core = WOL
					}
					remove_core = WOL
					add_core = POM
				}
				every_province = {
					limit = {
						continent = europe
						is_core = STE
					}
					remove_core = STE
					add_core = POM
				}
				every_province = {
					limit = {
						continent = europe
						is_core = STP
					}
					remove_core = STP
					add_core = POM
				}
				every_province = {
					limit = {
						continent = europe
						is_core = RUG
					}
					remove_core = RUG
					add_core = POM
				}
			}
			set_country_flag = formed_pomerania_flag_btp
			set_country_flag = bt_formed_stem_duchy
			if = {
				limit = { NOT = { has_idea_group = POM_ideas } }
				swap_ideas = yes
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}


###################################################################################################
################################			Prussia (Kingdom, id est, BRA)			 ##############################################			#So.... about 3 more lines of code could merge these 3 decisions, whats up with that?
###################################################################################################
	form_kingdom_of_prussia = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_prussia_flag }
			NOT = { tag = PRU }
			NOT = { tag = GER }
			tag = BRA
		}
		provinces_to_highlight = {
			OR = {
				province_id = 41	# Königsberg
				AND = {
					province_id = 43	# Danzig
					ROOT = { NOT = { owns_core_province = 2995 } }
				}
				AND = {
					province_id = 2995
					ROOT = { NOT = { owns_core_province = 43 } }
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = PRU }
			is_nomad = no
			is_free_or_tributary_trigger = yes
			is_at_war = no
			owns_core_province = 41			# Königsberg
			OR = {
				owns_core_province = 43		# Danzig
				owns_core_province = 2995	# Stolp
			}
			total_development = 150			#Normal requirement for rank 2 is 500 dev, so this is 70 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = PRU
			restore_country_name_effect = yes
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if =  {
				limit = {
					NOT = {
						government = republic
					}
				}
				change_government_to_monarchy = yes
				add_government_reform = prussian_monarchy
			}
			else = {
				add_government_reform = prussian_republic_reform
			}
			if = {
				limit = {
					has_reform = states_general_reform
				}
				remove_government_reform = states_general_reform
			}
			if = {
				limit = {
					OR = {
						NOT = { has_dlc = "Emperor" }
						NOT = { hre_size = 1 }
					}
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			change_primary_culture = prussian
			PRU = {
				random_owned_province = {
					limit = { 
						OR = {
							culture = saxon
							culture = pommeranian
						}
					} 
					change_culture = prussian
				}
			}				#The special thing about this decision, apparently. Monastic TEU gets relation change instead with neighbours
			west_prussia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = PRU
			}
			east_prussia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = PRU
			}
			masuria_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = PRU
			}
			nadruvia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = PRU
			}
			if = {
				limit = {
					NOT = { has_idea_group = PRU_ideas }
				}
				swap_ideas = yes
			}
			set_country_flag = formed_prussia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

###################################################################################################
################################			Prussia (id est, TEU)			 ##############################################			#So.... about 3 more lines of code could merge these 3 decisions, whats up with that?
###################################################################################################
	prussian_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_prussia_flag }
			NOT = { tag = PRU }
			NOT = { tag = GER }
			tag = TEU
			has_reform = monastic_order_reform
		}
		provinces_to_highlight = {
			OR = {
				province_id = 41	# Königsberg
				AND = {
					province_id = 43	# Danzig
					ROOT = { NOT = { owns_core_province = 2995 } }
				}
				AND = {
					province_id = 2995
					ROOT = { NOT = { owns_core_province = 43 } }
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = PRU }
			is_nomad = no
			is_free_or_tributary_trigger = yes
			is_at_war = no
			owns_core_province = 41			# Königsberg
			OR = {
				owns_core_province = 43		# Danzig
				owns_core_province = 2995	# Stolp
			}
			total_development = 150			#Normal requirement for rank 2 is 500 dev, so this is 70 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			41 = {
				move_capital_effect = yes
			}
			change_tag = PRU
			restore_country_name_effect = yes
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			change_government = monarchy
			add_government_reform = prussian_monarchy
			if = {
				limit = {
					has_reform = states_general_reform
				}
				remove_government_reform = states_general_reform
			}
			# if = {
				# limit = { NOT = { government_rank = 2 } }
				# set_government_rank = 2
			# }
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			change_primary_culture = prussian
			every_neighbor_country = {
				limit = { government = monarchy }
				add_opinion = { who = ROOT modifier = secularized_monastic_order }
			}				#The special thing about this decision, apparently, instead of auto culture-flip
			west_prussia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = PRU
			}
			east_prussia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = PRU
			}
			masuria_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = PRU
			}
			nadruvia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = PRU
			}
			if = {
				limit = {
					NOT = { has_idea_group = PRU_ideas }
				}
				swap_ideas = yes
			}
			set_country_flag = formed_prussia_flag
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { is_year = 1525 }
			}
		}
		ai_importance = 400 #
	}

###################################################################################################
################################			Prussia (general, id est, Non BRA, non monastic TEU)			 ##############################################			#So.... about 3 more lines of code could merge these 3 decisions, whats up with that?
###################################################################################################
	prussian_nation_general = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_prussia_flag }
			NOT = { tag = PRU }
			NOT = { tag = GER }
			NOT = { tag = HLR }
			OR = {
				primary_culture = pommeranian
				primary_culture = saxon
				primary_culture = prussian
			}
			NOT = { tag = BRA }
			OR = {
				AND = {
					tag = TEU
					NOT = { has_reform = monastic_order_reform }
				}
				NOT = { tag = TEU }
			}
			owns_core_province = 41			# Königsberg
			num_of_cities = 12			#If not one of the normal candidates, needs 12 provinces plus Koenigsberg to see
		}
		provinces_to_highlight = {
			OR = {
				province_id = 41	# Königsberg
				province_id = 43	# Danzig
				province_id = 2995	# Stolp
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = PRU }
			is_nomad = no
			is_free_or_tributary_trigger = yes
			is_at_war = no
			OR = { #Re-adding this religion thingy for this one specifically.
				religion = reformed
				religion = protestant
			}
			owns_core_province = 41			# Königsberg
			owns_core_province = 43		# Danzig
			owns_core_province = 2995	# Stolp
			total_development = 150			#Normal requirement for rank 2 is 500 dev, so this is 70 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = PRU
			restore_country_name_effect = yes
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = {
					OR = {
						NOT = { has_dlc = "Emperor" }
						NOT = { hre_size = 1 }
					}
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			if =  {
				limit = {
					NOT = {
						government = republic
					}
				}
				change_government_to_monarchy = yes
				add_government_reform = prussian_monarchy
			}
			else = {
				add_government_reform = prussian_republic_reform
			}
			if = {
				limit = {
					has_reform = states_general_reform
				}
				remove_government_reform = states_general_reform
			}
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 3650
			}
			add_prestige = 25
			change_primary_culture = prussian
			capital_scope = {
				change_culture = prussian
			}
			random_owned_province = {
				limit = { 
					OR = {
						culture = saxon
						culture = pommeranian
					}
				} 
				change_culture = prussian
			}
			west_prussia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = PRU
			}
			east_prussia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = PRU
			}
			masuria_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = PRU
			}
			nadruvia_area = { #Moldavia
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = PRU
			}
			if = {
				limit = {
					NOT = { has_idea_group = PRU_ideas }
				}
				swap_ideas = yes
			}
			set_country_flag = formed_prussia_flag
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { is_year = 1525 }
			}
		}
		ai_importance = 400 #
	}

###################################################################################################
################################			Romania			 ##############################################			#Note needs work
###################################################################################################
	romanian_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_romania_flag }
			NOT = { tag = RMN }
			NOT = { exists = ROM }
			primary_culture = romanian
		}
		provinces_to_highlight = {
			culture = romanian
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = RMN }
			NOT = { exists = BYZ }
			is_nomad = no
			is_free_or_tributary_trigger = yes
			is_at_war = no
			OR = {
				AND = {
					owns_core_province = 161			# Tirgoviste
					owns_core_province = 268			# Iasi
				}
				AND = {
					owns_core_province = 161			# Tirgoviste
					owns_core_province = 4128			# Brasov
				}
				AND = {
					owns_core_province = 268			# Iasi
					owns_core_province = 4128			# Brasov
				}
			}
			num_of_owned_provinces_with = {
				is_core = ROOT
				culture = romanian
				value = 23			#Following Vladisvlach's 23 of 46 provinces with Romanian culture for now. This by culture system is great but could cause oddities late-game with culture conversion, so eventually I might tweak the system a bit.
			} #Wallachia 15, Moldavia 14, Transylvania 10, extra Hungary 6, Dobruja 1.
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = RMN
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			swap_non_generic_missions = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			wallachia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = RMN
			}
			oltenia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = RMN
			}
			upper_muntenia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = RMN
			}
			moldavia_area = { #Bessarabia
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = RMN
			}
			bukovina_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = RMN
			}
			western_moldovia = { #Moldavia
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = RMN
			}
			transylvania_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = RMN
			}
			southern_transylvania_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = RMN
			}
			swap_ideas = yes
			set_country_flag = formed_romania_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

###################################################################################################
################################			SardiniaPiedmont (normal)			 ##############################################			#Note needs work
###################################################################################################
	sardinia_piedmont_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_sardinia_piedmont_flag }
			NOT = { tag = SPI }
			NOT = { tag = ITL }
			NOT = { tag = ITA }
			NOT = { tag = TUS }
			NOT = { tag = EMR }
			NOT = { tag = LMV }
			OR = {
				tag = SAV
				tag = SAR
				tag = PIE
				primary_culture = piedmontese
				primary_culture = sardinian
			}
		}
		provinces_to_highlight = {
			OR = {
				area = north_piedmont_area #North Piedmont
				area = piedmont_area #Central Piedmont
				area = south_piedmont_area #South Piedmont
				area = savoy_dauphine_area #Savoy
				area = sardinia_area #Sardinia
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = SPI }
			OR = {
				NOT = { exists = SAV }
				NOT = { exists = PIE }
				NOT = { exists = SAR }
			}
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 205 #Savoy
			owns_core_province = 103 #Piedmont
			owns_core_province = 102 #Nice
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = north_piedmont_area #North Piedmont
					area = piedmont_area #Central Piedmont
					area = south_piedmont_area #South Piedmont
					area = savoy_dauphine_area #Savoy
				}
				value = 18			#Two thirds of Savoy+Piedmont provinces (27)
			}
			num_of_owned_provinces_with = {
				is_core = ROOT
				area = sardinia_area #Sardinia
				value = 4			#Half of Sardinia's 7 provinces
			}
			total_development = 150			#Normal requirement for rank 2 is 500 dev, so this is 70 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			#No claims: Savoy has missions to conquer all of Italy in 1.30.
			103 = {
				move_capital_effect = yes
			}
			change_tag = SPI
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					primary_culture = sardinian
					NOT = { accepted_culture = piedmontese }
				}
				add_accepted_culture = piedmontese
			}
			else_if = {
				limit = {
					primary_culture = piedmontese
					NOT = { accepted_culture = sardinian }
				}
				add_accepted_culture = sardinian
			}
			swap_ideas = yes
			if = {
				limit = {
					NOT = { was_tag = SAV }
				}
				swap_non_generic_missions = yes
			}
			set_country_flag = formed_sardinia_piedmont_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

###################################################################################################
################################			SardiniaPiedmont (Inherit)			 ##############################################			#Note needs work
###################################################################################################
	sardinia_piedmont_nation_inherit = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_sardinia_piedmont_flag }
			NOT = { tag = SPI }
			NOT = { tag = ITL }
			NOT = { tag = ITA }
			NOT = { tag = TUS }
			NOT = { tag = EMR }
			NOT = { tag = LMV }
			OR = {
				AND = {
					tag = SAV
					SAR = { 
						ai = yes 
						was_player = no
					}
				}
				AND = {
					tag = SAR
					SAV = { 
						ai = yes 
						was_player = no 
					}
				}
			}
			OR = {
				primary_culture = sardinian
				primary_culture = piedmontese
			}
		}
		allow = {
			NOT = { exists = SPI }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			prestige = 75
			dip = 3
			adm = 3
			OR = {
				AND = {
					tag = SAR
					owns_core_province = 127			# Sardinia
					senior_union_with = SAV
					SAV = {
						owns_core_province = 205 #Savoy
						owns_core_province = 103 #Piedmont
						owns_core_province = 102 #Nice
						NOT = { num_of_cities = 28 } #Original 18+10
					}
				}
				AND = {
					tag = SAV
					owns_core_province = 103			# Piedmont
					senior_union_with = SAR
					SAR = {
						owns_core_province = 127		# Sardinia
						NOT = { num_of_cities = 12 } #Original 7 + 5
					}
				}
			}
		}
		effect = {
			if = {
				limit = { tag = SAV }
				inherit = SAR
			}
			if = {
				limit = { tag = SAR }
				inherit = SAV
			}
			change_tag = SPI
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_prestige = 25
			if = {
				limit = {
					primary_culture = sardinian
					NOT = { accepted_culture = piedmontese }
				}
				add_accepted_culture = piedmontese
			}
			else_if = {
				limit = {
					primary_culture = piedmontese
					NOT = { accepted_culture = sardinian }
				}
				add_accepted_culture = sardinian
			}
			swap_ideas = yes
			if = {
				limit = {
					NOT = { was_tag = SAV }
				}
				swap_non_generic_missions = yes
			}
			set_country_flag = formed_sardinia_piedmont_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
		do_not_integrate = SAR
		do_not_integrate = SAV
	}

###################################################################################################
################################			Saxony			 ##############################################			#Note needs work
###################################################################################################
	saxony_nation = {
		major = yes
		potential = {
			normal_or_historical_nations = yes
			was_never_end_game_tag_trigger = yes
			was_never_german_regional_tag_trigger = yes
			NOT = { has_country_flag = formed_franconia_flag }
			OR = {
				ai = no
				is_playing_custom_nation = no
			}
			OR = {
				ai = no
				NOT = { exists = SAX }
			}
			is_colonial_nation = no
			OR = {
				is_former_colonial_nation = no
				AND = {
					is_former_colonial_nation = yes
					ai = no
				}
			}
			OR = {
				primary_culture = saxon
				tag = LAU
			}
			NOT = { tag = BRA }
			NOT = { tag = SAX }
		}
		provinces_to_highlight = {
			OR = {
				province_id = 59
				AND = {
					NOT = { ROOT = { owns_core_province = 61 } }
					province_id = 62
				}
				AND = {
					NOT = { ROOT = { owns_core_province = 62 } }
					province_id = 61
				}
				AND = {
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 6
								OR = {
									area = south_saxony_area
									area = thuringia_area
									area = northern_saxony_area
								}
								is_core = root
							}
						}
						owns_core_province = 59
						OR = {
							owns_core_province = 61
							owns_core_province = 62
						}
					}
					OR = {
						area = south_saxony_area
						area = thuringia_area
						area = northern_saxony_area
					}
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}

		allow = {
			is_free_or_tributary_trigger = yes
			is_at_war = no
			NOT = { exists = SAX }
			owns_core_province = 59			#Wittenberg
			OR = {
				owns_core_province = 61			#Dresden
				owns_core_province = 62			#Leipzig
			}
			num_of_owned_provinces_with = {
				value = 6
				OR = {
					area = south_saxony_area
					area = thuringia_area
					area = northern_saxony_area
				}
				is_core = root
			}
		}
		effect = {
			change_tag = SAX
			restore_country_name_effect = yes
			south_saxony_area = {
				limit = {
					NOT = { owned_by = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			thuringia_area = {
				limit = {
					NOT = { owned_by = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			northern_saxony_area = {
				limit = {
					NOT = { owned_by = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			set_country_flag = formed_saxony_flag

			if = {
				limit = {
					is_playing_custom_nation = no
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			if = {
				limit = {
					NOT = { tag = THU }
					NOT = { was_tag = THU }
				}
				swap_non_generic_missions = yes
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}


###################################################################################################
################################			Spain (normal)			 ##############################################
###################################################################################################
	spanish_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_spain_flag }
			NOT = { tag = IBE }
			NOT = { tag = SPA }
			NOT = { tag = ADU }
			NOT = { tag = KNI }
			NOT = { religion_group = muslim }			#Muslims go for Andalusia
			OR = {
				AND = {
					culture_group = iberian
					NOT = { primary_culture = portugese }				#Portuguese go for Iberia tag
				} 
				primary_culture = basque
			}
		}
		provinces_to_highlight = {
			region = iberia_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = SPA }
			NOT = { exists = IBE }			#Special, no doubling up on Iberia superpowers
			NOT = { exists = ADU }			#Special, no doubling up on Iberia superpowers
			is_nomad = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 208	# Leon
			owns_core_province = 214	# Zaragoza
			owns_core_province = 215	# Valladolid
			owns_core_province = 219	# Toledo
			owns_core_province = 1746	# Burgos
			num_of_owned_provinces_with = {
				is_core = ROOT
				region = iberia_region
				value = 103			#At least 2/3 of Iberia's 153 provinces (note modern Spain is 123 provinces, 81 in Castile, 41 more in Aragon, Granada, and Navarre, and another 1 in Portugal). This is also 85% of non Portuguese Iberia.
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
			iberia_region = { type = all NOT = { owner = { religion_group = muslim } } }			#Eventually make it so Portgual can fail and still spain can be formed
		}
		effect = {
			change_tag = SPA
			if = {
				limit = {
					NOT = { 
						AND = {
							has_dlc = "Golden Century" 
							OR = {
								tag = ARA
								tag = CAT
								tag = VAL
							}
						}
					}
				}
				swap_non_generic_missions = yes
			}
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			hidden_effect = {
				iberia_region = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
						NOT = { area = macaronesia_area }
						NOT = { area = alentejo_area }
						NOT = { area = beieras_area }
						NOT = { area = minho_duoro_area }
						NOT = { area = estremadura_area }
						NOT = { area = algarve_area }
					}
					add_permanent_claim = SPA
				}
			}
			swap_ideas = yes
			custom_tooltip = spanish_unification_effect.tooltip
			set_country_flag = formed_spain_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400 #
	}

###################################################################################################
################################			Spain (Diplomatically)			 ##############################################			#Using my work in Britain as a template here
###################################################################################################
	spanish_nation_diplomatically = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_spain_flag }
			NOT = { tag = IBE }
			NOT = { tag = SPA }
			NOT = { tag = ADU }
			NOT = { tag = KNI }
			NOT = { religion_group = muslim }			#Muslims go for Andalusia
			OR = {
				tag = CAS
				tag = ARA
				AND = {
					primary_culture = basque
					num_of_cities = 39			#Giving Basque a break. At least 1/4 of Iberia's 153 provinces to see if Basque
				}
				AND = {
					culture_group = iberian
					NOT = { primary_culture = portugese }				#Portuguese go for Iberia tag
					num_of_cities = 77			#At least 1/2 of Iberia's 153 provinces to see, if not CAS, ARA, or Basque
				}
			}
		}
		provinces_to_highlight = {
			region = iberia_region
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = SPA }
			NOT = { exists = IBE }			#Special, no doubling up on Iberia superpowers
			NOT = { exists = ADU }			#Special, no doubling up on Iberia superpowers
			is_nomad = no
			is_free_or_tributary_trigger = yes
			is_at_war = no
			if = {
				limit = { government = monarchy }
				legitimacy = 100
			}
			adm_tech = 10			#Diplo tech requirement
			owns_or_vassal_of = 208	# Leon
			owns_or_vassal_of = 214	# Zaragoza
			owns_or_vassal_of = 215	# Valladolid
			owns_or_vassal_of = 219	# Toledo
			owns_or_vassal_of = 1746	# Burgos
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				region = iberia_region
				is_core = owner
				value = 115			#At least 75 percent of Iberia's 153 provinces (Note Portugal has 31, so Castile or Aragon needs everything but Portugal and 7 others). This is also 95 percent of non Portuguese Iberia.
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
			iberia_region = { type = all NOT = { owner = { religion_group = muslim } } }			#Eventually make it so Portgual can fail and still spain can be formed
		}
		effect = {
			every_subject_country = {
				limit = {
					ai = yes
					capital_scope = { region = iberia_region }
					OR = {
						ROOT = { ai = yes } #AI is not intelligent enough to feed subject PUs. They should not be considered for these limits.
						NOT = { num_of_cities = 12 }
						AND = {
							tag = ARA
							NOT = { num_of_cities = 70 }			#Aragon, including Mallorca, Sardinia, and Italian holdings is 35. Sicily is 8 more & Naples adds 25 more.
						}
						AND = {
							tag = CAS
							NOT = { num_of_cities = 100 }			#Castile is 93 with Granada, or 95 with all Canaries. Navarra adds another 5 (Out of which 4 are in Iberia).
						}
					}
				}
				ROOT = { inherit = PREV }
			}
			change_tag = SPA
			if = {
				limit = {
					NOT = { 
						AND = {
							has_dlc = "Golden Century"
							tag = ARA
						}
					}
				}
				swap_non_generic_missions = yes
			}
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			add_prestige = 25
			hidden_effect = {
				iberia_region = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
						NOT = { area = macaronesia_area }
						NOT = { area = alentejo_area }
						NOT = { area = beieras_area }
						NOT = { area = minho_duoro_area }
						NOT = { area = estremadura_area }
						NOT = { area = algarve_area }
					}
					add_permanent_claim = SPA
				}
			}
			swap_ideas = yes
			custom_tooltip = spanish_unification_effect.tooltip
			set_country_flag = formed_spain_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 200
		do_not_integrate = CAS
		do_not_integrate = ARA
		do_not_integrate = LON
		do_not_integrate = GAL
		do_not_integrate = CAT
		do_not_integrate = NAV
		do_not_integrate = MJO
		do_not_integrate = VAL
		do_not_integrate = GRA			#If force converted
	}

###################################################################################################
################################			Scotland			 ##############################################
###################################################################################################
	scottish_nation = {			#Formerly BT only btpl_scottish_nation, which still has a localisation
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_scotland_flag }
			NOT = { tag = SCO }			#Hide this decision for Scotland... duh....
			NOT = { tag = GBR }			#Scottish GBR shouldn't see this
			NOT = { tag = TNA }			#Prevent any possible exploit of tag switching
			OR = {
				primary_culture = scottish
				primary_culture = gallgaidheil
				primary_culture = highland_scottish
			}	#One of the Scottish cultures
			any_owned_province = {
				OR = {
					area = lowlands_area
					area = scottish_marches_area
					area = highlands_area
					area = kingdom_of_the_isles_area
					area = grampians_area
				}
			}
		}
		provinces_to_highlight = {
			OR = {
				area = lowlands_area
				area = scottish_marches_area
				area = highlands_area
				area = kingdom_of_the_isles_area
				area = grampians_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = SCO }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			if = {
				limit = { primary_culture = scottish }
				owns_core_province = 248			#Lothian
			}
			if = {
				limit = { NOT = { primary_culture = scottish } }
				owns_core_province = 250			#Fife
			}
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = lowlands_area
					area = scottish_marches_area
					area = highlands_area
					area = kingdom_of_the_isles_area
					area = grampians_area
				}
				value = 19			#2/3 of Scotland's 28 provinces
			}
			total_development = 150			#Normal requirement for rank 2 is 500 dev, so this is 70 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			#LOI not this mission has.
			# hidden_effect = {
				# if = {
					# limit = { tag = LOI }
					# complete_mission = sco_highlands_mission
				# }	
			# }
			change_tag = SCO
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = {
					OR = {
						has_reform = irish_clann_reform
						has_reform = norman_lordship_reform
					}
				}
				change_government = monarchy
				set_legacy_government = feudal_monarchy
			}
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			lowlands_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = SCO
			}
			scottish_marches_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = SCO
			}
			highlands_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = SCO
			}
			kingdom_of_the_isles_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = SCO
			}
			grampians_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = SCO
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			set_country_flag = formed_scotland_flag
			if = {
				limit = {
					NOT = { has_idea_group = SCO_Ideas }
				}
				swap_ideas = yes
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				tag = ENG
			}
		}
		ai_importance = 400
	}

###################################################################################################
################################			Swabia			 ##############################################			#Note needs work
###################################################################################################
	swabia_nation = {
		major = yes
		potential = {
			normal_or_historical_nations = yes
			was_never_end_game_tag_trigger = yes
			was_never_german_regional_tag_trigger = yes
			NOT = { has_country_flag = formed_swabia_flag }
			OR = {
				ai = no
				is_playing_custom_nation = no
			}
			NOT = { exists = SWA }
			is_colonial_nation = no
			OR = {
				is_former_colonial_nation = no
				AND = {
					is_former_colonial_nation = yes
					ai = no
				}
			}
			primary_culture = swabian
		}
		provinces_to_highlight = {
			OR = {
				province_id = 70
				province_id = 1872
				AND = {
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 10
								culture = swabian
								continent = europe
								is_core = root
							}
						}
						owns_core_province = 70
						owns_core_province = 1872
					}
					culture = swabian
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_free_or_tributary_trigger = yes
			is_at_war = no
#			adm_tech = 10
			owns_core_province = 70 #Wurttemberg
			owns_core_province = 1872 #Ulm
			num_of_owned_provinces_with = {
				value = 10
				culture = swabian
				continent = europe
				is_core = root
			}
		}
		effect = {
			change_tag = SWA
			restore_country_name_effect = yes
			lower_swabia_area = {
				limit = {
					NOT = { owned_by = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			upper_swabia_area = {
				limit = {
					NOT = { owned_by = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			upper_rhineland_area = {
				limit = {
					NOT = { owned_by = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			#These were also historical territories of the Duchy
			switzerland_area = {
				limit = {
					NOT = { owned_by = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			romandie_area = {
				limit = {
					NOT = { owned_by = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			4710 = {
				if = {
					limit = {
						NOT = { owned_by = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
			}

			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			set_country_flag = formed_swabia_flag

			if = {
				limit = {
					OR = {
						is_elector = yes
						is_part_of_hre = no
					}
				}
				set_government_rank = 2
			}

			swap_non_generic_missions = yes

			if = {
				limit = {
					is_playing_custom_nation = no
				}
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	
###################################################################################################
################################			Tripolitania			 ##############################################
###################################################################################################
	tripoli_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_tripoli_flag }
			NOT = { tag = MOR }
			NOT = { tag = TUN }
			NOT = { tag = TLC }
			NOT = { tag = ALG }
			NOT = { tag = TRP }
			NOT = { tag = OTN }
			OR = {
				primary_culture = tunisian
				AND = {
					OR = {
						culture_group = turko_semitic
						culture_group = berber_group
					}
					OR = {
						capital_scope = { area = tripolitania_area }
						capital_scope = { area = fezzan_area }
						capital_scope = { area = cyrenaica_area }
						capital_scope = { area = nafusa_mountains_area }
					}
				}
			}
			any_owned_province = {
				OR = {
					area = tripolitania_area
					area = fezzan_area
					area = cyrenaica_area
					area = nafusa_mountains_area
				}
			}
		}
		provinces_to_highlight = {
			OR = {
				area = tripolitania_area
				area = fezzan_area
				area = cyrenaica_area
				area = nafusa_mountains_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = TRP }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 354 #Tripoli
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = tripolitania_area
					area = fezzan_area
					area = cyrenaica_area
					area = nafusa_mountains_area
				}
				value = 13			#At least 2/3 of Libya's 19 provinces
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = TRP
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			tripolitania_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = TRP
			}
			fezzan_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = TRP
			}
			cyrenaica_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = TRP
			}
			nafusa_mountains_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = TRP
			}
			if = {
				limit = { government = tribal }
				change_government_to_monarchy = yes
				#set_legacy_government = despotic_monarchy
			}
			add_prestige = 25
			swap_ideas = yes
			set_country_flag = formed_tripoli_flag
		}
		ai_will_do = {
			factor = 1
		}
		#ai_importance = 400
	}

###################################################################################################
################################			Tunisia			 ##############################################
###################################################################################################
	tunisian_nation = { #This formation is just horribly wrong in every sense of the imagination. Needs real fixing at some point.
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			NOT = { has_country_flag = formed_tunisia_flag }
			NOT = { tag = MOR }
			NOT = { tag = TUN }
			NOT = { tag = TLC }
			NOT = { tag = ALG }
			NOT = { tag = TRP }
			NOT = { tag = OTN }
			AND = {
				primary_culture = tunisian
				any_owned_province = {
					OR = {
						area = tunisia_area
						area = djerba_area
						area = djerid_area
						area = east_aures_area
					}
				}
			}
		}
		provinces_to_highlight = {
			OR = {
				area = tunisia_area
				area = djerba_area
				area = djerid_area
				area = east_aures_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = OTN }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 341 #Tunis
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = tunisia_area
					area = djerba_area
					area = djerid_area
					area = east_aures_area
				}
				value = 10			#At least 2/3 of Tunisia's 15 provinces
			}
			total_development = 250			#Normal requirement for rank 2 is 500 dev, so this is 50 percent discounted
			prestige = 25			#Normal requirement for rank 2 is 50 prestige, so this is 50 percent discounted
		}
		effect = {
			change_tag = OTN
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = centralization_modifier
				duration = 7300
			}
			tunisia_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = OTN
			}
			djerba_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = OTN
			}
			djerid_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = OTN
			}
			east_aures_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = OTN
			}
			if = {
				limit = { government = tribal }
				change_government_to_monarchy = yes #Desert tribes settling down.
				#set_legacy_government = despotic_monarchy
			}
			add_prestige = 25
			swap_ideas = yes
			set_country_flag = formed_tunisia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}
	
###################################################################################################
################################			Tuscany			 ##############################################			#Note needs work
###################################################################################################
	#More or less HR's work with only a few adjustments from Draiocht
	tuscan_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			bt_italy_stem_duchy_check = yes
			NOT = { has_country_flag = formed_tuscany_flag }
			NOT = { tag = ITL }
			NOT = { tag = ITA }
			NOT = { tag = TUS }
			NOT = { tag = SPI }
			NOT = { tag = EMR }
			NOT = { tag = LMV }
			OR = {
				primary_culture = tuscan
				tag = PGA
			}
		}
		provinces_to_highlight = {
			OR = {
				culture = tuscan
				province_id = 116	# Firenze
				province_id = 115	# Pisa
				province_id = 117	# Siena
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = TUS }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			owns_core_province = 116	# Firenze
			owns_core_province = 115	# Pisa
			owns_core_province = 117	# Siena
			num_of_owned_provinces_with = {
				is_core = ROOT
				culture = tuscan
				value = 9			#At least 2/3 of 14 Tuscan-cultured provinces
			}
		}
		effect = {
			change_tag = TUS
			#remove_non_electors_emperors_from_empire_effect = yes
			tuscany_area = {
				limit = { 
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = TUS
			}
			south_tuscany_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT } 
					NOT = { is_core = ROOT } 
				}
				add_permanent_claim = TUS
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 3650
			}
			add_prestige = 10
			if = {
				limit = {
					NOT = { has_idea_group = TUS_ideas }
				}
				swap_ideas = yes
			}
			set_country_flag = formed_tuscany_flag
			hidden_effect = {
				country_event = {
					id = flavor_tus.2
					days = 50
					random = 20
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

###################################################################################################
################################			Westfalen			 ##############################################			#Note needs work
###################################################################################################
	westfalian_nation = {
		major = yes
		potential = {
			bt_generic_can_form_potential_check = yes
			was_never_german_regional_tag_trigger = yes
			NOT = { has_country_flag = formed_westphalia_flag }
			NOT = { tag = HLR }
			NOT = { tag = HAN }
			NOT = { tag = PAP }
			NOT = { tag = GER }
			NOT = { tag = PRU }
			NOT = { tag = SWI }
			NOT = { exists = WES }
			NOT = { has_reform = celestial_empire }
			OR = {
				primary_culture = hannoverian #Westphalian
				primary_culture = hessian
			}
			OR = {
				ai = no
				AND = {
					owns_core_province = 82	# Westfalen
					owns_core_province = 1762	# Kassel
					OR = {
						owns_core_province = 85	# Cologne
						owns_core_province = 80	# Trier
						owns_core_province = 78	# Mainz
						owns_core_province = 86	# Munster
					}
				}
			}
		}
		provinces_to_highlight = {
			OR = {
				province_id = 82	# Westfalen
				province_id = 1762	# Kassel
				AND = {
					OR = {
						province_id = 85	# Cologne
						province_id = 80	# Trier
						province_id = 78	# Mainz
						province_id = 86	# Munster
					}
					ROOT = {
						NOT = { owns_core_province = 85 }
						NOT = { owns_core_province = 80 }
						NOT = { owns_core_province = 78 }
						NOT = { owns_core_province = 86 }
					}
				}
				AND = {
					OR = {
						culture = hannoverian
						culture = hessian
					}
					region = north_german_region
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 12 #out of 22
								OR = {
									culture = hannoverian
									culture = hessian
								}
								region = north_german_region
								is_core = root
							}
						}
						owns_core_province = 82
						owns_core_province = 1762
						OR = {
							owns_core_province = 85
							owns_core_province = 80
							owns_core_province = 78
							owns_core_province = 86
						}
					}
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			NOT = { exists = WES }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no
			AND = {
				owns_core_province = 82	# Westfalen
				owns_core_province = 1762	# Kassel
				OR = {
					owns_core_province = 85	# Cologne
					owns_core_province = 80	# Trier
					owns_core_province = 78	# Mainz
					owns_core_province = 86	# Munster
				}
			}
			num_of_owned_provinces_with = {
				value = 12 #out of 22
				OR = {
					culture = hannoverian
					culture = hessian
				}
				region = north_german_region
				is_core = root
			}
		}
		effect = {
			1762 = {
				move_capital_effect = yes
			}
			change_tag = WES
			restore_country_name_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
					OR = {
						is_elector = yes
						is_part_of_hre = no
					}
				}
				set_government_rank = 2
			}
			capital_scope = { 
				add_base_tax = 1 
				add_base_production = 1 
			}
			if = {
				limit = {
					NOT = { primary_culture = hessian }
					NOT = { accepted_culture = hessian }
				}
				add_accepted_culture = hessian
			}
			if = {
				limit = {
					NOT = { primary_culture = hannoverian }
					NOT = { accepted_culture = hannoverian }
				}
				add_accepted_culture = hannoverian
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 3650
			}
			add_prestige = 10
			westphalia_area = {
				limit = {
					NOT = { owned_by = ROOT }
				}
				add_permanent_claim = WES
			}
			hesse_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = WES
			}
			palatinate_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = WES
			}
			north_rhine_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = WES
			}
			lower_rhineland_area = {
				limit = { NOT = { owned_by = ROOT } }
				add_permanent_claim = WES
			}
			swap_non_generic_missions = yes
			swap_ideas = yes
			set_country_flag = formed_westphalia_flag
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				is_part_of_hre = yes
				is_elector = no	
			}
		}
		ai_importance = 400 #
	}

}