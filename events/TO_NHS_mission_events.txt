namespace = nhs_mission_events

# Building counter
province_event = {
	id = nhs_mission_events.1
	title = nhs_mission_events.1.t
	desc = nhs_mission_events.1.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	hidden = yes

    trigger = {
		continent = north_america
		owner = {
			OR = {
				tag = NHS
				tag = ELY
			}
			has_country_flag = nhs_start_counting_buildings
		}
	}
	
	immediate = {
		if = {
			limit = {
				
				has_building = town_hall
				NOT = { has_province_flag = nhs_has_town_hall }
			}
			set_province_flag = nhs_has_town_hall
			owner = {
				change_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
			custom_tooltip = one_point_more
		}
		if = {
			limit = {
				
				has_building = counting_house
				NOT = { has_province_flag = nhs_has_counting_house }
			}
			set_province_flag = nhs_has_counting_house
			owner = {
				change_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
			custom_tooltip = one_point_more
		}
		if = {
			limit = {
				
				has_building = cathedral
				NOT = { has_province_flag = nhs_has_cathedral }
			}
			set_province_flag = nhs_has_cathedral
			owner = {
				change_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
			custom_tooltip = one_point_more
		}
		if = {
			limit = {
				
				has_building = university
				NOT = { has_province_flag = nhs_has_university }
			}
			set_province_flag = nhs_has_university
			owner = {
				change_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
			custom_tooltip = one_point_more
		}
		if = {
			limit = {
				
				has_building = grand_shipyard
				NOT = { has_province_flag = nhs_has_grand_shipyard }
			}
			set_province_flag = nhs_has_grand_shipyard
			owner = {
				change_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
			custom_tooltip = one_point_more
		}
		if = {
			limit = {
				
				has_building = drydock
				NOT = { has_province_flag = nhs_has_drydock }
			}
			set_province_flag = nhs_has_drydock
			owner = {
				change_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
			custom_tooltip = one_point_more
		}
		if = {
			limit = {
				
				has_building = stock_exchange
				NOT = { has_province_flag = nhs_has_stock_exchange }
			}
			set_province_flag = nhs_has_stock_exchange
			owner = {
				change_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
			custom_tooltip = one_point_more
		}
		if = {
			limit = {
				
				has_building = training_fields
				NOT = { has_province_flag = nhs_has_training_fields }
			}
			set_province_flag = nhs_has_training_fields
			owner = {
				change_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
			custom_tooltip = one_point_more
		}
		if = {
			limit = {
				
				has_building = trade_depot 
				NOT = { has_province_flag = nhs_has_trade_depot  }
			}
			set_province_flag = nhs_has_trade_depot
			owner = {
				change_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
			custom_tooltip = one_point_more
		}
		if = {
			limit = {
				
				has_building = conscription_center
				NOT = { has_province_flag = nhs_has_conscription_center }
			}
			set_province_flag = nhs_has_conscription_center
			owner = {
				change_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
			custom_tooltip = one_point_more
		}
		if = {
			limit = {
				
				OR = {
					has_building = mills
					has_building = farm_estate
					has_building = tradecompany
					has_building = plantations
					has_building = textile
					has_building = weapons
					has_building = wharf
					has_building = furnace
				}
				NOT = { has_province_flag = nhs_has_manufactory }
			}
			set_province_flag = nhs_has_manufactory
			owner = {
				change_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
			custom_tooltip = one_point_more
		}
	}

	option = {
		name = "nhs_mission_events.1.a"
		
	}
}

province_event = {
	id = nhs_mission_events.2
	title = nhs_mission_events.2.t
	desc = nhs_mission_events.2.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	hidden = yes

    trigger = {
		continent = north_america
		OR = {
			has_province_flag = nhs_has_town_hall
			has_province_flag = nhs_has_counting_house
			has_province_flag = nhs_has_cathedral
			has_province_flag = nhs_has_university
			has_province_flag = nhs_has_grand_shipyard
			has_province_flag = nhs_has_drydock
			has_province_flag = nhs_has_stock_exchange
			has_province_flag = nhs_has_training_fields
			has_province_flag = nhs_has_trade_depot
			has_province_flag = nhs_has_conscription_center
			has_province_flag = nhs_has_manufactory
		}
		owner = {
			NOT = {
				OR = {
					tag = NHS
					tag = ELY
				}
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				
				#has_building = town_hall
				has_province_flag = nhs_has_town_hall
			}
			clr_province_flag = nhs_has_town_hall
			FROM = {
				subtract_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
		}
		if = {
			limit = {
				
				#has_building = counting_house
				has_province_flag = nhs_has_counting_house
			}
			clr_province_flag = nhs_has_counting_house
			FROM = {
				subtract_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
		}
		if = {
			limit = {
				
				#has_building = cathedral
				has_province_flag = nhs_has_cathedral
			}
			clr_province_flag = nhs_has_cathedral
			FROM = {
				subtract_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
			custom_tooltip = one_point_less
		}
		if = {
			limit = {
				
				#has_building = university
				has_province_flag = nhs_has_university
			}
			clr_province_flag = nhs_has_university
			FROM = {
				subtract_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
		}
		if = {
			limit = {
				
				#has_building = grand_shipyard
				has_province_flag = nhs_has_grand_shipyard
			}
			clr_province_flag = nhs_has_grand_shipyard
			FROM = {
				subtract_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
		}
		if = {
			limit = {
				
				#has_building = drydock
				has_province_flag = nhs_has_drydock
			}
			clr_province_flag = nhs_has_drydock
			FROM = {
				subtract_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
		}
		if = {
			limit = {
				
				#has_building = stock_exchange
				has_province_flag = nhs_has_stock_exchange
			}
			clr_province_flag = nhs_has_stock_exchange
			FROM = {
				subtract_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
		}
		if = {
			limit = {
				
				#has_building = training_fields
				has_province_flag = nhs_has_training_fields
			}
			clr_province_flag = nhs_has_training_fields
			FROM = {
				subtract_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
		}
		if = {
			limit = {
				
				#has_building = trade_depot 
				has_province_flag = nhs_has_trade_depot
			}
			clr_province_flag = nhs_has_trade_depot
			FROM = {
				subtract_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
			}
		}
		if = {
			limit = {
				
				#has_building = conscription_center
				has_province_flag = nhs_has_conscription_center
			}
			clr_province_flag = nhs_has_conscription_center
			FROM = {
				subtract_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
				custom_tooltip = one_point_less
			}
		}
		if = {
			limit = {
				
				#OR = {
					#has_building = mills
					#has_building = farm_estate
					#has_building = tradecompany
					#has_building = plantations
					#has_building = textile
					#has_building = weapons
					#has_building = wharf
					#has_building = furnace
				#}
				has_province_flag = nhs_has_manufactory
			}
			clr_province_flag = nhs_has_manufactory
			FROM = {
				subtract_variable = {
					which = nhs_HighTierBuildingCount
					value = 1
				}
				custom_tooltip = one_point_less
			}
		}
	}

	option = {
		name = "nhs_mission_events.1.a"
		
	}
}

#Nea Hagia Sophia start, choice where?
country_event = {
	id = nhs_mission_events.3
	title = nhs_mission_events.3.t
	desc = nhs_mission_events.3.d
	picture = nhs_Hagia_Sophia
	
	is_triggered_only = yes
	


	option = { #In the middle of the city, lowers one tax dev, decreases dev cost, +max_absolutism
		name = "nhs_mission_events.3.a"
		#custom_tooltip = nhs_nea_hagia_sophia_city_tt
		953 = {
			tooltip = {
				add_great_project = nea_hagia_sophia
			}
			custom_tooltip = nea_hagia_sophia_one_v1_tt
			set_province_flag = nhs_building_hagia_sophia_province
			set_province_flag = nhs_contructing_nea_hagia_sophia_one
			hidden_effect = {
				add_province_triggered_modifier = nea_hagia_sophia_one_v1
			}
			add_base_tax = -1
		}
	}
	
	option = { #Outside of the city, accessible to pilgrims, +1 true faith
		name = "nhs_mission_events.3.b"
		#custom_tooltip = nhs_nea_hagia_sophia_outside_city_tt
		953 = {
			tooltip = {
				add_great_project = nea_hagia_sophia
			}
			custom_tooltip = nea_hagia_sophia_one_v2_tt
			set_province_flag = nhs_building_hagia_sophia_province
			set_province_flag = nhs_contructing_nea_hagia_sophia_one
			hidden_effect = {
				add_province_triggered_modifier = nea_hagia_sophia_one_v2
			}
		}
		
	}
	
	option = { #In the bay, for everyone to see, decreases dev cost in Cheasapeake, -prestige decay, +trade efficiency
		name = "nhs_mission_events.3.c"
		#custom_tooltip = nhs_nea_hagia_bay_tt
		950 = {
			tooltip = {
				add_great_project = nea_hagia_sophia2
			}
			custom_tooltip = nea_hagia_sophia_one_v3_tt
			set_province_flag = nhs_building_hagia_sophia_province
			set_province_flag = nhs_contructing_nea_hagia_sophia_one
			hidden_effect = {
				add_province_triggered_modifier = nea_hagia_sophia_one_v3
			}
		}
		
	}
}

#Nea Hagia Sophia event 1/4, ?
country_event = {
	id = nhs_mission_events.4
	title = nhs_mission_events.4.t
	desc = nhs_mission_events.4.d
	picture = nhs_Hagia_Sophia
	
	trigger = {
		has_country_flag = nhs_building_hagia_sophia
		religion_group = christian
		OR = {
			AND = {
				owns = 953
				953 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_one days = 730 }
				}
			}
			AND = {
				owns = 950
				950 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_one days = 730 }
				}
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				953 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_one days = 730 }
				}
			}
			953 = {
				clr_province_flag = nhs_contructing_nea_hagia_sophia_one
				set_province_flag = nhs_contructing_nea_hagia_sophia_two
				if = {
					limit = {
						has_province_modifier = nea_hagia_sophia_one_v1
					}
					remove_province_triggered_modifier = nea_hagia_sophia_one_v1
					add_province_triggered_modifier = nea_hagia_sophia_two_v1
				}
				else_if = {
					limit = {
						has_province_modifier = nea_hagia_sophia_one_v2
					}
					remove_province_triggered_modifier = nea_hagia_sophia_one_v2
					add_province_triggered_modifier = nea_hagia_sophia_two_v2
				}
			}
		}
		else_if = {
			limit = {
				950 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_one days = 730 }
				}
			}
			950 = {
				clr_province_flag = nhs_contructing_nea_hagia_sophia_one
				set_province_flag = nhs_contructing_nea_hagia_sophia_two
				remove_province_triggered_modifier = nea_hagia_sophia_one_v3
				add_province_triggered_modifier = nea_hagia_sophia_two_v3
			}
		}
	}

	option = { 
		name = "nhs_mission_events.4.a"
		
	}
}

#Nea Hagia Sophia event 2/4, ?
country_event = {
	id = nhs_mission_events.5
	title = nhs_mission_events.5.t
	desc = nhs_mission_events.5.d
	picture = nhs_Hagia_Sophia
	
	trigger = {
		has_country_flag = nhs_building_hagia_sophia
		religion_group = christian
		OR = {
			AND = {
				owns = 953
				953 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_two days = 730 }
				}
			}
			AND = {
				owns = 950
				950 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_two days = 730 }
				}
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				953 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_two days = 730 }
				}
			}
			953 = {
				clr_province_flag = nhs_contructing_nea_hagia_sophia_two
				set_province_flag = nhs_contructing_nea_hagia_sophia_three
				if = {
					limit = {
						has_province_modifier = nea_hagia_sophia_two_v1
					}
					remove_province_triggered_modifier = nea_hagia_sophia_two_v1
					add_province_triggered_modifier = nea_hagia_sophia_three_v1
				}
				else_if = {
					limit = {
						has_province_modifier = nea_hagia_sophia_two_v2
					}
					remove_province_triggered_modifier = nea_hagia_sophia_two_v2
					add_province_triggered_modifier = nea_hagia_sophia_three_v2
				}
			}
		}
		else_if = {
			limit = {
				950 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_two days = 730 }
				}
			}
			950 = {
				clr_province_flag = nhs_contructing_nea_hagia_sophia_two
				set_province_flag = nhs_contructing_nea_hagia_sophia_three
				remove_province_triggered_modifier = nea_hagia_sophia_two_v3
				add_province_triggered_modifier = nea_hagia_sophia_three_v3
			}
		}
	}

	option = { 
		name = "nhs_mission_events.5.a"
	
	}
}

#Nea Hagia Sophia event 3/4, decoration
country_event = {
	id = nhs_mission_events.6
	title = nhs_mission_events.6.t
	desc = nhs_mission_events.6.d
	picture = nhs_Mosaic

	
	trigger = {
		has_country_flag = nhs_building_hagia_sophia
		religion_group = christian
		OR = {
			AND = {
				owns = 953
				953 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_three days = 730 }
				}
			}
			AND = {
				owns = 950
				950 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_three days = 730 }
				}
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				953 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_three days = 730 }
				}
			}
			953 = {
				clr_province_flag = nhs_contructing_nea_hagia_sophia_three
				set_province_flag = nhs_contructing_nea_hagia_sophia_four
			}
		}
		else_if = {
			limit = {
				950 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_three days = 730 }
				}
			}
			950 = {
				clr_province_flag = nhs_contructing_nea_hagia_sophia_three
				set_province_flag = nhs_contructing_nea_hagia_sophia_four
			}
		}
	}

	option = { #The largest mosaics should show emperors/empressesm, +yearly_absolutism, legitimacy
		name = "nhs_mission_events.6.a"
		#custom_tooltip = nhs_nea_hagia_emperor_tt
		custom_tooltip = nea_hagia_sophia_four_vx_c1_tt
		hidden_effect = {
			if = {
				limit = {
					953 = {
						has_province_flag = nhs_contructing_nea_hagia_sophia_four
					}
				}
				953 = {
					if = {
						limit = {
							has_province_modifier = nea_hagia_sophia_three_v1
						}
						remove_province_triggered_modifier = nea_hagia_sophia_three_v1
						add_province_triggered_modifier = nea_hagia_sophia_four_v1_c1
					}
					else_if = {
						limit = {
							has_province_modifier = nea_hagia_sophia_three_v2
						}
						remove_province_triggered_modifier = nea_hagia_sophia_three_v2
						add_province_triggered_modifier = nea_hagia_sophia_four_v2_c1
					}
				}
			}
			else_if = {
				limit = {
					950 = {
						has_province_flag = nhs_contructing_nea_hagia_sophia_four
					}
				}
				950 = {
					remove_province_triggered_modifier = nea_hagia_sophia_three_v3
					add_province_triggered_modifier = nea_hagia_sophia_four_v3_c1
				}
			}
		}
	}
#	
#	option = { #They should show patriarchs, +yearly_absolutism, +monarch_diplomatic_power
#		name = "nhs_mission_events.1.a"
#		trigger = {
#			government = theocracy
#		}
#		custom_tooltip = nhs_nea_hagia_holy_tt
#		if = {
#			limit = {
#				953 = {
#					has_province_flag = nhs_contructing_nea_hagia_sophia_four
#				}
#			}
#			953 = {
#				if = {
#					limit = {
#						has_province_modifier = nea_hagia_sophia_three_v1
#					}
#					remove_province_triggered_modifier = nea_hagia_sophia_three_v1
#					add_province_triggered_modifier = nea_hagia_sophia_four_v1_c2
#				}
#				else_if = {
#					limit = {
#						has_province_modifier = nea_hagia_sophia_three_v2
#					}
#					remove_province_triggered_modifier = nea_hagia_sophia_three_v2
#					add_province_triggered_modifier = nea_hagia_sophia_four_v2_c2
#				}
#			}
#		}
#		else_if = {
#			limit = {
#				950 = {
#					has_province_flag = nhs_contructing_nea_hagia_sophia_four
#				}
#			}
#			950 = {
#				remove_province_triggered_modifier = nea_hagia_sophia_three_v3
#				add_province_triggered_modifier = nea_hagia_sophia_four_v3_c2
#			}
#		}
#	}
	
	option = { #The largest mosaics should show the holy triangle, +devotion, +global_missionary_strength
		name = "nhs_mission_events.6.c"
		#custom_tooltip = nhs_nea_hagia_holy_tt
		custom_tooltip = nea_hagia_sophia_four_vx_c3_tt
		hidden_effect = {
			if = {
				limit = {
					953 = {
						has_province_flag = nhs_contructing_nea_hagia_sophia_four
					}
				}
				953 = {
					if = {
						limit = {
							has_province_modifier = nea_hagia_sophia_three_v1
						}
						remove_province_triggered_modifier = nea_hagia_sophia_three_v1
						add_province_triggered_modifier = nea_hagia_sophia_four_v1_c3
					}
					else_if = {
						limit = {
							has_province_modifier = nea_hagia_sophia_three_v2
						}
						remove_province_triggered_modifier = nea_hagia_sophia_three_v2
						add_province_triggered_modifier = nea_hagia_sophia_four_v2_c3
					}
				}
			}
			else_if = {
				limit = {
					950 = {
						has_province_flag = nhs_contructing_nea_hagia_sophia_four
					}
				}
				950 = {
					remove_province_triggered_modifier = nea_hagia_sophia_three_v3
					add_province_triggered_modifier = nea_hagia_sophia_four_v3_c3
				}
			}
		}
	}
	
#	option = { #They should be shown equally, little bit of both
#		name = "nhs_mission_events.1.a"
#		trigger = {
#			monarchy = yes
#		}
#		custom_tooltip = nhs_nea_hagia_holy_tt
#	}
#	
#	option = { #They should be shown equally, little bit of both
#		name = "nhs_mission_events.1.a"
#		trigger = {
#			nhs_condition_all_ely = { KOMANDA = tag }
#		}
#		custom_tooltip = nhs_nea_hagia_holy_tt
#	}
}

#Nea Hagia Sophia event finished
country_event = {
	id = nhs_mission_events.7
	title = nhs_mission_events.7.t
	desc = nhs_mission_events.7.d
	picture = nhs_Hagia_Sophia
	
	trigger = {
		has_country_flag = nhs_building_hagia_sophia
		religion_group = christian
		OR = {
			AND = {
				owns = 953
				953 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_four days = 730 }
					# has_province_flag = nhs_contructing_nea_hagia_sophia_four
					# has_great_project = nea_hagia_sophia
				}
			}
			AND = {
				owns = 950
				950 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_four days = 730 }
					# has_province_flag = nhs_contructing_nea_hagia_sophia_four
					# has_great_project = nea_hagia_sophia
				}
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				953 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_four days = 730 }
				}
			}
			953 = {
				clr_province_flag = nhs_contructing_nea_hagia_sophia_four
				save_event_target_as = great_ph_target
				if = {
					limit = {
						has_province_modifier = nea_hagia_sophia_four_v1_c1
					}
					remove_province_triggered_modifier = nea_hagia_sophia_four_v1_c1
					add_province_triggered_modifier = nea_hagia_sophia_finished_v1_c1
				}
				else_if = {
					limit = {
						has_province_modifier = nea_hagia_sophia_four_v2_c1
					}
					remove_province_triggered_modifier = nea_hagia_sophia_four_v2_c1
					add_province_triggered_modifier = nea_hagia_sophia_finished_v2_c1
				}
				else_if = {
					limit = {
						has_province_modifier = nea_hagia_sophia_four_v1_c2
					}
					remove_province_triggered_modifier = nea_hagia_sophia_four_v1_c2
					add_province_triggered_modifier = nea_hagia_sophia_finished_v1_c2
				}
				else_if = {
					limit = {
						has_province_modifier = nea_hagia_sophia_four_v2_c2
					}
					remove_province_triggered_modifier = nea_hagia_sophia_four_v2_c2
					add_province_triggered_modifier = nea_hagia_sophia_finished_v2_c2
				}
				else_if = {
					limit = {
						has_province_modifier = nea_hagia_sophia_four_v1_c3
					}
					remove_province_triggered_modifier = nea_hagia_sophia_four_v1_c3
					add_province_triggered_modifier = nea_hagia_sophia_finished_v1_c3
				}
				else_if = {
					limit = {
						has_province_modifier = nea_hagia_sophia_four_v2_c3
					}
					remove_province_triggered_modifier = nea_hagia_sophia_four_v2_c3
					add_province_triggered_modifier = nea_hagia_sophia_finished_v2_c3
				}
			}
		}
		else_if = {
			limit = {
				950 = {
					has_province_flag = nhs_building_hagia_sophia_province
					had_province_flag = { flag = nhs_contructing_nea_hagia_sophia_four days = 730 }
				}
			}
			950 = {
				clr_province_flag = nhs_contructing_nea_hagia_sophia_four
				save_event_target_as = great_ph_target
				if = {
					limit = {
						has_province_modifier = nea_hagia_sophia_four_v3_c1
					}
					remove_province_triggered_modifier = nea_hagia_sophia_four_v3_c1
					add_province_triggered_modifier = nea_hagia_sophia_finished_v3_c1
				}
				else_if = {
					limit = {
						has_province_modifier = nea_hagia_sophia_four_v3_c2
					}
					remove_province_triggered_modifier = nea_hagia_sophia_four_v3_c2
					add_province_triggered_modifier = nea_hagia_sophia_finished_v3_c2
				}
				else_if = {
					limit = {
						has_province_modifier = nea_hagia_sophia_four_v3_c3
					}
					remove_province_triggered_modifier = nea_hagia_sophia_four_v3_c3
					add_province_triggered_modifier = nea_hagia_sophia_finished_v3_c3
				}
			}
		}
	}

	option = { 
		name = "nhs_mission_events.7.a"
		event_target:great_ph_target = {
			if = {
				limit = {
					province_id = 953
				}
				hidden_effect = {
					add_great_project = nea_hagia_sophia
				}
				custom_tooltip = nhs_hagia_sophia_finished_tt
			}
			else = {
				hidden_effect = {
					add_great_project = nea_hagia_sophia2
				}
				custom_tooltip = nhs_hagia_sophia_finished_tt
			}
		}
		clr_country_flag = nhs_building_hagia_sophia
	}
}

#Nea Hagia Sophia start, turned off
province_event = {
	id = nhs_mission_events.8
	title = nhs_mission_events.8.t
	desc = nhs_mission_events.8.d
	picture = nhs_Hagia_Sophia
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					950 = {
						OR = {
							has_province_flag = nhs_contructing_nea_hagia_sophia_four
							has_province_flag = nhs_contructing_nea_hagia_sophia_three
							has_province_flag = nhs_contructing_nea_hagia_sophia_two
							has_province_flag = nhs_contructing_nea_hagia_sophia_one
						}
					}
				}
				950 = {
					save_event_target_as = great_ph_target
				}
			}
			else_if = {
				limit = {
					953 = {
						OR = {
							has_province_flag = nhs_contructing_nea_hagia_sophia_four
							has_province_flag = nhs_contructing_nea_hagia_sophia_three
							has_province_flag = nhs_contructing_nea_hagia_sophia_two
							has_province_flag = nhs_contructing_nea_hagia_sophia_one
						}
					}
				}
				953 = {
					save_event_target_as = great_ph_target
				}
			}
		}
	}
	
	trigger = {
		OR = {
			owns = 953
			owns = 950
		}
		religion_group = christian
		NOT = { has_country_flag = nhs_building_hagia_sophia }
		953 = {
			NOT = { has_great_project = nea_hagia_sophia }
		}
		950 = {
			NOT = { has_great_project = nea_hagia_sophia2 }
		}
		OR = {
			950 = {
				OR = {
					has_province_flag = nhs_contructing_nea_hagia_sophia_four
					has_province_flag = nhs_contructing_nea_hagia_sophia_three
					has_province_flag = nhs_contructing_nea_hagia_sophia_two
					has_province_flag = nhs_contructing_nea_hagia_sophia_one
				}
			}
			953 = {
				OR = {
					has_province_flag = nhs_contructing_nea_hagia_sophia_four
					has_province_flag = nhs_contructing_nea_hagia_sophia_three
					has_province_flag = nhs_contructing_nea_hagia_sophia_two
					has_province_flag = nhs_contructing_nea_hagia_sophia_one
				}
			}
		}
	}

	option = {
		name = "nhs_mission_events.8.a"
		custom_tooltip = nhs_continue_hagia_tt
	}
}

#Parthenon, choice where?
country_event = {
	id = nhs_mission_events.9
	title = nhs_mission_events.9.t
	desc = nhs_mission_events.9.d
	picture = nhs_Akropolis

	is_triggered_only = yes

	option = { #In the middle of the city, lowers one tax dev, decreases dev cost, +max_absolutism
		name = "nhs_mission_events.9.a"
		#custom_tooltip = nhs_nea_parthenon_city_tt
		953 = {
			tooltip = {
				add_great_project = nea_parthenon
			}
			custom_tooltip = nea_parthenon_one_v1_tt
			set_province_flag = nhs_building_parthenon_province
			set_province_flag = nhs_contructing_nea_parthenon_one
			add_base_tax = -1
			hidden_effect = {
				add_province_triggered_modifier = nea_parthenon_one_v1
			}
		}
	}
	
	option = { #Outside of the city, accessible to pilgrims, +1 true faith
		name = "nhs_mission_events.9.b"
		#custom_tooltip = nhs_nea_parthenon_outside_city_tt
		953 = {
			tooltip = {
				add_great_project = nea_parthenon
			}
			custom_tooltip = nea_parthenon_one_v2_tt
			set_province_flag = nhs_building_parthenon_province
			set_province_flag = nhs_contructing_nea_parthenon_one
			hidden_effect = {
				add_province_triggered_modifier = nea_parthenon_one_v2
			}
		}
		
	}
	
	option = { #In the bay, for everyone to see, decreases dev cost in Cheasapeake, -prestige decay, +trade efficiency
		name = "nhs_mission_events.9.c"
		#custom_tooltip = nhs_nea_parthenon_bay_tt
		950 = {
			tooltip = {
				add_great_project = nea_parthenon2
			}
			custom_tooltip = nea_parthenon_one_v3_tt
			set_province_flag = nhs_building_parthenon_province
			set_province_flag = nhs_contructing_nea_parthenon_one
			hidden_effect = {
				add_province_triggered_modifier = nea_parthenon_one_v3
			}
		}
		
	}
}

#Parthenon event 1/4, ?
country_event = {
	id = nhs_mission_events.101
	title = nhs_mission_events.101.t
	desc = nhs_mission_events.101.d
	picture = nhs_Akropolis
	
	trigger = {
		has_country_flag = nhs_building_parthenon
		OR = {
			religion = pantheon_worship
			religion = aztlan_worship
		}
		OR = {
			AND = {
				owns = 953
				953 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_one days = 730 }
				}
			}
			AND = {
				owns = 950
				950 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_one days = 730 }
				}
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				953 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_one days = 730 }
				}
			}
			953 = {
				clr_province_flag = nhs_contructing_nea_parthenon_one
				set_province_flag = nhs_contructing_nea_parthenon_two
				if = {
					limit = {
						has_province_modifier = nea_parthenon_one_v1
					}
					remove_province_triggered_modifier = nea_parthenon_one_v1
					add_province_triggered_modifier = nea_parthenon_two_v1
				}
				else_if = {
					limit = {
						has_province_modifier = nea_parthenon_one_v2
					}
					remove_province_triggered_modifier = nea_parthenon_one_v2
					add_province_triggered_modifier = nea_parthenon_two_v2
				}
			}
		}
		else_if = {
			limit = {
				950 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_one days = 730 }
				}
			}
			950 = {
				clr_province_flag = nhs_contructing_nea_parthenon_one
				set_province_flag = nhs_contructing_nea_parthenon_two
				remove_province_triggered_modifier = nea_parthenon_one_v3
				add_province_triggered_modifier = nea_parthenon_two_v3
			}
		}
	}

	option = { 
		name = "nhs_mission_events.101.a"
		
	}
}

#Parthenon event 2/4, ?
country_event = {
	id = nhs_mission_events.111
	title = nhs_mission_events.111.t
	desc = nhs_mission_events.111.d
	picture = nhs_Akropolis
	
	trigger = {
		has_country_flag = nhs_building_parthenon
		OR = {
			religion = pantheon_worship
			religion = aztlan_worship
		}
		OR = {
			AND = {
				owns = 953
				953 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_two days = 730 }
				}
			}
			AND = {
				owns = 950
				950 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_two days = 730 }
				}
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				953 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_two days = 730 }
				}
			}
			953 = {
				clr_province_flag = nhs_contructing_nea_parthenon_two
				set_province_flag = nhs_contructing_nea_parthenon_three
				if = {
					limit = {
						has_province_modifier = nea_parthenon_two_v1
					}
					remove_province_triggered_modifier = nea_parthenon_two_v1
					add_province_triggered_modifier = nea_parthenon_three_v1
				}
				else_if = {
					limit = {
						has_province_modifier = nea_parthenon_two_v2
					}
					remove_province_triggered_modifier = nea_parthenon_two_v2
					add_province_triggered_modifier = nea_parthenon_three_v2
				}
			}
		}
		else_if = {
			limit = {
				950 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_two days = 730 }
				}
			}
			950 = {
				clr_province_flag = nhs_contructing_nea_parthenon_two
				set_province_flag = nhs_contructing_nea_parthenon_three
				remove_province_triggered_modifier = nea_parthenon_two_v3
				add_province_triggered_modifier = nea_parthenon_three_v3
			}
		}
	}

	option = { 
		name = "nhs_mission_events.111.a"
	
	}
}

#Parthenon 3/4, decoration
country_event = {
	id = nhs_mission_events.121
	title = nhs_mission_events.121.t
	desc = nhs_mission_events.121.d
	picture = nhs_Akropolis
	
	trigger = {
		has_country_flag = nhs_building_parthenon
		OR = {
			religion = pantheon_worship
			religion = aztlan_worship
		}
		OR = {
			AND = {
				owns = 953
				953 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_three days = 730 }
				}
			}
			AND = {
				owns = 950
				950 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_three days = 730 }
				}
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				953 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_three days = 730 }
				}
			}
			953 = {
				clr_province_flag = nhs_contructing_nea_parthenon_three
				set_province_flag = nhs_contructing_nea_parthenon_four
			}
		}
		else_if = {
			limit = {
				950 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_three days = 730 }
				}
			}
			950 = {
				clr_province_flag = nhs_contructing_nea_parthenon_three
				set_province_flag = nhs_contructing_nea_parthenon_four
			}
		}
	}

	option = { #The largest mosaics should show emperors/empressesm, +yearly_absolutism, legitimacy
		name = "nhs_mission_events.121.a"
		#custom_tooltip = nhs_parthenon_barbaroi
		custom_tooltip = nea_parthenon_four_vx_c1_tt
		hidden_effect = {
			if = {
				limit = {
					953 = {
						has_province_flag = nhs_contructing_nea_parthenon_four
					}
				}
				953 = {
					if = {
						limit = {
							has_province_modifier = nea_parthenon_three_v1
						}
						remove_province_triggered_modifier = nea_parthenon_three_v1
						add_province_triggered_modifier = nea_parthenon_four_v1_c1
					}
					else_if = {
						limit = {
							has_province_modifier = nea_parthenon_three_v2
						}
						remove_province_triggered_modifier = nea_parthenon_three_v2
						add_province_triggered_modifier = nea_parthenon_four_v2_c1
					}
				}
			}
			else_if = {
				limit = {
					950 = {
						has_province_flag = nhs_contructing_nea_parthenon_four
					}
				}
				950 = {
					remove_province_triggered_modifier = nea_parthenon_three_v3
					add_province_triggered_modifier = nea_parthenon_four_v3_c1
				}
			}
		}
	}
	
	option = {
		name = "nhs_mission_events.121.b"
		custom_tooltip = nea_parthenon_four_vx_c2_tt
		#custom_tooltip = nhs_parthenon_mixed_tt
		hidden_effect = {
			if = {
				limit = {
					953 = {
						has_province_flag = nhs_contructing_nea_parthenon_four
					}
				}
				953 = {
					if = {
						limit = {
							has_province_modifier = nea_parthenon_three_v1
						}
						remove_province_triggered_modifier = nea_parthenon_three_v1
						add_province_triggered_modifier = nea_parthenon_four_v1_c2
					}
					else_if = {
						limit = {
							has_province_modifier = nea_parthenon_three_v2
						}
						remove_province_triggered_modifier = nea_parthenon_three_v2
						add_province_triggered_modifier = nea_parthenon_four_v2_c2
					}
				}
			}
			else_if = {
				limit = {
					950 = {
						has_province_flag = nhs_contructing_nea_parthenon_four
					}
				}
				950 = {
					remove_province_triggered_modifier = nea_parthenon_three_v3
					add_province_triggered_modifier = nea_parthenon_four_v3_c2
				}
			}
		}
	}
	
	option = { #The largest mosaics should show the holy triangle, +devotion, +global_missionary_strength
		name = "nhs_mission_events.121.c"
		#custom_tooltip = nhs_parthenon_holy_tt
		custom_tooltip = nea_parthenon_four_vx_c3_tt
		hidden_effect = {
			if = {
				limit = {
					953 = {
						has_province_flag = nhs_contructing_nea_parthenon_four
					}
				}
				953 = {
					if = {
						limit = {
							has_province_modifier = nea_parthenon_three_v1
						}
						remove_province_triggered_modifier = nea_parthenon_three_v1
						add_province_triggered_modifier = nea_parthenon_four_v1_c3
					}
					else_if = {
						limit = {
							has_province_modifier = nea_parthenon_three_v2
						}
						remove_province_triggered_modifier = nea_parthenon_three_v2
						add_province_triggered_modifier = nea_parthenon_four_v2_c3
					}
				}
			}
			else_if = {
				limit = {
					950 = {
						has_province_flag = nhs_contructing_nea_parthenon_four
					}
				}
				950 = {
					remove_province_triggered_modifier = nea_parthenon_three_v3
					add_province_triggered_modifier = nea_parthenon_four_v3_c3
				}
			}
		}
	}
}

#Parthenon event finished
country_event = {
	id = nhs_mission_events.131
	title = nhs_mission_events.131.t
	desc = nhs_mission_events.131.d
	picture = nhs_Akropolis
	
	trigger = {
		has_country_flag = nhs_building_parthenon
		OR = {
			religion = pantheon_worship
			religion = aztlan_worship
		}
		OR = {
			AND = {
				owns = 953
				953 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_four days = 730 }
					# has_province_flag = nhs_contructing_nea_parthenon_four
					# has_great_project = nea_parthenon
				}
			}
			AND = {
				owns = 950
				950 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_four days = 730 }
					# has_province_flag = nhs_contructing_nea_parthenon_four
					# has_great_project = nea_parthenon2
				}
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				953 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_four days = 730 }
					# has_great_project = nea_parthenon
				}
			}
			953 = {
				clr_province_flag = nhs_contructing_nea_parthenon_four
				save_event_target_as = great_p_target
				if = {
					limit = {
						has_province_modifier = nea_parthenon_four_v1_c1
					}
					remove_province_triggered_modifier = nea_parthenon_four_v1_c1
					add_province_triggered_modifier = nea_parthenon_finished_v1_c1
				}
				else_if = {
					limit = {
						has_province_modifier = nea_parthenon_four_v2_c1
					}
					remove_province_triggered_modifier = nea_parthenon_four_v2_c1
					add_province_triggered_modifier = nea_parthenon_finished_v2_c1
				}
				else_if = {
					limit = {
						has_province_modifier = nea_parthenon_four_v1_c2
					}
					remove_province_triggered_modifier = nea_parthenon_four_v1_c2
					add_province_triggered_modifier = nea_parthenon_finished_v1_c2
				}
				else_if = {
					limit = {
						has_province_modifier = nea_parthenon_four_v2_c2
					}
					remove_province_triggered_modifier = nea_parthenon_four_v2_c2
					add_province_triggered_modifier = nea_parthenon_finished_v2_c2
				}
				else_if = {
					limit = {
						has_province_modifier = nea_parthenon_four_v1_c3
					}
					remove_province_triggered_modifier = nea_parthenon_four_v1_c3
					add_province_triggered_modifier = nea_parthenon_finished_v1_c3
				}
				else_if = {
					limit = {
						has_province_modifier = nea_parthenon_four_v2_c3
					}
					remove_province_triggered_modifier = nea_parthenon_four_v2_c3
					add_province_triggered_modifier = nea_parthenon_finished_v2_c3
				}
			}
		}
		else_if = {
			limit = {
				950 = {
					has_province_flag = nhs_building_parthenon_province
					had_province_flag = { flag = nhs_contructing_nea_parthenon_four days = 730 }
					# has_great_project = nea_parthenon2
				}
			}
			950 = {
				clr_province_flag = nhs_contructing_nea_parthenon_four
				save_event_target_as = great_p_target
				if = {
					limit = {
						has_province_modifier = nea_parthenon_four_v3_c1
					}
					remove_province_triggered_modifier = nea_parthenon_four_v3_c1
					add_province_triggered_modifier = nea_parthenon_finished_v3_c1
				}
				else_if = {
					limit = {
						has_province_modifier = nea_parthenon_four_v3_c2
					}
					remove_province_triggered_modifier = nea_parthenon_four_v3_c2
					add_province_triggered_modifier = nea_parthenon_finished_v3_c2
				}
				else_if = {
					limit = {
						has_province_modifier = nea_parthenon_four_v3_c3
					}
					remove_province_triggered_modifier = nea_parthenon_four_v3_c3
					add_province_triggered_modifier = nea_parthenon_finished_v3_c3
				}
			}
		}
	}

	option = { 
		name = nhs_mission_events.131.a
		event_target:great_p_target = {
			if = {
				limit = {
					province_id = 953
				}
				hidden_effect = {
					add_great_project = nea_parthenon
				}
				custom_tooltip = nhs_temple_of_mable_emperors_finished_tt
			}
			else = {
				hidden_effect = {
					add_great_project = nea_parthenon2
				}
				custom_tooltip = nhs_temple_of_mable_emperors_finished_tt
			}
		}
		clr_country_flag = nhs_building_parthenon
	}
}

#Parthenon start, turned off
country_event = {
	id = nhs_mission_events.141
	title = nhs_mission_events.141.t
	desc = {
		trigger = {
			religion = pantheon_worship
		}
		desc = nhs_mission_events.141.da
	}
	desc = {
		trigger = {
			religion = aztlan_worship
		}
		desc = nhs_mission_events.141.db
	}
	picture = nhs_Akropolis
	
	trigger = {
		OR = {
			religion = pantheon_worship
			religion = aztlan_worship
		}
		NOT = { has_country_flag = nhs_building_parthenon }
		953 = {
			NOT = { has_great_project = nea_parthenon }
		}
		950 = {
			NOT = { has_great_project = nea_parthenon2 }
		}
		OR = {
			AND = {
				owns = 953
				950 = {
					OR = {
						has_province_flag = nhs_contructing_nea_parthenon_four
						has_province_flag = nhs_contructing_nea_parthenon_three
						has_province_flag = nhs_contructing_nea_parthenon_two
						has_province_flag = nhs_contructing_nea_parthenon_one
					}
				}
			}
			AND = {
				owns = 950
				953 = {
					OR = {
						has_province_flag = nhs_contructing_nea_parthenon_four
						has_province_flag = nhs_contructing_nea_parthenon_three
						has_province_flag = nhs_contructing_nea_parthenon_two
						has_province_flag = nhs_contructing_nea_parthenon_one
					}
				}
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					950 = {
						OR = {
							has_province_flag = nhs_contructing_nea_parthenon_four
							has_province_flag = nhs_contructing_nea_parthenon_three
							has_province_flag = nhs_contructing_nea_parthenon_two
							has_province_flag = nhs_contructing_nea_parthenon_one
						}
					}
				}
				950 = {
					save_event_target_as = great_p_target
				}
			}
			else_if = {
				limit = {
					953 = {
						OR = {
							has_province_flag = nhs_contructing_nea_parthenon_four
							has_province_flag = nhs_contructing_nea_parthenon_three
							has_province_flag = nhs_contructing_nea_parthenon_two
							has_province_flag = nhs_contructing_nea_parthenon_one
						}
					}
				}
				953 = {
					save_event_target_as = great_p_target
				}
			}
		}
	}

	option = {
		name = "nhs_mission_events.141.a"
		custom_tooltip = nhs_continue_parthenon_tt
	}
}

#Spartan events
country_event = {
	id = nhs_mission_events.10
	title = nhs_mission_events.10.t
	desc = nhs_mission_events.10.d
	picture = Tenochtitlan_Expanded_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = ELY
		government = monarchy
		has_country_flag = nhs_expanding_north_completed
		NOT = { has_country_flag = nhs_gain_spartan_pu }
		OR = {
			AND = {
				exists = MSN
				MSN = {
					NOT = { is_subject_of = ROOT }
					OR = {
						dynasty = "Spartakon"
						#ruler_culture = high_elysian
						#ruler_culture = apogonoi
					}
				}
			}
			AND = {
				exists = MSG
				MSG = {
					NOT = { is_subject_of = ROOT }
					OR = {
						dynasty = "Spartakon"
						#ruler_culture = high_elysian
						#ruler_culture = apogonoi
					}
				}
			}
		}
		
	}
	
	immediate = {
		set_country_flag = nhs_gain_spartan_pu
	}

	option = {
		name = nhs_mission_events.10.a
		custom_tooltip = nhs_gain_spartan_pu_tt
	}
}

#Spartan events
country_event = {
	id = nhs_mission_events.11
	title = nhs_mission_events.11.t
	desc = nhs_mission_events.11.d
	picture = Tenochtitlan_Expanded_eventPicture
	
	trigger = {
		tag = ELY
		government = monarchy
		has_country_flag = nhs_expanding_north_completed
		NOT = { has_country_flag = nhs_gain_spartan_pu_restore_dynasty }
		OR = {
			AND = {
				exists = MSN
				MSN = {
					NOT = { is_subject_of = ROOT }
					NOT = {
						dynasty = "Spartakon"
						#ruler_culture = high_elysian
						#ruler_culture = apogonoi
					}
				}
			}
			AND = {
				exists = MSG
				MSG = {
					NOT = { is_subject_of = ROOT }
					NOT = {
						dynasty = "Spartakon"
						#ruler_culture = high_elysian
						#ruler_culture = apogonoi
					}
				}
			}
		}
		
	}
	
	immediate = {
		set_country_flag = nhs_gain_spartan_pu_restore_dynasty
	}

	option = {
		name = "nhs_mission_events.11.a"
		custom_tooltip = nhs_gain_restore_family_cb_over_sparta_tt
	}
}

#Spartan events
country_event = {
	id = nhs_mission_events.12
	title = nhs_mission_events.12.t
	desc = nhs_mission_events.12.d
	picture = Tenochtitlan_Expanded_eventPicture
	
	trigger = {
		tag = ELY
		has_country_flag = nhs_expanding_north_completed
		NOT = { has_country_flag = nhs_gain_spartan_cores }
		OR = {
			MSN = {
				is_subject_of = ROOT
			}
			MSG = {
				is_subject_of = ROOT
			}
		}
	}
	
	immediate = {
		set_country_flag = nhs_gain_spartan_cores
	}

	option = {
		name = "nhs_mission_events.12.a"
		if = {
			limit = {
				MSN = {
					is_subject_of = ROOT
				}
			}
			mesoamerica_pgroup = {
				limit = {
					NOT = { is_core = MSN }
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				add_core = MSN
			}
		}
		else_if = {
			limit = {
				MSG = {
					is_subject_of = ROOT
				}
			}
			mesoamerica_pgroup = {
				limit = {
					NOT = { is_core = MSG }
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
				add_core = MSG
			}
		}
	}
}

#Spartan events
country_event = {
	id = nhs_mission_events.13
	title = nhs_mission_events.13.t
	desc = nhs_mission_events.13.d
	picture = Tenochtitlan_Expanded_eventPicture
	
	trigger = {
		tag = ELY
		has_country_flag = nhs_expanding_north_completed
		NOT = { has_country_flag = nhs_gain_spartan_claims }
		NOT = { exists = MSN }
		NOT = { exists = MSG }
		OR = {
			any_province = {
				NOT = { is_core = ROOT }
				NOT = { owned_by = ROOT }
				NOT = { is_permanent_claim = ROOT }
				is_core = MSN
			}
			any_province = {
				NOT = { is_core = ROOT }
				NOT = { owned_by = ROOT }
				NOT = { is_permanent_claim = ROOT }
				is_core = MSG
			}
		}
	}
	
	immediate = {
		set_country_flag = nhs_gain_spartan_claims
	}

	option = { #The largest mosaics should show emperors/empressesm, +yearly_absolutism, legitimacy
		name = "nhs_mission_events.13.a"
		every_province = {
			limit = {
				OR = {
					is_core = MSN
					is_core = MSG
				}
				NOT = { is_core = ROOT }
				NOT = { owned_by = ROOT }
				NOT = { is_permanent_claim = ROOT }
			}
			add_permanent_claim = ROOT
		}
	}
}

#Southern integration events
province_event = {
	id = nhs_mission_events.14
	title = nhs_mission_events.14.t
	desc = nhs_mission_events.14.d
	picture = meso_american_city_eventPicture
	
	hidden = yes
	
	trigger = {
		OR = {
			province_group = mesoamerica_pgroup
			culture_group = spartakian_group
		}
		owner = {
			OR = {
				tag = ELY
				tag = NHS
			}
			has_country_flag = nhs_expanding_south_complete
		}
		OR = {
			owner = {
				NOT = { culture_group = ROOT }
			}
			has_province_modifier = nhs2_spartan_independence
		}
		OR = {
			had_province_flag = { flag = nhs_mesoamerican_integration2920 days = 2920 }
			had_province_flag = { flag = nhs_mesoamerican_integration3650 days = 3650 }
			had_province_flag = { flag = nhs_mesoamerican_integration4380 days = 4380 }
		}
	}
	
	immediate = {
		clr_province_flag = nhs_mesoamerican_integration2920
		clr_province_flag = nhs_mesoamerican_integration3650
		clr_province_flag = nhs_mesoamerican_integration4380
		change_culture = lakonian
		if = {
			limit = {
				has_province_modifier = nhs2_spartan_independence
			}
			remove_province_modifier = nhs2_spartan_independence
		}
	}
	
	option = {
		name = "nhs_mission_events.14.a"
		
	}
}

#Southern integration events
country_event = {
	id = nhs_mission_events.15
	title = nhs_mission_events.14.t
	desc = nhs_mission_events.14.d
	picture = meso_american_city_eventPicture
	
	hidden = yes
	
	trigger = {
		any_owned_province = {
			OR = {
				province_group = mesoamerica_pgroup
				culture_group = spartakian_group
			}
			OR = {
				has_province_flag = nhs_mesoamerican_integration2920
				has_province_flag = nhs_mesoamerican_integration3650
				has_province_flag = nhs_mesoamerican_integration4380
				has_province_modifier = nhs_mesoamerican_integration_mod
			}
			OR = {
				ROOT = {
					OR = {
						NOT = {
							OR = {
								tag = ELY
								tag = NHS
							}
						}
						NOT = { has_country_flag = nhs_expanding_south_complete }
					}
				}
				AND = {
					culture_group = ROOT
					NOT = { has_province_modifier = nhs2_spartan_independence }
				}
			}
		}
	}
	
	immediate = {
		every_owned_province = {
			limit = {
				OR = {
					province_group = mesoamerica_pgroup
					culture_group = spartakian_group
				}
				OR = {
					has_province_flag = nhs_mesoamerican_integration2920
					has_province_flag = nhs_mesoamerican_integration3650
					has_province_flag = nhs_mesoamerican_integration4380
					has_province_modifier = nhs_mesoamerican_integration_mod
				}
				OR = {
					ROOT = {
						OR = {
							NOT = {
								OR = {
									tag = ELY
									tag = NHS
								}
							}
							NOT = { has_country_flag = nhs_expanding_south_complete }
						}
					}
					AND = {
						culture_group = ROOT
						NOT = { has_province_modifier = nhs2_spartan_independence }
					}
				}
			}
			if = {
				limit = {
					has_province_modifier = nhs_mesoamerican_integration_mod
				}
				remove_province_modifier = nhs_mesoamerican_integration_mod
			}
			clr_province_flag = nhs_mesoamerican_integration2920
			clr_province_flag = nhs_mesoamerican_integration3650
			clr_province_flag = nhs_mesoamerican_integration4380
		}
	}

	option = {
		name = "nhs_mission_events.14.a"
		
	}
}

#Southern integration events
province_event = {
	id = nhs_mission_events.16
	title = nhs_mission_events.14.t
	desc = nhs_mission_events.14.d
	picture = meso_american_city_eventPicture
	
	hidden = yes
	
	trigger = {
		owner = {
			OR = {
				tag = ELY
				tag = NHS
			}
			has_country_flag = nhs_expanding_south_complete
		}
		OR = {
			province_group = mesoamerica_pgroup
			culture_group = spartakian_group
		}
		NOT = {
			has_province_flag = nhs_mesoamerican_integration2920
			has_province_flag = nhs_mesoamerican_integration3650
			has_province_flag = nhs_mesoamerican_integration4380
		}
		OR = {
			owner = {
				NOT = { culture_group = ROOT }
			}
			has_province_modifier = nhs2_spartan_independence
		}
	}
	
	immediate = {
		random_list = {
			33 = {
				set_province_flag = nhs_mesoamerican_integration2920
				add_province_modifier = {
					name = nhs_mesoamerican_integration_mod
					duration = 2920
				}
			}
			33 = {
				set_province_flag = nhs_mesoamerican_integration3650
				add_province_modifier = {
					name = nhs_mesoamerican_integration_mod
					duration = 3650
				}
				
			}
			33 = {
				set_province_flag = nhs_mesoamerican_integration4380
				add_province_modifier = {
					name = nhs_mesoamerican_integration_mod
					duration = 4380
				}
			}
		}
	}

	option = {
		name = "nhs_mission_events.14.a"
		
	}
}

#Europeans converting
country_event = {
	id = nhs_mission_events.17
	title = nhs_mission_events.17.t
	desc = nhs_mission_events.17.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes

	option = {
		name = "nhs_mission_events.14.a"
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.5
				total_development = 150
			}
			modifier = {
				factor = 0.75
				total_development = 100
				NOT = { total_development = 150 }
			}
			modifier = {
				factor = 0.6
				total_development = 50
				NOT = { total_development = 100 }
			}
			modifier = {
				factor = 0.6
				NOT = { total_development = 50 }
			}
			modifier = {
				factor = 5
				any_country = {
					tag = ROOT
					reverse_has_opinion = { who = ROOT value = 200 }
				}
			}
			modifier = {
				factor = 3
				any_country = {
					tag = ROOT
					reverse_has_opinion = { who = ROOT value = 150 }
				}
			}
			modifier = {
				factor = 2
				any_country = {
					tag = ROOT
					reverse_has_opinion = { who = ROOT value = 100 }
				}
			}
			modifier = {
				factor = 1.5
				any_country = {
					tag = ROOT
					reverse_has_opinion = { who = ROOT value = 50 }
				}
			}
		}
		change_religion = elysian_orthodoxy
		capital_scope = {
			change_religion = ROOT
		}
		every_country = {
			limit = {
				is_subject_of = ROOT
			}
			change_religion = elysian_orthodoxy
			hidden_effect = {
				capital_scope = {
					change_religion = ROOT
				}
				every_owned_province = {
					limit = {
						religion_group = christian
						NOT = { development = 10 }
					}
					random = {
						chance = 80
						change_religion = elysian_orthodoxy
					}
				}
				every_owned_province = {
					limit = {
						religion_group = christian
						development = 10
						NOT = { development = 20 }
					}
					random = {
						chance = 60
						change_religion = elysian_orthodoxy
					}
				}
				every_owned_province = {
					limit = {
						religion_group = christian
						development = 20
						NOT = { development = 30 }
					}
					random = {
						chance = 40
						change_religion = elysian_orthodoxy
					}
				}
				every_owned_province = {
					limit = {
						religion_group = christian
						development = 30
						NOT = { development = 40 }
					}
					random = {
						chance = 20
						change_religion = elysian_orthodoxy
					}
				}
			}
		}
		hidden_effect = {
			every_owned_province = {
				limit = {
					religion_group = christian
					NOT = { development = 10 }
				}
				random = {
					chance = 80
					change_religion = elysian_orthodoxy
				}
			}
			every_owned_province = {
				limit = {
					religion_group = christian
					development = 10
					NOT = { development = 20 }
				}
				random = {
					chance = 60
					change_religion = elysian_orthodoxy
				}
			}
			every_owned_province = {
				limit = {
					religion_group = christian
					development = 20
					NOT = { development = 30 }
				}
				random = {
					chance = 40
					change_religion = elysian_orthodoxy
				}
			}
			every_owned_province = {
				limit = {
					religion_group = christian
					development = 30
					NOT = { development = 40 }
				}
				random = {
					chance = 20
					change_religion = elysian_orthodoxy
				}
			}
		}
	}
	option = {
		name = "nhs_mission_events.14.a"
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				total_development = 150
			}
			modifier = {
				factor = 1.2
				total_development = 100
				NOT = { total_development = 150 }
			}
			modifier = {
				factor = 2
				any_country = {
					tag = ROOT
					NOT = { reverse_has_opinion = { who = ROOT value = 0 } }
				}
			}
			modifier = {
				factor = 3
				any_country = {
					tag = ROOT
					NOT = { reverse_has_opinion = { who = ROOT value = 50 } }
				}
			}
			modifier = {
				factor = 4
				any_country = {
					tag = ROOT
					NOT = { reverse_has_opinion = { who = ROOT value = 100 } }
				}
			}
			modifier = {
				factor = 5
				any_country = {
					tag = ROOT
					NOT = { reverse_has_opinion = { who = ROOT value = 150 } }
				}
			}
			modifier = {
				factor = 10
				any_country = {
					tag = ROOT
					NOT = { reverse_has_opinion = { who = ROOT value = 190 } }
				}
			}
		}
	}
}