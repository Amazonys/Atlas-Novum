namespace = AN_migrate

province_event = { #Religious expulsion
	id = AN_migrate.1
	title = "AN_migrate.1.t"
	desc = "AN_migrate.1.desc"
	picture = CITY_DEVELOPMENT_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	trigger = { 
	}
	
	immediate = {
		if = {
			limit = {
				has_province_flag = AN_expel_maj
			}
			if = {
				limit = {
					AN_linked_culture_religion_maj = yes
				}
				12000 = {
					change_variable = { which = AN_province_culture which = PREV }
					set_variable = { which = AN_minority_culture which = AN_province_culture }
					change_variable = { which = AN_province_religion which = PREV }
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					change_culture = AN_province_culture
					change_religion = AN_province_religion
				}
			}
			else_if = {
				limit = {
					AN_linked_culture_religion_min = yes
				}
				12000 = {
					change_variable = { which = AN_minority_culture which = PREV }
					set_variable = { which = AN_province_culture which = AN_minority_culture }
					change_variable = { which = AN_province_religion which = PREV }
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					change_culture = AN_minority_culture
					change_religion = AN_province_religion
				}
			}
			else = {
				12000 = {
					change_variable = { which = AN_province_religion which = PREV }
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					change_religion = AN_province_religion
				}
			}
		}
		else_if = {
			limit = {
				has_province_flag = AN_expel_min
			}
			if = {
				limit = {
					AN_linked_culture_religion_maj = yes
				}
				12000 = {
					change_variable = { which = AN_province_culture which = PREV }
					set_variable = { which = AN_minority_culture which = AN_province_culture }
					change_variable = { which = AN_minority_religion which = PREV }
					set_variable = { which = AN_province_religion which = AN_minority_religion }
					change_culture = AN_province_culture
					change_religion = AN_minority_religion
				}
			}
			else_if = {
				limit = {
					AN_linked_culture_religion_min = yes
				}
				12000 = {
					change_variable = { which = AN_minority_culture which = PREV }
					set_variable = { which = AN_province_culture which = AN_minority_culture }
					change_variable = { which = AN_minority_religion which = PREV }
					set_variable = { which = AN_province_religion which = AN_minority_religion }
					change_culture = AN_minority_culture
					change_religion = AN_minority_religion
				}
			}
			else = {
				12000 = {
					change_variable = { which = AN_minority_religion which = PREV }
					set_variable = { which = AN_province_religion which = AN_minority_religion }
					change_religion = AN_minority_religion
				}
			}
		}
	}
	
	option = { 
		name = "AN_migrate.1.a" #neighboring province
		ai_factor = {
			factor = 200
		}
		trigger = {
			any_neighbor_province = { 
				OR = {
					AND = {
						is_variable_equal = { which = AN_province_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_maj } 
					}
					AND = {
						is_variable_equal = { which = AN_minority_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_min } 
					}
				}
			}
		}
		random_neighbor_province = {
			limit = { 
				OR = {
					AND = {
						is_variable_equal = { which = AN_province_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_maj } 
					}
					AND = {
						is_variable_equal = { which = AN_minority_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_min } 
					}
				}			
			}
			save_event_target_as = AN_migrate_target
		}	
		if = {
			limit = {
				has_province_flag = AN_expel_maj
			}
			if = {
				limit = {
					AN_linked_culture_religion_maj = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					change_culture = variable:ROOT:AN_minority_culture
					set_variable = { which = AN_minority_culture which = AN_province_culture }
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
					change_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_culture
							value = primary_culture
						} 
					}	
					set_variable = { which = AN_minority_culture which = owner } 
					set_variable = { which = AN_minority_culture_size value = 1 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
			else_if = {
				limit = {
					AN_linked_culture_religion_min = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					subtract_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_culture value = 0 } 
					set_variable = { which = AN_minority_culture_size value = 0 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else = {
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
				}
				
				###
				
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
		}
		else_if = {
			limit = {
				has_province_flag = AN_expel_min
			}
			if = {
				limit = {
					AN_linked_culture_religion_maj = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					change_culture = variable:ROOT:AN_minority_culture
					set_variable = { which = AN_minority_culture which = AN_province_culture }
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
					change_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_culture
							value = primary_culture
						} 
					}	
					set_variable = { which = AN_minority_culture which = owner } 
					set_variable = { which = AN_minority_culture_size value = 1 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else_if = {
				limit = {
					AN_linked_culture_religion_min = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					subtract_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_culture value = 0 } 
					set_variable = { which = AN_minority_culture_size value = 0 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else = {
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}
					
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
		}
	}
	
	
	option = { 
		name = "AN_migrate.1.b" #same area
		ai_factor = {
			factor = 100
		}
		trigger = {
			area_for_scope_province = {
				OR = {
					AND = {
						is_variable_equal = { which = AN_province_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_maj } 
					}
					AND = {
						is_variable_equal = { which = AN_minority_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_min } 
					}
				}
			}
		}
		random_province_in_state = {
			limit = {
				OR = {
					AND = {
						is_variable_equal = { which = AN_province_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_maj } 
					}
					AND = {
						is_variable_equal = { which = AN_minority_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_min } 
					}
				}
			}
			save_event_target_as = AN_migrate_target
		}
		if = {
			limit = {
				has_province_flag = AN_expel_maj
			}
			if = {
				limit = {
					AN_linked_culture_religion_maj = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					change_culture = variable:ROOT:AN_minority_culture
					set_variable = { which = AN_minority_culture which = AN_province_culture }
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
					change_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_culture
							value = primary_culture
						} 
					}	
					set_variable = { which = AN_minority_culture which = owner } 
					set_variable = { which = AN_minority_culture_size value = 1 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
			else_if = {
				limit = {
					AN_linked_culture_religion_min = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					subtract_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_culture value = 0 } 
					set_variable = { which = AN_minority_culture_size value = 0 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else = {
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
				}
				
				###
				
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
		}
		else_if = {
			limit = {
				has_province_flag = AN_expel_min
			}
			if = {
				limit = {
					AN_linked_culture_religion_maj = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					change_culture = variable:ROOT:AN_minority_culture
					set_variable = { which = AN_minority_culture which = AN_province_culture }
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
					change_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_culture
							value = primary_culture
						} 
					}	
					set_variable = { which = AN_minority_culture which = owner } 
					set_variable = { which = AN_minority_culture_size value = 1 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else_if = {
				limit = {
					AN_linked_culture_religion_min = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					subtract_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_culture value = 0 } 
					set_variable = { which = AN_minority_culture_size value = 0 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else = {
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}
					
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
		}
	}
	
	
	option = { 
		name = "AN_migrate.1.c" #trade node
		ai_factor = {
			factor = 50
		}
		trigger = {
			any_trade_node_member_province = {
				OR = {
					AND = {
						is_variable_equal = { which = AN_province_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_maj } 
					}
					AND = {
						is_variable_equal = { which = AN_minority_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_min } 
					}
				}
			}
		}
		random_trade_node_member_province = {
			limit = {
				OR = {
					AND = {
						is_variable_equal = { which = AN_province_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_maj } 
					}
					AND = {
						is_variable_equal = { which = AN_minority_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_min } 
					}
				}
			}
			save_event_target_as = AN_migrate_target
		}
		if = {
			limit = {
				has_province_flag = AN_expel_maj
			}
			if = {
				limit = {
					AN_linked_culture_religion_maj = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					change_culture = variable:ROOT:AN_minority_culture
					set_variable = { which = AN_minority_culture which = AN_province_culture }
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
					change_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_culture
							value = primary_culture
						} 
					}	
					set_variable = { which = AN_minority_culture which = owner } 
					set_variable = { which = AN_minority_culture_size value = 1 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
			else_if = {
				limit = {
					AN_linked_culture_religion_min = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					subtract_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_culture value = 0 } 
					set_variable = { which = AN_minority_culture_size value = 0 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else = {
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
				}
				
				###
				
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
		}
		else_if = {
			limit = {
				has_province_flag = AN_expel_min
			}
			if = {
				limit = {
					AN_linked_culture_religion_maj = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					change_culture = variable:ROOT:AN_minority_culture
					set_variable = { which = AN_minority_culture which = AN_province_culture }
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
					change_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_culture
							value = primary_culture
						} 
					}	
					set_variable = { which = AN_minority_culture which = owner } 
					set_variable = { which = AN_minority_culture_size value = 1 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else_if = {
				limit = {
					AN_linked_culture_religion_min = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					subtract_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_culture value = 0 } 
					set_variable = { which = AN_minority_culture_size value = 0 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else = {
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}
					
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
		}
	}
	
	
	option = { 
		name = "AN_migrate.1.d" # under 500
		ai_factor = {
			factor = 25
		}
		trigger = {
			any_province = {
				NOT = {
					province_distance = {
						who = PREV
						distance = 500
					}
				}
				OR = {
					AND = {
						is_variable_equal = { which = AN_province_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_maj } 
					}
					AND = {
						is_variable_equal = { which = AN_minority_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_min } 
					}
				}
			}
		}
		random_province = {
			limit = {
				NOT = {
					province_distance = {
						who = PREV
						distance = 500
					}
				}
				OR = {
					AND = {
						is_variable_equal = { which = AN_province_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_maj } 
					}
					AND = {
						is_variable_equal = { which = AN_minority_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_min } 
					}
				}
			}
			save_event_target_as = AN_migrate_target
		}
		if = {
			limit = {
				has_province_flag = AN_expel_maj
			}
			if = {
				limit = {
					AN_linked_culture_religion_maj = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					change_culture = variable:ROOT:AN_minority_culture
					set_variable = { which = AN_minority_culture which = AN_province_culture }
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
					change_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_culture
							value = primary_culture
						} 
					}	
					set_variable = { which = AN_minority_culture which = owner } 
					set_variable = { which = AN_minority_culture_size value = 1 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
			else_if = {
				limit = {
					AN_linked_culture_religion_min = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					subtract_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_culture value = 0 } 
					set_variable = { which = AN_minority_culture_size value = 0 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else = {
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
				}
				
				###
				
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
		}
		else_if = {
			limit = {
				has_province_flag = AN_expel_min
			}
			if = {
				limit = {
					AN_linked_culture_religion_maj = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					change_culture = variable:ROOT:AN_minority_culture
					set_variable = { which = AN_minority_culture which = AN_province_culture }
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
					change_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_culture
							value = primary_culture
						} 
					}	
					set_variable = { which = AN_minority_culture which = owner } 
					set_variable = { which = AN_minority_culture_size value = 1 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else_if = {
				limit = {
					AN_linked_culture_religion_min = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					subtract_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_culture value = 0 } 
					set_variable = { which = AN_minority_culture_size value = 0 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else = {
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}
					
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
		}
	}
	
	
	option = { 
		name = "AN_migrate.1.e" # over 500
		ai_factor = {
			factor = 10
		}
		trigger = {
			any_province = {
				province_distance = {
					who = PREV
					distance = 500
				}
				OR = {
					AND = {
						is_variable_equal = { which = AN_province_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_maj } 
					}
					AND = {
						is_variable_equal = { which = AN_minority_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_min } 
					}
				}
			}
		}
		random_province = {
			limit = {
				province_distance = {
					who = PREV
					distance = 500
				}
				OR = {
					AND = {
						is_variable_equal = { which = AN_province_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_maj } 
					}
					AND = {
						is_variable_equal = { which = AN_minority_religion which = PREV }
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						NOT = { has_province_flag = AN_expel_min } 
					}
				}
			}
			save_event_target_as = AN_migrate_target
		}
		if = {
			limit = {
				has_province_flag = AN_expel_maj
			}
			if = {
				limit = {
					AN_linked_culture_religion_maj = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					change_culture = variable:ROOT:AN_minority_culture
					set_variable = { which = AN_minority_culture which = AN_province_culture }
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
					change_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_culture
							value = primary_culture
						} 
					}	
					set_variable = { which = AN_minority_culture which = owner } 
					set_variable = { which = AN_minority_culture_size value = 1 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
			else_if = {
				limit = {
					AN_linked_culture_religion_min = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					subtract_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_culture value = 0 } 
					set_variable = { which = AN_minority_culture_size value = 0 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else = {
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
				}
				
				###
				
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:ROOT:AN_minority_religion
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					clr_province_flag = AN_expel_maj
					set_province_flag = AN_expel_min
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 1 } }
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_religion
							value = religion
						} 
					}	
					set_variable = { which = AN_minority_religion which = owner } 
					set_variable = { which = AN_minority_religion_size value = 1 } 
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
		}
		else_if = {
			limit = {
				has_province_flag = AN_expel_min
			}
			if = {
				limit = {
					AN_linked_culture_religion_maj = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					change_culture = variable:ROOT:AN_minority_culture
					set_variable = { which = AN_minority_culture which = AN_province_culture }
				}
				else_if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
					change_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					owner = { 
						export_to_variable = {
							variable_name = AN_minority_culture
							value = primary_culture
						} 
					}	
					set_variable = { which = AN_minority_culture which = owner } 
					set_variable = { which = AN_minority_culture_size value = 1 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else_if = {
				limit = {
					AN_linked_culture_religion_min = yes
				}
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
					
					if = {
						limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
						
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:PREV:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_culture_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					subtract_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_culture value = 0 } 
					set_variable = { which = AN_minority_culture_size value = 0 } 
				}	
				#
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}	
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
				
			}
			else = {
				event_target:AN_migrate_target = {
					if = {
						limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
					}	
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } } 
						if = {
							limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
							change_religion = variable:PREV:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
						}
						else = {
							change_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
					else = {
						if = {
							limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
							set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
							set_variable = { which = AN_minority_religion_size value = 1 } 
						}
					}
				}
				
				###
				if = { 
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_minority_religion value = 0 } 
					set_variable = { which = AN_minority_religion_size value = 0 } 
					clr_province_flag = AN_expel_min
				}
					
				#TRANSFER POP, DESTROY WEALTH AT ROOT
				AN_reduce_wealth_fifth = yes
				trigger_switch = {
					on_trigger = base_manpower
					100 = { add_base_manpower = -20 event_target:AN_migrate_target = { add_base_manpower = 20 } }
					95 = { add_base_manpower = -19 event_target:AN_migrate_target = { add_base_manpower = 19 } }
					90 = { add_base_manpower = -18 event_target:AN_migrate_target = { add_base_manpower = 18 } }
					85 = { add_base_manpower = -17 event_target:AN_migrate_target = { add_base_manpower = 17 } }
					80 = { add_base_manpower = -16 event_target:AN_migrate_target = { add_base_manpower = 16 } }
					75 = { add_base_manpower = -15 event_target:AN_migrate_target = { add_base_manpower = 15 } }
					70 = { add_base_manpower = -14 event_target:AN_migrate_target = { add_base_manpower = 14 } }
					65 = { add_base_manpower = -13 event_target:AN_migrate_target = { add_base_manpower = 13 } }
					60 = { add_base_manpower = -12 event_target:AN_migrate_target = { add_base_manpower = 12 } }
					55 = { add_base_manpower = -11 event_target:AN_migrate_target = { add_base_manpower = 11 } }
					50 = { add_base_manpower = -10 event_target:AN_migrate_target = { add_base_manpower = 10 } }
					45 = { add_base_manpower = -9 event_target:AN_migrate_target = { add_base_manpower = 9 } }
					40 = { add_base_manpower = -8 event_target:AN_migrate_target = { add_base_manpower = 8 } }
					35 = { add_base_manpower = -7 event_target:AN_migrate_target = { add_base_manpower = 7 } }
					30 = { add_base_manpower = -6 event_target:AN_migrate_target = { add_base_manpower = 6 } }
					25 = { add_base_manpower = -5 event_target:AN_migrate_target = { add_base_manpower = 5 } }
					20 = { add_base_manpower = -4 event_target:AN_migrate_target = { add_base_manpower = 4 } }
					15 = { add_base_manpower = -3 event_target:AN_migrate_target = { add_base_manpower = 3 } }
					10 = { add_base_manpower = -2 event_target:AN_migrate_target = { add_base_manpower = 2 } }
					5 = { add_base_manpower = -1 event_target:AN_migrate_target = { add_base_manpower = 1 } }
				}
				
				AN_check_minorities = yes
				AN_check_dev_variables = yes
				###
			}
		}
	}
}

province_event = { #Majority Transfer
	id = AN_migrate.3
	title = "AN_migrate.3.t"
	desc = "AN_migrate.3.desc"
	picture = CITY_DEVELOPMENT_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	trigger = { 
	}
	
	immediate = {
		
		save_event_target_as = AN_migrate_origin
		owner = { save_event_target_as = AN_migrate_tag }


		if = {
			limit = {
				AN_linked_culture_religion_maj = yes
			}
			event_target:AN_DUMMY_PROV = {
				set_variable = { which = AN_province_culture which = PREV }
				set_variable = { which = AN_minority_culture which = AN_province_culture }
				change_culture = variable:AN_province_culture
			}
		}
		else_if = {
			limit = {
				AN_linked_culture_religion_min = yes
			}
			event_target:AN_DUMMY_PROV = {
				set_variable = { which = AN_minority_culture which = PREV }
				set_variable = { which = AN_province_culture which = AN_minority_culture }
				change_culture = variable:AN_minority_culture
			}
		}
		event_target:AN_DUMMY_PROV = {
			set_variable = { which = AN_province_religion which = PREV }
			set_variable = { which = AN_minority_religion which = AN_province_religion }
			change_religion = variable:AN_province_religion
		}
		
		
		random_list = {
			500 = { #Neighbor
				trigger = {
					any_neighbor_province = { 
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						check_variable = { which = AN_migration_growth value = 0 }
						OR = {
							AND = {
								is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV }
								NOT = { has_province_flag = AN_expel_maj } 
							}
							AND = {
								is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
								NOT = { has_province_flag = AN_expel_min } 
							}
							AND = {
								NOT = { check_variable = { which = AN_minority_religion_size
							}
						}
					}
				}
				random_neighbor_province = {
					limit = { 
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						check_variable = { which = AN_migration_growth value = 0 }
						OR = {
							AND = {
								is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV }
								NOT = { has_province_flag = AN_expel_maj } 
							}
							AND = {
								is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
								NOT = { has_province_flag = AN_expel_min } 
							}
							AND = {
							
							}
						}			
					}
					save_event_target_as = AN_migrate_target
				}
			}
			400 = { #Area
				trigger = {
					any_province = { 
						area_for_scope_province = { province_id = event_target:AN_migrate_origin }
						country_or_non_sovereign_subject_holds = event_target:AN_migrate_tag
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						check_variable = { which = AN_migration_growth value = 0 }
						OR = {
							AND = {
								is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV }
								NOT = { has_province_flag = AN_expel_maj } 
							}
							AND = {
								is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
								NOT = { has_province_flag = AN_expel_min } 
							}
							AND = {
							
							}
						}
					}
				}
				random_province = {
					limit = { 
						area_for_scope_province = { province_id = event_target:AN_migrate_origin }
						country_or_non_sovereign_subject_holds = event_target:AN_migrate_tag
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						check_variable = { which = AN_migration_growth value = 0 }
						OR = {
							AND = {
								is_variable_equal = { which = AN_province_religion which = event_target:AN_migrate_origin }
								NOT = { has_province_flag = AN_expel_maj } 
							}
							AND = {
								is_variable_equal = { which = AN_minority_religion which = event_target:AN_migrate_origin }
								NOT = { has_province_flag = AN_expel_min } 
							}
							AND = {
							
							}
						}			
					}
					save_event_target_as = AN_migrate_target
				}
			}
			50 = {
				trigger = {
					any_province = { 
						country_or_non_sovereign_subject_holds = event_target:AN_migrate_tag
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						check_variable = { which = AN_migration_growth value = 0 }
						OR = {
							AND = {
								is_variable_equal = { which = AN_province_religion which = event_target:AN_migrate_origin }
								NOT = { has_province_flag = AN_expel_maj } 
							}
							AND = {
								is_variable_equal = { which = AN_minority_religion which = event_target:AN_migrate_origin }
								NOT = { has_province_flag = AN_expel_min } 
							}
							AND = {
							
							}
						}
					}
				}
				random_province = {
					limit = { 
						country_or_non_sovereign_subject_holds = event_target:AN_migrate_tag
						check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
						check_variable = { which = AN_migration_growth value = 0 }
						OR = {
							AND = {
								is_variable_equal = { which = AN_province_religion which = event_target:AN_migrate_origin }
								NOT = { has_province_flag = AN_expel_maj } 
							}
							AND = {
								is_variable_equal = { which = AN_minority_religion which = event_target:AN_migrate_origin }
								NOT = { has_province_flag = AN_expel_min } 
							}
							AND = {
							
							}
						}			
					}
					save_event_target_as = AN_migrate_target
				}
			}
		}
	}
	
	option = { 
	
	}
	
	option = { 
	
	}
}

province_event = { #Minority Transfer
	id = AN_migrate.5
	title = "AN_migrate.5.t"
	desc = "AN_migrate.5.desc"
	picture = CITY_DEVELOPMENT_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	trigger = { 
	}
	
	immediate = {
		
		save_event_target_as = AN_migrate_origin
		owner = { save_event_target_as = AN_migrate_tag }
		
		
		if = {
			limit = {
				AN_linked_culture_religion_maj = yes
			}
			event_target:AN_DUMMY_PROV = {
				set_variable = { which = AN_province_culture which = PREV }
				set_variable = { which = AN_minority_culture which = AN_province_culture }
				change_culture = variable:AN_province_culture
			}
		}
		else_if = {
			limit = {
				AN_linked_culture_religion_min = yes
			}
			event_target:AN_DUMMY_PROV = {
				set_variable = { which = AN_minority_culture which = PREV }
				set_variable = { which = AN_province_culture which = AN_minority_culture }
				change_culture = variable:AN_minority_culture
			}
		}
		event_target:AN_DUMMY_PROV = {
			set_variable = { which = AN_minority_religion which = PREV }
			set_variable = { which = AN_province_religion which = AN_minority_religion }
			change_religion = variable:AN_minority_religion
		}
	}
	
	
	option = { 
		###
		XXXXX = { save_global_event_target_as = AN_DUMMY_PROV2 }
		
		###
		set_variable = { which = AN_pressure value = AN_prov_pop }
		multiply_variable = { which = AN_pressure which = AN_civ_stat }
		
		
		every_neighbor_province = {
			if = {
				limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
				PREV = { change_variable = { which = AN_pressure which = PREV } }
					event_target:AN_DUMMY_PROV2 = { set_variable = { which = AN_province_culture which = PREV } set_variable = { which = AN_target_culture which = AN_province_culture } }
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } }
				PREV = { change_variable = { which = AN_pressure which = PREV } }
				if = { 
					limit = { check_variable = { } is_variable_equal = { which = AN_target_culture value = 0 } }
					event_target:AN_DUMMY_PROV2 = { set_variable = { which = AN_minority_culture which = PREV } set_variable = { which = AN_target_culture which = AN_minority_culture } }
				}
			}
			else = {
				PREV = { subtract_variable = { which = AN_pressure which = PREV } }
				if = { 
					limit = { check_variable = { } }
				}
			}
		}
		change_variable = { which = AN_minority_progress which = AN_pressure }
		
		#RESET
		
		set_variable = { which = AN_pressure value = AN_prov_pop }
		multiply_variable = { which = AN_pressure which = AN_civ_stat }
		
	}
}


	
	
	
	